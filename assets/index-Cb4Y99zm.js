(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ym={exports:{}},ul={},Xm={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ao=Symbol.for("react.element"),I0=Symbol.for("react.portal"),A0=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),k0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),V0=Symbol.for("react.suspense"),N0=Symbol.for("react.memo"),D0=Symbol.for("react.lazy"),kd=Symbol.iterator;function M0(t){return t===null||typeof t!="object"?null:(t=kd&&t[kd]||t["@@iterator"],typeof t=="function"?t:null)}var Jm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zm=Object.assign,eg={};function Pi(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Jm}Pi.prototype.isReactComponent={};Pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tg(){}tg.prototype=Pi.prototype;function ih(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Jm}var sh=ih.prototype=new tg;sh.constructor=ih;Zm(sh,Pi.prototype);sh.isPureReactComponent=!0;var xd=Array.isArray,ng=Object.prototype.hasOwnProperty,oh={current:null},rg={key:!0,ref:!0,__self:!0,__source:!0};function ig(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)ng.call(e,r)&&!rg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ao,type:t,key:s,ref:a,props:i,_owner:oh.current}}function O0(t,e){return{$$typeof:ao,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ah(t){return typeof t=="object"&&t!==null&&t.$$typeof===ao}function L0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pd=/\/+/g;function iu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L0(""+t.key):e.toString(36)}function ia(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ao:case I0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+iu(a,0):r,xd(i)?(n="",t!=null&&(n=t.replace(Pd,"$&/")+"/"),ia(i,e,n,"",function(h){return h})):i!=null&&(ah(i)&&(i=O0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Pd,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",xd(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+iu(s,l);a+=ia(s,e,n,c,i)}else if(c=M0(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+iu(s,l++),a+=ia(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Do(t,e,n){if(t==null)return t;var r=[],i=0;return ia(t,r,"","",function(s){return e.call(n,s,i++)}),r}function b0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},sa={transition:null},F0={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:sa,ReactCurrentOwner:oh};function sg(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Do,forEach:function(t,e,n){Do(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Do(t,function(){e++}),e},toArray:function(t){return Do(t,function(e){return e})||[]},only:function(t){if(!ah(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Pi;ne.Fragment=A0;ne.Profiler=R0;ne.PureComponent=ih;ne.StrictMode=C0;ne.Suspense=V0;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F0;ne.act=sg;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=oh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ng.call(e,c)&&!rg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ao,type:t.type,key:i,ref:s,props:r,_owner:a}};ne.createContext=function(t){return t={$$typeof:x0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:k0,_context:t},t.Consumer=t};ne.createElement=ig;ne.createFactory=function(t){var e=ig.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:P0,render:t}};ne.isValidElement=ah;ne.lazy=function(t){return{$$typeof:D0,_payload:{_status:-1,_result:t},_init:b0}};ne.memo=function(t,e){return{$$typeof:N0,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=sa.transition;sa.transition={};try{t()}finally{sa.transition=e}};ne.unstable_act=sg;ne.useCallback=function(t,e){return ut.current.useCallback(t,e)};ne.useContext=function(t){return ut.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};ne.useEffect=function(t,e){return ut.current.useEffect(t,e)};ne.useId=function(){return ut.current.useId()};ne.useImperativeHandle=function(t,e,n){return ut.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return ut.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return ut.current.useReducer(t,e,n)};ne.useRef=function(t){return ut.current.useRef(t)};ne.useState=function(t){return ut.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return ut.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return ut.current.useTransition()};ne.version="18.3.1";Xm.exports=ne;var ve=Xm.exports;const og=S0(ve);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0=ve,U0=Symbol.for("react.element"),z0=Symbol.for("react.fragment"),B0=Object.prototype.hasOwnProperty,$0=j0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q0={key:!0,ref:!0,__self:!0,__source:!0};function ag(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)B0.call(e,r)&&!q0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:U0,type:t,key:s,ref:a,props:i,_owner:$0.current}}ul.Fragment=z0;ul.jsx=ag;ul.jsxs=ag;Ym.exports=ul;var N=Ym.exports,qu={},lg={exports:{}},It={},ug={exports:{}},cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var J=B.length;B.push(Y);e:for(;0<J;){var fe=J-1>>>1,de=B[fe];if(0<i(de,Y))B[fe]=Y,B[J]=de,J=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],J=B.pop();if(J!==Y){B[0]=J;e:for(var fe=0,de=B.length,yt=de>>>1;fe<yt;){var it=2*(fe+1)-1,Ot=B[it],st=it+1,Ht=B[st];if(0>i(Ot,J))st<de&&0>i(Ht,Ot)?(B[fe]=Ht,B[st]=J,fe=st):(B[fe]=Ot,B[it]=J,fe=it);else if(st<de&&0>i(Ht,J))B[fe]=Ht,B[st]=J,fe=st;else break e}}return Y}function i(B,Y){var J=B.sortIndex-Y.sortIndex;return J!==0?J:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],d=1,m=null,y=3,C=!1,x=!1,V=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=B)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function M(B){if(V=!1,A(B),!x)if(n(c)!==null)x=!0,cr(U);else{var Y=n(h);Y!==null&&an(M,Y.startTime-B)}}function U(B,Y){x=!1,V&&(V=!1,I(g),g=-1),C=!0;var J=y;try{for(A(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||B&&!S());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,y=m.priorityLevel;var de=fe(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(c)&&r(c),A(Y)}else r(c);m=n(c)}if(m!==null)var yt=!0;else{var it=n(h);it!==null&&an(M,it.startTime-Y),yt=!1}return yt}finally{m=null,y=J,C=!1}}var z=!1,_=null,g=-1,v=5,E=-1;function S(){return!(t.unstable_now()-E<v)}function R(){if(_!==null){var B=t.unstable_now();E=B;var Y=!0;try{Y=_(!0,B)}finally{Y?T():(z=!1,_=null)}}else z=!1}var T;if(typeof w=="function")T=function(){w(R)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Mt=Ve.port2;Ve.port1.onmessage=R,T=function(){Mt.postMessage(null)}}else T=function(){b(R,0)};function cr(B){_=B,z||(z=!0,T())}function an(B,Y){g=b(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||C||(x=!0,cr(U))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var J=y;y=Y;try{return B()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=y;y=B;try{return Y()}finally{y=J}},t.unstable_scheduleCallback=function(B,Y,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=J+de,B={id:d++,callback:Y,priorityLevel:B,startTime:J,expirationTime:de,sortIndex:-1},J>fe?(B.sortIndex=J,e(h,B),n(c)===null&&B===n(h)&&(V?(I(g),g=-1):V=!0,an(M,J-fe))):(B.sortIndex=de,e(c,B),x||C||(x=!0,cr(U))),B},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(B){var Y=y;return function(){var J=y;y=Y;try{return B.apply(this,arguments)}finally{y=J}}}})(cg);ug.exports=cg;var H0=ug.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=ve,St=H0;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hg=new Set,Os={};function Nr(t,e){gi(t,e),gi(t+"Capture",e)}function gi(t,e){for(Os[t]=e,t=0;t<e.length;t++)hg.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,Q0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vd={},Nd={};function G0(t){return Hu.call(Nd,t)?!0:Hu.call(Vd,t)?!1:Q0.test(t)?Nd[t]=!0:(Vd[t]=!0,!1)}function K0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y0(t,e,n,r){if(e===null||typeof e>"u"||K0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var lh=/[\-:]([a-z])/g;function uh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lh,uh);Ke[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lh,uh);Ke[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lh,uh);Ke[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function ch(t,e,n,r){var i=Ke.hasOwnProperty(e)?Ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y0(e,n,i,r)&&(n=null),r||i===null?G0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=W0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mo=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),fg=Symbol.for("react.provider"),dg=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Gu=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),pg=Symbol.for("react.offscreen"),Dd=Symbol.iterator;function rs(t){return t===null||typeof t!="object"?null:(t=Dd&&t[Dd]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,su;function ps(t){if(su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+t}var ou=!1;function au(t,e){if(!t||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ps(t):""}function X0(t){switch(t.tag){case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return t=au(t.type,!1),t;case 11:return t=au(t.type.render,!1),t;case 1:return t=au(t.type,!0),t;default:return""}}function Ku(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case Gr:return"Portal";case Wu:return"Profiler";case hh:return"StrictMode";case Qu:return"Suspense";case Gu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dg:return(t.displayName||"Context")+".Consumer";case fg:return(t._context.displayName||"Context")+".Provider";case fh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dh:return e=t.displayName||null,e!==null?e:Ku(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return Ku(t(e))}catch{}}return null}function J0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ku(e);case 8:return e===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z0(t){var e=mg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oo(t){t._valueTracker||(t._valueTracker=Z0(t))}function gg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ta(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yu(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Md(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yg(t,e){e=e.checked,e!=null&&ch(t,"checked",e,!1)}function Xu(t,e){yg(t,e);var n=Jn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ju(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Od(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ju(t,e,n){(e!=="number"||Ta(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ms=Array.isArray;function oi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ld(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ms(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jn(n)}}function _g(t,e){var n=Jn(e.value),r=Jn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lo,wg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ew=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(t){ew.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Es[e]=Es[t]})});function Eg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Es.hasOwnProperty(t)&&Es[t]?(""+e).trim():e+"px"}function Tg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Eg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tw=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(t,e){if(e){if(tw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function nc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ic=null,ai=null,li=null;function Fd(t){if(t=co(t)){if(typeof ic!="function")throw Error(F(280));var e=t.stateNode;e&&(e=pl(e),ic(t.stateNode,t.type,e))}}function Sg(t){ai?li?li.push(t):li=[t]:ai=t}function Ig(){if(ai){var t=ai,e=li;if(li=ai=null,Fd(t),e)for(t=0;t<e.length;t++)Fd(e[t])}}function Ag(t,e){return t(e)}function Cg(){}var lu=!1;function Rg(t,e,n){if(lu)return t(e,n);lu=!0;try{return Ag(t,e,n)}finally{lu=!1,(ai!==null||li!==null)&&(Cg(),Ig())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var sc=!1;if(gn)try{var is={};Object.defineProperty(is,"passive",{get:function(){sc=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{sc=!1}function nw(t,e,n,r,i,s,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Ts=!1,Sa=null,Ia=!1,oc=null,rw={onError:function(t){Ts=!0,Sa=t}};function iw(t,e,n,r,i,s,a,l,c){Ts=!1,Sa=null,nw.apply(rw,arguments)}function sw(t,e,n,r,i,s,a,l,c){if(iw.apply(this,arguments),Ts){if(Ts){var h=Sa;Ts=!1,Sa=null}else throw Error(F(198));Ia||(Ia=!0,oc=h)}}function Dr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jd(t){if(Dr(t)!==t)throw Error(F(188))}function ow(t){var e=t.alternate;if(!e){if(e=Dr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jd(i),t;if(s===r)return jd(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function xg(t){return t=ow(t),t!==null?Pg(t):null}function Pg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pg(t);if(e!==null)return e;t=t.sibling}return null}var Vg=St.unstable_scheduleCallback,Ud=St.unstable_cancelCallback,aw=St.unstable_shouldYield,lw=St.unstable_requestPaint,Pe=St.unstable_now,uw=St.unstable_getCurrentPriorityLevel,mh=St.unstable_ImmediatePriority,Ng=St.unstable_UserBlockingPriority,Aa=St.unstable_NormalPriority,cw=St.unstable_LowPriority,Dg=St.unstable_IdlePriority,cl=null,Zt=null;function hw(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:pw,fw=Math.log,dw=Math.LN2;function pw(t){return t>>>=0,t===0?32:31-(fw(t)/dw|0)|0}var bo=64,Fo=4194304;function gs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ca(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=gs(l):(s&=a,s!==0&&(r=gs(s)))}else a=n&~i,a!==0?r=gs(a):s!==0&&(r=gs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),i=1<<n,r|=t[n],e&=~i;return r}function mw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-zt(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=mw(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function ac(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mg(){var t=bo;return bo<<=1,!(bo&4194240)&&(bo=64),t}function uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function yw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function Og(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lg,yh,bg,Fg,jg,lc=!1,jo=[],jn=null,Un=null,zn=null,Fs=new Map,js=new Map,Mn=[],_w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zd(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Fs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(e.pointerId)}}function ss(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=co(e),e!==null&&yh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vw(t,e,n,r,i){switch(e){case"focusin":return jn=ss(jn,t,e,n,r,i),!0;case"dragenter":return Un=ss(Un,t,e,n,r,i),!0;case"mouseover":return zn=ss(zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fs.set(s,ss(Fs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,js.set(s,ss(js.get(s)||null,t,e,n,r,i)),!0}return!1}function Ug(t){var e=vr(t.target);if(e!==null){var n=Dr(e);if(n!==null){if(e=n.tag,e===13){if(e=kg(n),e!==null){t.blockedOn=e,jg(t.priority,function(){bg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rc=r,n.target.dispatchEvent(r),rc=null}else return e=co(n),e!==null&&yh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bd(t,e,n){oa(t)&&n.delete(e)}function ww(){lc=!1,jn!==null&&oa(jn)&&(jn=null),Un!==null&&oa(Un)&&(Un=null),zn!==null&&oa(zn)&&(zn=null),Fs.forEach(Bd),js.forEach(Bd)}function os(t,e){t.blockedOn===e&&(t.blockedOn=null,lc||(lc=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,ww)))}function Us(t){function e(i){return os(i,t)}if(0<jo.length){os(jo[0],t);for(var n=1;n<jo.length;n++){var r=jo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&os(jn,t),Un!==null&&os(Un,t),zn!==null&&os(zn,t),Fs.forEach(e),js.forEach(e),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)Ug(n),n.blockedOn===null&&Mn.shift()}var ui=Sn.ReactCurrentBatchConfig,Ra=!0;function Ew(t,e,n,r){var i=ce,s=ui.transition;ui.transition=null;try{ce=1,_h(t,e,n,r)}finally{ce=i,ui.transition=s}}function Tw(t,e,n,r){var i=ce,s=ui.transition;ui.transition=null;try{ce=4,_h(t,e,n,r)}finally{ce=i,ui.transition=s}}function _h(t,e,n,r){if(Ra){var i=uc(t,e,n,r);if(i===null)vu(t,e,r,ka,n),zd(t,r);else if(vw(i,t,e,n,r))r.stopPropagation();else if(zd(t,r),e&4&&-1<_w.indexOf(t)){for(;i!==null;){var s=co(i);if(s!==null&&Lg(s),s=uc(t,e,n,r),s===null&&vu(t,e,r,ka,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vu(t,e,r,null,n)}}var ka=null;function uc(t,e,n,r){if(ka=null,t=ph(r),t=vr(t),t!==null)if(e=Dr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ka=t,null}function zg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uw()){case mh:return 1;case Ng:return 4;case Aa:case cw:return 16;case Dg:return 536870912;default:return 16}default:return 16}}var Ln=null,vh=null,aa=null;function Bg(){if(aa)return aa;var t,e=vh,n=e.length,r,i="value"in Ln?Ln.value:Ln.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return aa=i.slice(t,1<r?1-r:void 0)}function la(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uo(){return!0}function $d(){return!1}function At(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uo:$d,this.isPropagationStopped=$d,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wh=At(Vi),uo=Ae({},Vi,{view:0,detail:0}),Sw=At(uo),cu,hu,as,hl=Ae({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(cu=t.screenX-as.screenX,hu=t.screenY-as.screenY):hu=cu=0,as=t),cu)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),qd=At(hl),Iw=Ae({},hl,{dataTransfer:0}),Aw=At(Iw),Cw=Ae({},uo,{relatedTarget:0}),fu=At(Cw),Rw=Ae({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),kw=At(Rw),xw=Ae({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pw=At(xw),Vw=Ae({},Vi,{data:0}),Hd=At(Vw),Nw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ow(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mw[t])?!!e[t]:!1}function Eh(){return Ow}var Lw=Ae({},uo,{key:function(t){if(t.key){var e=Nw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=la(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(t){return t.type==="keypress"?la(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?la(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bw=At(Lw),Fw=Ae({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wd=At(Fw),jw=Ae({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),Uw=At(jw),zw=Ae({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bw=At(zw),$w=Ae({},hl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qw=At($w),Hw=[9,13,27,32],Th=gn&&"CompositionEvent"in window,Ss=null;gn&&"documentMode"in document&&(Ss=document.documentMode);var Ww=gn&&"TextEvent"in window&&!Ss,$g=gn&&(!Th||Ss&&8<Ss&&11>=Ss),Qd=" ",Gd=!1;function qg(t,e){switch(t){case"keyup":return Hw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yr=!1;function Qw(t,e){switch(t){case"compositionend":return Hg(e);case"keypress":return e.which!==32?null:(Gd=!0,Qd);case"textInput":return t=e.data,t===Qd&&Gd?null:t;default:return null}}function Gw(t,e){if(Yr)return t==="compositionend"||!Th&&qg(t,e)?(t=Bg(),aa=vh=Ln=null,Yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $g&&e.locale!=="ko"?null:e.data;default:return null}}var Kw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kw[t.type]:e==="textarea"}function Wg(t,e,n,r){Sg(r),e=xa(e,"onChange"),0<e.length&&(n=new wh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Is=null,zs=null;function Yw(t){ry(t,0)}function fl(t){var e=Zr(t);if(gg(e))return t}function Xw(t,e){if(t==="change")return e}var Qg=!1;if(gn){var du;if(gn){var pu="oninput"in document;if(!pu){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),pu=typeof Yd.oninput=="function"}du=pu}else du=!1;Qg=du&&(!document.documentMode||9<document.documentMode)}function Xd(){Is&&(Is.detachEvent("onpropertychange",Gg),zs=Is=null)}function Gg(t){if(t.propertyName==="value"&&fl(zs)){var e=[];Wg(e,zs,t,ph(t)),Rg(Yw,e)}}function Jw(t,e,n){t==="focusin"?(Xd(),Is=e,zs=n,Is.attachEvent("onpropertychange",Gg)):t==="focusout"&&Xd()}function Zw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fl(zs)}function eE(t,e){if(t==="click")return fl(e)}function tE(t,e){if(t==="input"||t==="change")return fl(e)}function nE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:nE;function Bs(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hu.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function Jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zd(t,e){var n=Jd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jd(n)}}function Kg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yg(){for(var t=window,e=Ta();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ta(t.document)}return e}function Sh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rE(t){var e=Yg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kg(n.ownerDocument.documentElement,n)){if(r!==null&&Sh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zd(n,s);var a=Zd(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iE=gn&&"documentMode"in document&&11>=document.documentMode,Xr=null,cc=null,As=null,hc=!1;function ep(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hc||Xr==null||Xr!==Ta(r)||(r=Xr,"selectionStart"in r&&Sh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),As&&Bs(As,r)||(As=r,r=xa(cc,"onSelect"),0<r.length&&(e=new wh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xr)))}function zo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jr={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionend:zo("Transition","TransitionEnd")},mu={},Xg={};gn&&(Xg=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function dl(t){if(mu[t])return mu[t];if(!Jr[t])return t;var e=Jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xg)return mu[t]=e[n];return t}var Jg=dl("animationend"),Zg=dl("animationiteration"),ey=dl("animationstart"),ty=dl("transitionend"),ny=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(t,e){ny.set(t,e),Nr(e,[t])}for(var gu=0;gu<tp.length;gu++){var yu=tp[gu],sE=yu.toLowerCase(),oE=yu[0].toUpperCase()+yu.slice(1);or(sE,"on"+oE)}or(Jg,"onAnimationEnd");or(Zg,"onAnimationIteration");or(ey,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(ty,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function np(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sw(r,e,void 0,t),t.currentTarget=null}function ry(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;np(i,l,h),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;np(i,l,h),s=c}}}if(Ia)throw t=oc,Ia=!1,oc=null,t}function _e(t,e){var n=e[gc];n===void 0&&(n=e[gc]=new Set);var r=t+"__bubble";n.has(r)||(iy(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),iy(n,t,r,e)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[Bo]){t[Bo]=!0,hg.forEach(function(n){n!=="selectionchange"&&(aE.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bo]||(e[Bo]=!0,_u("selectionchange",!1,e))}}function iy(t,e,n,r){switch(zg(e)){case 1:var i=Ew;break;case 4:i=Tw;break;default:i=_h}n=i.bind(null,e,n,t),i=void 0,!sc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=vr(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Rg(function(){var h=s,d=ph(n),m=[];e:{var y=ny.get(t);if(y!==void 0){var C=wh,x=t;switch(t){case"keypress":if(la(n)===0)break e;case"keydown":case"keyup":C=bw;break;case"focusin":x="focus",C=fu;break;case"focusout":x="blur",C=fu;break;case"beforeblur":case"afterblur":C=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Uw;break;case Jg:case Zg:case ey:C=kw;break;case ty:C=Bw;break;case"scroll":C=Sw;break;case"wheel":C=qw;break;case"copy":case"cut":case"paste":C=Pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Wd}var V=(e&4)!==0,b=!V&&t==="scroll",I=V?y!==null?y+"Capture":null:y;V=[];for(var w=h,A;w!==null;){A=w;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,I!==null&&(M=bs(w,I),M!=null&&V.push(qs(w,M,A)))),b)break;w=w.return}0<V.length&&(y=new C(y,x,null,n,d),m.push({event:y,listeners:V}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",y&&n!==rc&&(x=n.relatedTarget||n.fromElement)&&(vr(x)||x[yn]))break e;if((C||y)&&(y=d.window===d?d:(y=d.ownerDocument)?y.defaultView||y.parentWindow:window,C?(x=n.relatedTarget||n.toElement,C=h,x=x?vr(x):null,x!==null&&(b=Dr(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(C=null,x=h),C!==x)){if(V=qd,M="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(V=Wd,M="onPointerLeave",I="onPointerEnter",w="pointer"),b=C==null?y:Zr(C),A=x==null?y:Zr(x),y=new V(M,w+"leave",C,n,d),y.target=b,y.relatedTarget=A,M=null,vr(d)===h&&(V=new V(I,w+"enter",x,n,d),V.target=A,V.relatedTarget=b,M=V),b=M,C&&x)t:{for(V=C,I=x,w=0,A=V;A;A=Br(A))w++;for(A=0,M=I;M;M=Br(M))A++;for(;0<w-A;)V=Br(V),w--;for(;0<A-w;)I=Br(I),A--;for(;w--;){if(V===I||I!==null&&V===I.alternate)break t;V=Br(V),I=Br(I)}V=null}else V=null;C!==null&&rp(m,y,C,V,!1),x!==null&&b!==null&&rp(m,b,x,V,!0)}}e:{if(y=h?Zr(h):window,C=y.nodeName&&y.nodeName.toLowerCase(),C==="select"||C==="input"&&y.type==="file")var U=Xw;else if(Kd(y))if(Qg)U=tE;else{U=Zw;var z=Jw}else(C=y.nodeName)&&C.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(U=eE);if(U&&(U=U(t,h))){Wg(m,U,n,d);break e}z&&z(t,y,h),t==="focusout"&&(z=y._wrapperState)&&z.controlled&&y.type==="number"&&Ju(y,"number",y.value)}switch(z=h?Zr(h):window,t){case"focusin":(Kd(z)||z.contentEditable==="true")&&(Xr=z,cc=h,As=null);break;case"focusout":As=cc=Xr=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,ep(m,n,d);break;case"selectionchange":if(iE)break;case"keydown":case"keyup":ep(m,n,d)}var _;if(Th)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Yr?qg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&($g&&n.locale!=="ko"&&(Yr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Yr&&(_=Bg()):(Ln=d,vh="value"in Ln?Ln.value:Ln.textContent,Yr=!0)),z=xa(h,g),0<z.length&&(g=new Hd(g,t,null,n,d),m.push({event:g,listeners:z}),_?g.data=_:(_=Hg(n),_!==null&&(g.data=_)))),(_=Ww?Qw(t,n):Gw(t,n))&&(h=xa(h,"onBeforeInput"),0<h.length&&(d=new Hd("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:h}),d.data=_))}ry(m,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bs(t,n),s!=null&&r.unshift(qs(t,s,i)),s=bs(t,e),s!=null&&r.push(qs(t,s,i))),t=t.return}return r}function Br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rp(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=bs(n,s),c!=null&&a.unshift(qs(n,c,l))):i||(c=bs(n,s),c!=null&&a.push(qs(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function ip(t){return(typeof t=="string"?t:""+t).replace(lE,`
`).replace(uE,"")}function $o(t,e,n){if(e=ip(e),ip(t)!==e&&n)throw Error(F(425))}function Pa(){}var fc=null,dc=null;function pc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,cE=typeof clearTimeout=="function"?clearTimeout:void 0,sp=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof sp<"u"?function(t){return sp.resolve(null).then(t).catch(fE)}:mc;function fE(t){setTimeout(function(){throw t})}function wu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Us(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function op(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Ni,Hs="__reactProps$"+Ni,yn="__reactContainer$"+Ni,gc="__reactEvents$"+Ni,dE="__reactListeners$"+Ni,pE="__reactHandles$"+Ni;function vr(t){var e=t[Jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=op(t);t!==null;){if(n=t[Jt])return n;t=op(t)}return e}t=n,n=t.parentNode}return null}function co(t){return t=t[Jt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function pl(t){return t[Hs]||null}var yc=[],ei=-1;function ar(t){return{current:t}}function Ee(t){0>ei||(t.current=yc[ei],yc[ei]=null,ei--)}function ge(t,e){ei++,yc[ei]=t.current,t.current=e}var Zn={},rt=ar(Zn),pt=ar(!1),Ar=Zn;function yi(t,e){var n=t.type.contextTypes;if(!n)return Zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mt(t){return t=t.childContextTypes,t!=null}function Va(){Ee(pt),Ee(rt)}function ap(t,e,n){if(rt.current!==Zn)throw Error(F(168));ge(rt,e),ge(pt,n)}function sy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,J0(t)||"Unknown",i));return Ae({},n,r)}function Na(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zn,Ar=rt.current,ge(rt,t),ge(pt,pt.current),!0}function lp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=sy(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,Ee(pt),Ee(rt),ge(rt,t)):Ee(pt),ge(pt,n)}var hn=null,ml=!1,Eu=!1;function oy(t){hn===null?hn=[t]:hn.push(t)}function mE(t){ml=!0,oy(t)}function lr(){if(!Eu&&hn!==null){Eu=!0;var t=0,e=ce;try{var n=hn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,ml=!1}catch(i){throw hn!==null&&(hn=hn.slice(t+1)),Vg(mh,lr),i}finally{ce=e,Eu=!1}}return null}var ti=[],ni=0,Da=null,Ma=0,Ct=[],Rt=0,Cr=null,fn=1,dn="";function gr(t,e){ti[ni++]=Ma,ti[ni++]=Da,Da=t,Ma=e}function ay(t,e,n){Ct[Rt++]=fn,Ct[Rt++]=dn,Ct[Rt++]=Cr,Cr=t;var r=fn;t=dn;var i=32-zt(r)-1;r&=~(1<<i),n+=1;var s=32-zt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,fn=1<<32-zt(e)+i|n<<i|r,dn=s+t}else fn=1<<s|n<<i|r,dn=t}function Ih(t){t.return!==null&&(gr(t,1),ay(t,1,0))}function Ah(t){for(;t===Da;)Da=ti[--ni],ti[ni]=null,Ma=ti[--ni],ti[ni]=null;for(;t===Cr;)Cr=Ct[--Rt],Ct[Rt]=null,dn=Ct[--Rt],Ct[Rt]=null,fn=Ct[--Rt],Ct[Rt]=null}var Tt=null,Et=null,Te=!1,jt=null;function ly(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function up(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,Et=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,Et=null,!0):!1;default:return!1}}function _c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vc(t){if(Te){var e=Et;if(e){var n=e;if(!up(t,e)){if(_c(t))throw Error(F(418));e=Bn(n.nextSibling);var r=Tt;e&&up(t,e)?ly(r,n):(t.flags=t.flags&-4097|2,Te=!1,Tt=t)}}else{if(_c(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Tt=t}}}function cp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function qo(t){if(t!==Tt)return!1;if(!Te)return cp(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pc(t.type,t.memoizedProps)),e&&(e=Et)){if(_c(t))throw uy(),Error(F(418));for(;e;)ly(t,e),e=Bn(e.nextSibling)}if(cp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Tt?Bn(t.stateNode.nextSibling):null;return!0}function uy(){for(var t=Et;t;)t=Bn(t.nextSibling)}function _i(){Et=Tt=null,Te=!1}function Ch(t){jt===null?jt=[t]:jt.push(t)}var gE=Sn.ReactCurrentBatchConfig;function ls(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Ho(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hp(t){var e=t._init;return e(t._payload)}function cy(t){function e(I,w){if(t){var A=I.deletions;A===null?(I.deletions=[w],I.flags|=16):A.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function i(I,w){return I=Wn(I,w),I.index=0,I.sibling=null,I}function s(I,w,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<w?(I.flags|=2,w):A):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,A,M){return w===null||w.tag!==6?(w=ku(A,I.mode,M),w.return=I,w):(w=i(w,A),w.return=I,w)}function c(I,w,A,M){var U=A.type;return U===Kr?d(I,w,A.props.children,M,A.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Nn&&hp(U)===w.type)?(M=i(w,A.props),M.ref=ls(I,w,A),M.return=I,M):(M=ma(A.type,A.key,A.props,null,I.mode,M),M.ref=ls(I,w,A),M.return=I,M)}function h(I,w,A,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=xu(A,I.mode,M),w.return=I,w):(w=i(w,A.children||[]),w.return=I,w)}function d(I,w,A,M,U){return w===null||w.tag!==7?(w=Ir(A,I.mode,M,U),w.return=I,w):(w=i(w,A),w.return=I,w)}function m(I,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ku(""+w,I.mode,A),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mo:return A=ma(w.type,w.key,w.props,null,I.mode,A),A.ref=ls(I,null,w),A.return=I,A;case Gr:return w=xu(w,I.mode,A),w.return=I,w;case Nn:var M=w._init;return m(I,M(w._payload),A)}if(ms(w)||rs(w))return w=Ir(w,I.mode,A,null),w.return=I,w;Ho(I,w)}return null}function y(I,w,A,M){var U=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:l(I,w,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mo:return A.key===U?c(I,w,A,M):null;case Gr:return A.key===U?h(I,w,A,M):null;case Nn:return U=A._init,y(I,w,U(A._payload),M)}if(ms(A)||rs(A))return U!==null?null:d(I,w,A,M,null);Ho(I,A)}return null}function C(I,w,A,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(A)||null,l(w,I,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Mo:return I=I.get(M.key===null?A:M.key)||null,c(w,I,M,U);case Gr:return I=I.get(M.key===null?A:M.key)||null,h(w,I,M,U);case Nn:var z=M._init;return C(I,w,A,z(M._payload),U)}if(ms(M)||rs(M))return I=I.get(A)||null,d(w,I,M,U,null);Ho(w,M)}return null}function x(I,w,A,M){for(var U=null,z=null,_=w,g=w=0,v=null;_!==null&&g<A.length;g++){_.index>g?(v=_,_=null):v=_.sibling;var E=y(I,_,A[g],M);if(E===null){_===null&&(_=v);break}t&&_&&E.alternate===null&&e(I,_),w=s(E,w,g),z===null?U=E:z.sibling=E,z=E,_=v}if(g===A.length)return n(I,_),Te&&gr(I,g),U;if(_===null){for(;g<A.length;g++)_=m(I,A[g],M),_!==null&&(w=s(_,w,g),z===null?U=_:z.sibling=_,z=_);return Te&&gr(I,g),U}for(_=r(I,_);g<A.length;g++)v=C(_,I,g,A[g],M),v!==null&&(t&&v.alternate!==null&&_.delete(v.key===null?g:v.key),w=s(v,w,g),z===null?U=v:z.sibling=v,z=v);return t&&_.forEach(function(S){return e(I,S)}),Te&&gr(I,g),U}function V(I,w,A,M){var U=rs(A);if(typeof U!="function")throw Error(F(150));if(A=U.call(A),A==null)throw Error(F(151));for(var z=U=null,_=w,g=w=0,v=null,E=A.next();_!==null&&!E.done;g++,E=A.next()){_.index>g?(v=_,_=null):v=_.sibling;var S=y(I,_,E.value,M);if(S===null){_===null&&(_=v);break}t&&_&&S.alternate===null&&e(I,_),w=s(S,w,g),z===null?U=S:z.sibling=S,z=S,_=v}if(E.done)return n(I,_),Te&&gr(I,g),U;if(_===null){for(;!E.done;g++,E=A.next())E=m(I,E.value,M),E!==null&&(w=s(E,w,g),z===null?U=E:z.sibling=E,z=E);return Te&&gr(I,g),U}for(_=r(I,_);!E.done;g++,E=A.next())E=C(_,I,g,E.value,M),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?g:E.key),w=s(E,w,g),z===null?U=E:z.sibling=E,z=E);return t&&_.forEach(function(R){return e(I,R)}),Te&&gr(I,g),U}function b(I,w,A,M){if(typeof A=="object"&&A!==null&&A.type===Kr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Mo:e:{for(var U=A.key,z=w;z!==null;){if(z.key===U){if(U=A.type,U===Kr){if(z.tag===7){n(I,z.sibling),w=i(z,A.props.children),w.return=I,I=w;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Nn&&hp(U)===z.type){n(I,z.sibling),w=i(z,A.props),w.ref=ls(I,z,A),w.return=I,I=w;break e}n(I,z);break}else e(I,z);z=z.sibling}A.type===Kr?(w=Ir(A.props.children,I.mode,M,A.key),w.return=I,I=w):(M=ma(A.type,A.key,A.props,null,I.mode,M),M.ref=ls(I,w,A),M.return=I,I=M)}return a(I);case Gr:e:{for(z=A.key;w!==null;){if(w.key===z)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(I,w.sibling),w=i(w,A.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=xu(A,I.mode,M),w.return=I,I=w}return a(I);case Nn:return z=A._init,b(I,w,z(A._payload),M)}if(ms(A))return x(I,w,A,M);if(rs(A))return V(I,w,A,M);Ho(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(I,w.sibling),w=i(w,A),w.return=I,I=w):(n(I,w),w=ku(A,I.mode,M),w.return=I,I=w),a(I)):n(I,w)}return b}var vi=cy(!0),hy=cy(!1),Oa=ar(null),La=null,ri=null,Rh=null;function kh(){Rh=ri=La=null}function xh(t){var e=Oa.current;Ee(Oa),t._currentValue=e}function wc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){La=t,Rh=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(Rh!==t)if(t={context:t,memoizedValue:e,next:null},ri===null){if(La===null)throw Error(F(308));ri=t,La.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return e}var wr=null;function Ph(t){wr===null?wr=[t]:wr.push(t)}function fy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ph(e)):(n.next=i.next,i.next=n),e.interleaved=n,_n(t,r)}function _n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Vh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_n(t,n)}return i=r.interleaved,i===null?(e.next=e,Ph(r)):(e.next=i.next,i.next=e),r.interleaved=e,_n(t,n)}function ua(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}function fp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ba(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?s=h:a.next=h,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,d=h=c=null,l=s;do{var y=l.lane,C=l.eventTime;if((r&y)===y){d!==null&&(d=d.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,V=l;switch(y=e,C=n,V.tag){case 1:if(x=V.payload,typeof x=="function"){m=x.call(C,m,y);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=V.payload,y=typeof x=="function"?x.call(C,m,y):x,y==null)break e;m=Ae({},m,y);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else C={eventTime:C,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=C,c=m):d=d.next=C,a|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(d===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);kr|=a,t.lanes=a,t.memoizedState=m}}function dp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var ho={},en=ar(ho),Ws=ar(ho),Qs=ar(ho);function Er(t){if(t===ho)throw Error(F(174));return t}function Nh(t,e){switch(ge(Qs,e),ge(Ws,t),ge(en,ho),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ec(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ec(e,t)}Ee(en),ge(en,e)}function wi(){Ee(en),Ee(Ws),Ee(Qs)}function py(t){Er(Qs.current);var e=Er(en.current),n=ec(e,t.type);e!==n&&(ge(Ws,t),ge(en,n))}function Dh(t){Ws.current===t&&(Ee(en),Ee(Ws))}var Se=ar(0);function Fa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tu=[];function Mh(){for(var t=0;t<Tu.length;t++)Tu[t]._workInProgressVersionPrimary=null;Tu.length=0}var ca=Sn.ReactCurrentDispatcher,Su=Sn.ReactCurrentBatchConfig,Rr=0,Ie=null,be=null,Be=null,ja=!1,Cs=!1,Gs=0,yE=0;function Xe(){throw Error(F(321))}function Oh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Lh(t,e,n,r,i,s){if(Rr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ca.current=t===null||t.memoizedState===null?EE:TE,t=n(r,i),Cs){s=0;do{if(Cs=!1,Gs=0,25<=s)throw Error(F(301));s+=1,Be=be=null,e.updateQueue=null,ca.current=SE,t=n(r,i)}while(Cs)}if(ca.current=Ua,e=be!==null&&be.next!==null,Rr=0,Be=be=Ie=null,ja=!1,e)throw Error(F(300));return t}function bh(){var t=Gs!==0;return Gs=0,t}function Yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ie.memoizedState=Be=t:Be=Be.next=t,Be}function Dt(){if(be===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=Be===null?Ie.memoizedState:Be.next;if(e!==null)Be=e,be=t;else{if(t===null)throw Error(F(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Be===null?Ie.memoizedState=Be=t:Be=Be.next=t}return Be}function Ks(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=Dt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,h=s;do{var d=h.lane;if((Rr&d)===d)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,Ie.lanes|=d,kr|=d}h=h.next}while(h!==null&&h!==s);c===null?a=r:c.next=l,$t(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,kr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=Dt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);$t(s,e.memoizedState)||(dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function my(){}function gy(t,e){var n=Ie,r=Dt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,dt=!0),r=r.queue,Fh(vy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Ys(9,_y.bind(null,n,r,i,e),void 0,null),qe===null)throw Error(F(349));Rr&30||yy(n,e,i)}return i}function yy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _y(t,e,n,r){e.value=n,e.getSnapshot=r,wy(e)&&Ey(t)}function vy(t,e,n){return n(function(){wy(e)&&Ey(t)})}function wy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Ey(t){var e=_n(t,1);e!==null&&Bt(e,t,1,-1)}function pp(t){var e=Yt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=wE.bind(null,Ie,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ty(){return Dt().memoizedState}function ha(t,e,n,r){var i=Yt();Ie.flags|=t,i.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function gl(t,e,n,r){var i=Dt();r=r===void 0?null:r;var s=void 0;if(be!==null){var a=be.memoizedState;if(s=a.destroy,r!==null&&Oh(r,a.deps)){i.memoizedState=Ys(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=Ys(1|e,n,s,r)}function mp(t,e){return ha(8390656,8,t,e)}function Fh(t,e){return gl(2048,8,t,e)}function Sy(t,e){return gl(4,2,t,e)}function Iy(t,e){return gl(4,4,t,e)}function Ay(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cy(t,e,n){return n=n!=null?n.concat([t]):null,gl(4,4,Ay.bind(null,e,t),n)}function jh(){}function Ry(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ky(t,e){var n=Dt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xy(t,e,n){return Rr&21?($t(n,e)||(n=Mg(),Ie.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function _E(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=Su.transition;Su.transition={};try{t(!1),e()}finally{ce=n,Su.transition=r}}function Py(){return Dt().memoizedState}function vE(t,e,n){var r=Hn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vy(t))Ny(e,n);else if(n=fy(t,e,n,r),n!==null){var i=lt();Bt(n,t,r,i),Dy(n,e,r)}}function wE(t,e,n){var r=Hn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vy(t))Ny(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,$t(l,a)){var c=e.interleaved;c===null?(i.next=i,Ph(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=fy(t,e,i,r),n!==null&&(i=lt(),Bt(n,t,r,i),Dy(n,e,r))}}function Vy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Ny(t,e){Cs=ja=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Dy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gh(t,n)}}var Ua={readContext:Nt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},EE={readContext:Nt,useCallback:function(t,e){return Yt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:mp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ha(4194308,4,Ay.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ha(4194308,4,t,e)},useInsertionEffect:function(t,e){return ha(4,2,t,e)},useMemo:function(t,e){var n=Yt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vE.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Yt();return t={current:t},e.memoizedState=t},useState:pp,useDebugValue:jh,useDeferredValue:function(t){return Yt().memoizedState=t},useTransition:function(){var t=pp(!1),e=t[0];return t=_E.bind(null,t[1]),Yt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=Yt();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),qe===null)throw Error(F(349));Rr&30||yy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mp(vy.bind(null,r,s,t),[t]),r.flags|=2048,Ys(9,_y.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yt(),e=qe.identifierPrefix;if(Te){var n=dn,r=fn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TE={readContext:Nt,useCallback:Ry,useContext:Nt,useEffect:Fh,useImperativeHandle:Cy,useInsertionEffect:Sy,useLayoutEffect:Iy,useMemo:ky,useReducer:Iu,useRef:Ty,useState:function(){return Iu(Ks)},useDebugValue:jh,useDeferredValue:function(t){var e=Dt();return xy(e,be.memoizedState,t)},useTransition:function(){var t=Iu(Ks)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:my,useSyncExternalStore:gy,useId:Py,unstable_isNewReconciler:!1},SE={readContext:Nt,useCallback:Ry,useContext:Nt,useEffect:Fh,useImperativeHandle:Cy,useInsertionEffect:Sy,useLayoutEffect:Iy,useMemo:ky,useReducer:Au,useRef:Ty,useState:function(){return Au(Ks)},useDebugValue:jh,useDeferredValue:function(t){var e=Dt();return be===null?e.memoizedState=t:xy(e,be.memoizedState,t)},useTransition:function(){var t=Au(Ks)[0],e=Dt().memoizedState;return[t,e]},useMutableSource:my,useSyncExternalStore:gy,useId:Py,unstable_isNewReconciler:!1};function bt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ec(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yl={isMounted:function(t){return(t=t._reactInternals)?Dr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lt(),i=Hn(t),s=pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=$n(t,s,i),e!==null&&(Bt(e,t,i,r),ua(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lt(),i=Hn(t),s=pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=$n(t,s,i),e!==null&&(Bt(e,t,i,r),ua(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lt(),r=Hn(t),i=pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=$n(t,i,r),e!==null&&(Bt(e,t,r,n),ua(e,t,r))}};function gp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Bs(n,r)||!Bs(i,s):!0}function My(t,e,n){var r=!1,i=Zn,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=mt(e)?Ar:rt.current,r=e.contextTypes,s=(r=r!=null)?yi(t,i):Zn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yl.enqueueReplaceState(e,e.state,null)}function Tc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Vh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=mt(e)?Ar:rt.current,i.context=yi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ec(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yl.enqueueReplaceState(i,i.state,null),ba(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ei(t,e){try{var n="",r=e;do n+=X0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function Oy(t,e,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ba||(Ba=!0,Dc=r),Sc(t,e)},n}function Ly(t,e,n){n=pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sc(t,e),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function _p(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FE.bind(null,t,e,n),e.then(t,t))}function vp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pn(-1,1),e.tag=2,$n(n,e,1))),n.lanes|=1),t)}var AE=Sn.ReactCurrentOwner,dt=!1;function at(t,e,n,r){e.child=t===null?hy(e,null,n,r):vi(e,t.child,n,r)}function Ep(t,e,n,r,i){n=n.render;var s=e.ref;return ci(e,i),r=Lh(t,e,n,r,s,i),n=bh(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vn(t,e,i)):(Te&&n&&Ih(e),e.flags|=1,at(t,e,r,i),e.child)}function Tp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,by(t,e,s,r,i)):(t=ma(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bs,n(a,r)&&t.ref===e.ref)return vn(t,e,i)}return e.flags|=1,t=Wn(s,r),t.ref=e.ref,t.return=e,e.child=t}function by(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bs(s,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,vn(t,e,i)}return Ic(t,e,n,r,i)}function Fy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(si,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(si,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ge(si,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ge(si,wt),wt|=r;return at(t,e,i,n),e.child}function jy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ic(t,e,n,r,i){var s=mt(n)?Ar:rt.current;return s=yi(e,s),ci(e,i),n=Lh(t,e,n,r,s,i),r=bh(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vn(t,e,i)):(Te&&r&&Ih(e),e.flags|=1,at(t,e,n,i),e.child)}function Sp(t,e,n,r,i){if(mt(n)){var s=!0;Na(e)}else s=!1;if(ci(e,i),e.stateNode===null)fa(t,e),My(e,n,r),Tc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=mt(n)?Ar:rt.current,h=yi(e,h));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==h)&&yp(e,a,r,h),Dn=!1;var y=e.memoizedState;a.state=y,ba(e,r,a,i),c=e.memoizedState,l!==r||y!==c||pt.current||Dn?(typeof d=="function"&&(Ec(e,n,d,r),c=e.memoizedState),(l=Dn||gp(e,n,l,r,y,c,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:bt(e.type,l),a.props=h,m=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nt(c):(c=mt(n)?Ar:rt.current,c=yi(e,c));var C=n.getDerivedStateFromProps;(d=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||y!==c)&&yp(e,a,r,c),Dn=!1,y=e.memoizedState,a.state=y,ba(e,r,a,i);var x=e.memoizedState;l!==m||y!==x||pt.current||Dn?(typeof C=="function"&&(Ec(e,n,C,r),x=e.memoizedState),(h=Dn||gp(e,n,h,r,y,x,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=c,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Ac(t,e,n,r,s,i)}function Ac(t,e,n,r,i,s){jy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&lp(e,n,!1),vn(t,e,s);r=e.stateNode,AE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vi(e,t.child,null,s),e.child=vi(e,null,l,s)):at(t,e,l,s),e.memoizedState=r.state,i&&lp(e,n,!0),e.child}function Uy(t){var e=t.stateNode;e.pendingContext?ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ap(t,e.context,!1),Nh(t,e.containerInfo)}function Ip(t,e,n,r,i){return _i(),Ch(i),e.flags|=256,at(t,e,n,r),e.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function zy(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Se,i&1),t===null)return vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=wl(a,r,0,null),t=Ir(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rc(n),e.memoizedState=Cc,t):Uh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return CE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Wn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Wn(l,s):(s=Ir(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Rc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Cc,r}return s=t.child,t=s.sibling,r=Wn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Uh(t,e){return e=wl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wo(t,e,n,r){return r!==null&&Ch(r),vi(e,t.child,null,n),t=Uh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Cu(Error(F(422))),Wo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=wl({mode:"visible",children:r.children},i,0,null),s=Ir(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vi(e,t.child,null,a),e.child.memoizedState=Rc(a),e.memoizedState=Cc,s);if(!(e.mode&1))return Wo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(F(419)),r=Cu(s,r,void 0),Wo(t,e,a,r)}if(l=(a&t.childLanes)!==0,dt||l){if(r=qe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_n(t,i),Bt(r,t,i,-1))}return Wh(),r=Cu(Error(F(421))),Wo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Et=Bn(i.nextSibling),Tt=e,Te=!0,jt=null,t!==null&&(Ct[Rt++]=fn,Ct[Rt++]=dn,Ct[Rt++]=Cr,fn=t.id,dn=t.overflow,Cr=e),e=Uh(e,r.children),e.flags|=4096,e)}function Ap(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wc(t.return,e,n)}function Ru(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function By(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(at(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ap(t,n,e);else if(t.tag===19)Ap(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ru(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ru(e,!0,n,null,s);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RE(t,e,n){switch(e.tag){case 3:Uy(e),_i();break;case 5:py(e);break;case 1:mt(e.type)&&Na(e);break;case 4:Nh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ge(Oa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?zy(t,e,n):(ge(Se,Se.current&1),t=vn(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return By(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Fy(t,e,n)}return vn(t,e,n)}var $y,kc,qy,Hy;$y=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kc=function(){};qy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Er(en.current);var s=null;switch(n){case"input":i=Yu(t,i),r=Yu(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=Zu(t,i),r=Zu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pa)}tc(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Os.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Os.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&_e("scroll",t),s||l===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Hy=function(t,e,n,r){n!==r&&(e.flags|=4)};function us(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Je(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kE(t,e,n){var r=e.pendingProps;switch(Ah(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(e),null;case 1:return mt(e.type)&&Va(),Je(e),null;case 3:return r=e.stateNode,wi(),Ee(pt),Ee(rt),Mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(Lc(jt),jt=null))),kc(t,e),Je(e),null;case 5:Dh(e);var i=Er(Qs.current);if(n=e.type,t!==null&&e.stateNode!=null)qy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Je(e),null}if(t=Er(en.current),qo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jt]=e,r[Hs]=s,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<ys.length;i++)_e(ys[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Md(r,s),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_e("invalid",r);break;case"textarea":Ld(r,s),_e("invalid",r)}tc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&$o(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&$o(r.textContent,l,t),i=["children",""+l]):Os.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_e("scroll",r)}switch(n){case"input":Oo(r),Od(r,s,!0);break;case"textarea":Oo(r),bd(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Jt]=e,t[Hs]=r,$y(t,e,!1,!1),e.stateNode=t;e:{switch(a=nc(n,r),n){case"dialog":_e("cancel",t),_e("close",t),i=r;break;case"iframe":case"object":case"embed":_e("load",t),i=r;break;case"video":case"audio":for(i=0;i<ys.length;i++)_e(ys[i],t);i=r;break;case"source":_e("error",t),i=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),i=r;break;case"details":_e("toggle",t),i=r;break;case"input":Md(t,r),i=Yu(t,r),_e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Ld(t,r),i=Zu(t,r),_e("invalid",t);break;default:i=r}tc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?Tg(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wg(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ls(t,c):typeof c=="number"&&Ls(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Os.hasOwnProperty(s)?c!=null&&s==="onScroll"&&_e("scroll",t):c!=null&&ch(t,s,c,a))}switch(n){case"input":Oo(t),Od(t,r,!1);break;case"textarea":Oo(t),bd(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oi(t,!!r.multiple,s,!1):r.defaultValue!=null&&oi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Je(e),null;case 6:if(t&&e.stateNode!=null)Hy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Er(Qs.current),Er(en.current),qo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jt]=e,(s=r.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:$o(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$o(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=e,e.stateNode=r}return Je(e),null;case 13:if(Ee(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Et!==null&&e.mode&1&&!(e.flags&128))uy(),_i(),e.flags|=98560,s=!1;else if(s=qo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[Jt]=e}else _i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Je(e),s=!1}else jt!==null&&(Lc(jt),jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Fe===0&&(Fe=3):Wh())),e.updateQueue!==null&&(e.flags|=4),Je(e),null);case 4:return wi(),kc(t,e),t===null&&$s(e.stateNode.containerInfo),Je(e),null;case 10:return xh(e.type._context),Je(e),null;case 17:return mt(e.type)&&Va(),Je(e),null;case 19:if(Ee(Se),s=e.memoizedState,s===null)return Je(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)us(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Fa(t),a!==null){for(e.flags|=128,us(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Pe()>Ti&&(e.flags|=128,r=!0,us(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),us(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Te)return Je(e),null}else 2*Pe()-s.renderingStartTime>Ti&&n!==1073741824&&(e.flags|=128,r=!0,us(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pe(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(Je(e),null);case 22:case 23:return Hh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(Je(e),e.subtreeFlags&6&&(e.flags|=8192)):Je(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function xE(t,e){switch(Ah(e),e.tag){case 1:return mt(e.type)&&Va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wi(),Ee(pt),Ee(rt),Mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dh(e),null;case 13:if(Ee(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));_i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Se),null;case 4:return wi(),null;case 10:return xh(e.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var Qo=!1,tt=!1,PE=typeof WeakSet=="function"?WeakSet:Set,W=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function xc(t,e,n){try{n()}catch(r){ke(t,e,r)}}var Cp=!1;function VE(t,e){if(fc=Ra,t=Yg(),Sh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,h=0,d=0,m=t,y=null;t:for(;;){for(var C;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(C=m.firstChild)!==null;)y=m,m=C;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=a),y===s&&++d===r&&(c=a),(C=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=C}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(dc={focusedElem:t,selectionRange:n},Ra=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var V=x.memoizedProps,b=x.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?V:bt(e.type,V),b);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(M){ke(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return x=Cp,Cp=!1,x}function Rs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xc(e,n,s)}i=i.next}while(i!==r)}}function _l(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wy(t){var e=t.alternate;e!==null&&(t.alternate=null,Wy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jt],delete e[Hs],delete e[gc],delete e[dE],delete e[pE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qy(t){return t.tag===5||t.tag===3||t.tag===4}function Rp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pa));else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}var He=null,Ft=!1;function Vn(t,e,n){for(n=n.child;n!==null;)Gy(t,e,n),n=n.sibling}function Gy(t,e,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:tt||ii(n,e);case 6:var r=He,i=Ft;He=null,Vn(t,e,n),He=r,Ft=i,He!==null&&(Ft?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Ft?(t=He,n=n.stateNode,t.nodeType===8?wu(t.parentNode,n):t.nodeType===1&&wu(t,n),Us(t)):wu(He,n.stateNode));break;case 4:r=He,i=Ft,He=n.stateNode.containerInfo,Ft=!0,Vn(t,e,n),He=r,Ft=i;break;case 0:case 11:case 14:case 15:if(!tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&xc(n,e,a),i=i.next}while(i!==r)}Vn(t,e,n);break;case 1:if(!tt&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ke(n,e,l)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(tt=(r=tt)||n.memoizedState!==null,Vn(t,e,n),tt=r):Vn(t,e,n);break;default:Vn(t,e,n)}}function kp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PE),e.forEach(function(r){var i=UE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Ft=!1;break e;case 3:He=l.stateNode.containerInfo,Ft=!0;break e;case 4:He=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(He===null)throw Error(F(160));Gy(s,a,i),He=null,Ft=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){ke(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ky(e,t),e=e.sibling}function Ky(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Kt(t),r&4){try{Rs(3,t,t.return),_l(3,t)}catch(V){ke(t,t.return,V)}try{Rs(5,t,t.return)}catch(V){ke(t,t.return,V)}}break;case 1:Lt(e,t),Kt(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(Lt(e,t),Kt(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var i=t.stateNode;try{Ls(i,"")}catch(V){ke(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&yg(i,s),nc(l,a);var h=nc(l,s);for(a=0;a<c.length;a+=2){var d=c[a],m=c[a+1];d==="style"?Tg(i,m):d==="dangerouslySetInnerHTML"?wg(i,m):d==="children"?Ls(i,m):ch(i,d,m,h)}switch(l){case"input":Xu(i,s);break;case"textarea":_g(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?oi(i,!!s.multiple,C,!1):y!==!!s.multiple&&(s.defaultValue!=null?oi(i,!!s.multiple,s.defaultValue,!0):oi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Hs]=s}catch(V){ke(t,t.return,V)}}break;case 6:if(Lt(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){ke(t,t.return,V)}}break;case 3:if(Lt(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Us(e.containerInfo)}catch(V){ke(t,t.return,V)}break;case 4:Lt(e,t),Kt(t);break;case 13:Lt(e,t),Kt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($h=Pe())),r&4&&kp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(h=tt)||d,Lt(e,t),tt=h):Lt(e,t),Kt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(W=t,d=t.child;d!==null;){for(m=W=d;W!==null;){switch(y=W,C=y.child,y.tag){case 0:case 11:case 14:case 15:Rs(4,y,y.return);break;case 1:ii(y,y.return);var x=y.stateNode;if(typeof x.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(V){ke(r,n,V)}}break;case 5:ii(y,y.return);break;case 22:if(y.memoizedState!==null){Pp(m);continue}}C!==null?(C.return=y,W=C):Pp(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Eg("display",a))}catch(V){ke(t,t.return,V)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(V){ke(t,t.return,V)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Kt(t),r&4&&kp(t);break;case 21:break;default:Lt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qy(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ls(i,""),r.flags&=-33);var s=Rp(t);Nc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Rp(t);Vc(t,l,a);break;default:throw Error(F(161))}}catch(c){ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NE(t,e,n){W=t,Yy(t)}function Yy(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Qo;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||tt;l=Qo;var h=tt;if(Qo=a,(tt=c)&&!h)for(W=i;W!==null;)a=W,c=a.child,a.tag===22&&a.memoizedState!==null?Vp(i):c!==null?(c.return=a,W=c):Vp(i);for(;s!==null;)W=s,Yy(s),s=s.sibling;W=i,Qo=l,tt=h}xp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):xp(t)}}function xp(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||_l(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Us(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}tt||e.flags&512&&Pc(e)}catch(y){ke(e,e.return,y)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Pp(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Vp(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_l(4,e)}catch(c){ke(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ke(e,i,c)}}var s=e.return;try{Pc(e)}catch(c){ke(e,s,c)}break;case 5:var a=e.return;try{Pc(e)}catch(c){ke(e,a,c)}}}catch(c){ke(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var DE=Math.ceil,za=Sn.ReactCurrentDispatcher,zh=Sn.ReactCurrentOwner,Vt=Sn.ReactCurrentBatchConfig,le=0,qe=null,De=null,Ge=0,wt=0,si=ar(0),Fe=0,Xs=null,kr=0,vl=0,Bh=0,ks=null,ft=null,$h=0,Ti=1/0,cn=null,Ba=!1,Dc=null,qn=null,Go=!1,bn=null,$a=0,xs=0,Mc=null,da=-1,pa=0;function lt(){return le&6?Pe():da!==-1?da:da=Pe()}function Hn(t){return t.mode&1?le&2&&Ge!==0?Ge&-Ge:gE.transition!==null?(pa===0&&(pa=Mg()),pa):(t=ce,t!==0||(t=window.event,t=t===void 0?16:zg(t.type)),t):1}function Bt(t,e,n,r){if(50<xs)throw xs=0,Mc=null,Error(F(185));lo(t,n,r),(!(le&2)||t!==qe)&&(t===qe&&(!(le&2)&&(vl|=n),Fe===4&&On(t,Ge)),gt(t,r),n===1&&le===0&&!(e.mode&1)&&(Ti=Pe()+500,ml&&lr()))}function gt(t,e){var n=t.callbackNode;gw(t,e);var r=Ca(t,t===qe?Ge:0);if(r===0)n!==null&&Ud(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ud(n),e===1)t.tag===0?mE(Np.bind(null,t)):oy(Np.bind(null,t)),hE(function(){!(le&6)&&lr()}),n=null;else{switch(Og(r)){case 1:n=mh;break;case 4:n=Ng;break;case 16:n=Aa;break;case 536870912:n=Dg;break;default:n=Aa}n=i_(n,Xy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xy(t,e){if(da=-1,pa=0,le&6)throw Error(F(327));var n=t.callbackNode;if(hi()&&t.callbackNode!==n)return null;var r=Ca(t,t===qe?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qa(t,r);else{e=r;var i=le;le|=2;var s=Zy();(qe!==t||Ge!==e)&&(cn=null,Ti=Pe()+500,Sr(t,e));do try{LE();break}catch(l){Jy(t,l)}while(!0);kh(),za.current=s,le=i,De!==null?e=0:(qe=null,Ge=0,e=Fe)}if(e!==0){if(e===2&&(i=ac(t),i!==0&&(r=i,e=Oc(t,i))),e===1)throw n=Xs,Sr(t,0),On(t,r),gt(t,Pe()),n;if(e===6)On(t,r);else{if(i=t.current.alternate,!(r&30)&&!ME(i)&&(e=qa(t,r),e===2&&(s=ac(t),s!==0&&(r=s,e=Oc(t,s))),e===1))throw n=Xs,Sr(t,0),On(t,r),gt(t,Pe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:yr(t,ft,cn);break;case 3:if(On(t,r),(r&130023424)===r&&(e=$h+500-Pe(),10<e)){if(Ca(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mc(yr.bind(null,t,ft,cn),e);break}yr(t,ft,cn);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-zt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DE(r/1960))-r,10<r){t.timeoutHandle=mc(yr.bind(null,t,ft,cn),r);break}yr(t,ft,cn);break;case 5:yr(t,ft,cn);break;default:throw Error(F(329))}}}return gt(t,Pe()),t.callbackNode===n?Xy.bind(null,t):null}function Oc(t,e){var n=ks;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=qa(t,e),t!==2&&(e=ft,ft=n,e!==null&&Lc(e)),t}function Lc(t){ft===null?ft=t:ft.push.apply(ft,t)}function ME(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Bh,e&=~vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function Np(t){if(le&6)throw Error(F(327));hi();var e=Ca(t,0);if(!(e&1))return gt(t,Pe()),null;var n=qa(t,e);if(t.tag!==0&&n===2){var r=ac(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=Xs,Sr(t,0),On(t,e),gt(t,Pe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yr(t,ft,cn),gt(t,Pe()),null}function qh(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ti=Pe()+500,ml&&lr())}}function xr(t){bn!==null&&bn.tag===0&&!(le&6)&&hi();var e=le;le|=1;var n=Vt.transition,r=ce;try{if(Vt.transition=null,ce=1,t)return t()}finally{ce=r,Vt.transition=n,le=e,!(le&6)&&lr()}}function Hh(){wt=si.current,Ee(si)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cE(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(Ah(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Va();break;case 3:wi(),Ee(pt),Ee(rt),Mh();break;case 5:Dh(r);break;case 4:wi();break;case 13:Ee(Se);break;case 19:Ee(Se);break;case 10:xh(r.type._context);break;case 22:case 23:Hh()}n=n.return}if(qe=t,De=t=Wn(t.current,null),Ge=wt=e,Fe=0,Xs=null,Bh=vl=kr=0,ft=ks=null,wr!==null){for(e=0;e<wr.length;e++)if(n=wr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}wr=null}return t}function Jy(t,e){do{var n=De;try{if(kh(),ca.current=Ua,ja){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ja=!1}if(Rr=0,Be=be=Ie=null,Cs=!1,Gs=0,zh.current=null,n===null||n.return===null){Fe=1,Xs=e,De=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=Ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var y=d.alternate;y?(d.updateQueue=y.updateQueue,d.memoizedState=y.memoizedState,d.lanes=y.lanes):(d.updateQueue=null,d.memoizedState=null)}var C=vp(a);if(C!==null){C.flags&=-257,wp(C,a,l,s,e),C.mode&1&&_p(s,h,e),e=C,c=h;var x=e.updateQueue;if(x===null){var V=new Set;V.add(c),e.updateQueue=V}else x.add(c);break e}else{if(!(e&1)){_p(s,h,e),Wh();break e}c=Error(F(426))}}else if(Te&&l.mode&1){var b=vp(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),wp(b,a,l,s,e),Ch(Ei(c,l));break e}}s=c=Ei(c,l),Fe!==4&&(Fe=2),ks===null?ks=[s]:ks.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=Oy(s,c,e);fp(s,I);break e;case 1:l=c;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(qn===null||!qn.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Ly(s,l,e);fp(s,M);break e}}s=s.return}while(s!==null)}t_(n)}catch(U){e=U,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function Zy(){var t=za.current;return za.current=Ua,t===null?Ua:t}function Wh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||!(kr&268435455)&&!(vl&268435455)||On(qe,Ge)}function qa(t,e){var n=le;le|=2;var r=Zy();(qe!==t||Ge!==e)&&(cn=null,Sr(t,e));do try{OE();break}catch(i){Jy(t,i)}while(!0);if(kh(),le=n,za.current=r,De!==null)throw Error(F(261));return qe=null,Ge=0,Fe}function OE(){for(;De!==null;)e_(De)}function LE(){for(;De!==null&&!aw();)e_(De)}function e_(t){var e=r_(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?t_(t):De=e,zh.current=null}function t_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xE(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,De=null;return}}else if(n=kE(n,e,wt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Fe===0&&(Fe=5)}function yr(t,e,n){var r=ce,i=Vt.transition;try{Vt.transition=null,ce=1,bE(t,e,n,r)}finally{Vt.transition=i,ce=r}return null}function bE(t,e,n,r){do hi();while(bn!==null);if(le&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yw(t,s),t===qe&&(De=qe=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Go||(Go=!0,i_(Aa,function(){return hi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vt.transition,Vt.transition=null;var a=ce;ce=1;var l=le;le|=4,zh.current=null,VE(t,n),Ky(n,t),rE(dc),Ra=!!fc,dc=fc=null,t.current=n,NE(n),lw(),le=l,ce=a,Vt.transition=s}else t.current=n;if(Go&&(Go=!1,bn=t,$a=i),s=t.pendingLanes,s===0&&(qn=null),hw(n.stateNode),gt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ba)throw Ba=!1,t=Dc,Dc=null,t;return $a&1&&t.tag!==0&&hi(),s=t.pendingLanes,s&1?t===Mc?xs++:(xs=0,Mc=t):xs=0,lr(),null}function hi(){if(bn!==null){var t=Og($a),e=Vt.transition,n=ce;try{if(Vt.transition=null,ce=16>t?16:t,bn===null)var r=!1;else{if(t=bn,bn=null,$a=0,le&6)throw Error(F(331));var i=le;for(le|=4,W=t.current;W!==null;){var s=W,a=s.child;if(W.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(W=h;W!==null;){var d=W;switch(d.tag){case 0:case 11:case 15:Rs(8,d,s)}var m=d.child;if(m!==null)m.return=d,W=m;else for(;W!==null;){d=W;var y=d.sibling,C=d.return;if(Wy(d),d===h){W=null;break}if(y!==null){y.return=C,W=y;break}W=C}}}var x=s.alternate;if(x!==null){var V=x.child;if(V!==null){x.child=null;do{var b=V.sibling;V.sibling=null,V=b}while(V!==null)}}W=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,W=a;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rs(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,W=I;break e}W=s.return}}var w=t.current;for(W=w;W!==null;){a=W;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,W=A;else e:for(a=w;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_l(9,l)}}catch(U){ke(l,l.return,U)}if(l===a){W=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,W=M;break e}W=l.return}}if(le=i,lr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(cl,t)}catch{}r=!0}return r}finally{ce=n,Vt.transition=e}}return!1}function Dp(t,e,n){e=Ei(n,e),e=Oy(t,e,1),t=$n(t,e,1),e=lt(),t!==null&&(lo(t,1,e),gt(t,e))}function ke(t,e,n){if(t.tag===3)Dp(t,t,n);else for(;e!==null;){if(e.tag===3){Dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){t=Ei(n,t),t=Ly(e,t,1),e=$n(e,t,1),t=lt(),e!==null&&(lo(e,1,t),gt(e,t));break}}e=e.return}}function FE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ge&n)===n&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>Pe()-$h?Sr(t,0):Bh|=n),gt(t,e)}function n_(t,e){e===0&&(t.mode&1?(e=Fo,Fo<<=1,!(Fo&130023424)&&(Fo=4194304)):e=1);var n=lt();t=_n(t,e),t!==null&&(lo(t,e,n),gt(t,n))}function jE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n_(t,n)}function UE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),n_(t,n)}var r_;r_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,RE(t,e,n);dt=!!(t.flags&131072)}else dt=!1,Te&&e.flags&1048576&&ay(e,Ma,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fa(t,e),t=e.pendingProps;var i=yi(e,rt.current);ci(e,n),i=Lh(null,e,r,t,i,n);var s=bh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(s=!0,Na(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vh(e),i.updater=yl,e.stateNode=i,i._reactInternals=e,Tc(e,r,t,n),e=Ac(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Ih(e),at(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=BE(r),t=bt(r,t),i){case 0:e=Ic(null,e,r,t,n);break e;case 1:e=Sp(null,e,r,t,n);break e;case 11:e=Ep(null,e,r,t,n);break e;case 14:e=Tp(null,e,r,bt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Ic(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Sp(t,e,r,i,n);case 3:e:{if(Uy(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dy(t,e),ba(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ei(Error(F(423)),e),e=Ip(t,e,r,n,i);break e}else if(r!==i){i=Ei(Error(F(424)),e),e=Ip(t,e,r,n,i);break e}else for(Et=Bn(e.stateNode.containerInfo.firstChild),Tt=e,Te=!0,jt=null,n=hy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_i(),r===i){e=vn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return py(e),t===null&&vc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,pc(r,i)?a=null:s!==null&&pc(r,s)&&(e.flags|=32),jy(t,e),at(t,e,a,n),e.child;case 6:return t===null&&vc(e),null;case 13:return zy(t,e,n);case 4:return Nh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vi(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),Ep(t,e,r,i,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ge(Oa,r._currentValue),r._currentValue=a,s!==null)if($t(s.value,a)){if(s.children===i.children&&!pt.current){e=vn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=pn(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),wc(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),wc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}at(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ci(e,n),i=Nt(i),r=r(i),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,i=bt(r,e.pendingProps),i=bt(r.type,i),Tp(t,e,r,i,n);case 15:return by(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bt(r,i),fa(t,e),e.tag=1,mt(r)?(t=!0,Na(e)):t=!1,ci(e,n),My(e,r,i),Tc(e,r,i,n),Ac(null,e,r,!0,t,n);case 19:return By(t,e,n);case 22:return Fy(t,e,n)}throw Error(F(156,e.tag))};function i_(t,e){return Vg(t,e)}function zE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new zE(t,e,n,r)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BE(t){if(typeof t=="function")return Qh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fh)return 11;if(t===dh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ma(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Qh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Kr:return Ir(n.children,i,s,e);case hh:a=8,i|=8;break;case Wu:return t=Pt(12,n,e,i|2),t.elementType=Wu,t.lanes=s,t;case Qu:return t=Pt(13,n,e,i),t.elementType=Qu,t.lanes=s,t;case Gu:return t=Pt(19,n,e,i),t.elementType=Gu,t.lanes=s,t;case pg:return wl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fg:a=10;break e;case dg:a=9;break e;case fh:a=11;break e;case dh:a=14;break e;case Nn:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ir(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function wl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=pg,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function xu(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $E(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uu(0),this.expirationTimes=uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gh(t,e,n,r,i,s,a,l,c){return t=new $E(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(s),t}function qE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s_(t){if(!t)return Zn;t=t._reactInternals;e:{if(Dr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(mt(n))return sy(t,n,e)}return e}function o_(t,e,n,r,i,s,a,l,c){return t=Gh(n,r,!0,t,i,s,a,l,c),t.context=s_(null),n=t.current,r=lt(),i=Hn(n),s=pn(r,i),s.callback=e??null,$n(n,s,i),t.current.lanes=i,lo(t,i,r),gt(t,r),t}function El(t,e,n,r){var i=e.current,s=lt(),a=Hn(i);return n=s_(n),e.context===null?e.context=n:e.pendingContext=n,e=pn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$n(i,e,a),t!==null&&(Bt(t,i,a,s),ua(t,i,a)),a}function Ha(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kh(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function HE(){return null}var a_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yh(t){this._internalRoot=t}Tl.prototype.render=Yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));El(t,e,null,null)};Tl.prototype.unmount=Yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xr(function(){El(null,t,null,null)}),e[yn]=null}};function Tl(t){this._internalRoot=t}Tl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mn.length&&e!==0&&e<Mn[n].priority;n++);Mn.splice(n,0,t),n===0&&Ug(t)}};function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Op(){}function WE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Ha(a);s.call(h)}}var a=o_(e,r,t,0,null,!1,!1,"",Op);return t._reactRootContainer=a,t[yn]=a.current,$s(t.nodeType===8?t.parentNode:t),xr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Ha(c);l.call(h)}}var c=Gh(t,0,!1,null,null,!1,!1,"",Op);return t._reactRootContainer=c,t[yn]=c.current,$s(t.nodeType===8?t.parentNode:t),xr(function(){El(e,c,n,r)}),c}function Il(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=Ha(a);l.call(c)}}El(e,a,t,i)}else a=WE(n,e,t,i,r);return Ha(a)}Lg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gs(e.pendingLanes);n!==0&&(gh(e,n|1),gt(e,Pe()),!(le&6)&&(Ti=Pe()+500,lr()))}break;case 13:xr(function(){var r=_n(t,1);if(r!==null){var i=lt();Bt(r,t,1,i)}}),Kh(t,1)}};yh=function(t){if(t.tag===13){var e=_n(t,134217728);if(e!==null){var n=lt();Bt(e,t,134217728,n)}Kh(t,134217728)}};bg=function(t){if(t.tag===13){var e=Hn(t),n=_n(t,e);if(n!==null){var r=lt();Bt(n,t,e,r)}Kh(t,e)}};Fg=function(){return ce};jg=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};ic=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pl(r);if(!i)throw Error(F(90));gg(r),Xu(r,i)}}}break;case"textarea":_g(t,n);break;case"select":e=n.value,e!=null&&oi(t,!!n.multiple,e,!1)}};Ag=qh;Cg=xr;var QE={usingClientEntryPoint:!1,Events:[co,Zr,pl,Sg,Ig,qh]},cs={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GE={bundleType:cs.bundleType,version:cs.version,rendererPackageName:cs.rendererPackageName,rendererConfig:cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xg(t),t===null?null:t.stateNode},findFiberByHostInstance:cs.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{cl=Ko.inject(GE),Zt=Ko}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QE;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(e))throw Error(F(200));return qE(t,e,null,n)};It.createRoot=function(t,e){if(!Xh(t))throw Error(F(299));var n=!1,r="",i=a_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gh(t,1,!1,null,null,n,!1,r,i),t[yn]=e.current,$s(t.nodeType===8?t.parentNode:t),new Yh(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=xg(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return xr(t)};It.hydrate=function(t,e,n){if(!Sl(e))throw Error(F(200));return Il(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!Xh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=a_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=o_(e,null,t,1,n??null,i,!1,s,a),t[yn]=e.current,$s(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tl(e)};It.render=function(t,e,n){if(!Sl(e))throw Error(F(200));return Il(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!Sl(t))throw Error(F(40));return t._reactRootContainer?(xr(function(){Il(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};It.unstable_batchedUpdates=qh;It.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Il(t,e,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function l_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l_)}catch(t){console.error(t)}}l_(),lg.exports=It;var KE=lg.exports,Lp=KE;qu.createRoot=Lp.createRoot,qu.hydrateRoot=Lp.hydrateRoot;const Pu=[{id:1,question:"How many trees are there in the Amazon rainforest?",answer:39e10,source:"Nature journal, 2013",hint:"It's the world's largest tropical rainforest"},{id:2,question:"How many piano tuners are there in Chicago?",answer:290,source:"Classic Fermi problem estimate",hint:"Think about pianos per household, tunings per year..."},{id:3,question:"How many golf balls can fit in a school bus?",answer:5e5,source:"Volume calculation estimate",hint:"Consider the volume of each"},{id:4,question:"How many Google searches happen per day?",answer:85e8,source:"Google statistics, 2023",hint:"Think about global internet users"},{id:5,question:"How many heartbeats does a human have in a lifetime?",answer:25e8,source:"Medical estimates for ~75 year lifespan",hint:"Consider beats per minute and minutes in a life"},{id:6,question:"How many stars are in the Milky Way galaxy?",answer:2e11,source:"NASA estimates",hint:"Our galaxy is pretty big"},{id:7,question:"How many breaths does an average person take per year?",answer:79e5,source:"Medical estimates",hint:"About 12-20 breaths per minute at rest"},{id:8,question:"How many commercial flights take off worldwide each day?",answer:1e5,source:"IATA statistics",hint:"Think about major airports and their schedules"},{id:9,question:"How many cells are in the human body?",answer:37e12,source:"PNAS, 2023 - Human cell count study",hint:"We're made of a lot of tiny building blocks"},{id:10,question:"How many neurons are in the human brain?",answer:86e9,source:"Azevedo et al., Journal of Comparative Neurology, 2009",hint:"It was thought to be 100 billion for decades"},{id:11,question:"How many red blood cells are in the human body?",answer:25e12,source:"Wikipedia / Medical literature",hint:"They make up about 70% of all cells by number"},{id:12,question:"How many new red blood cells does your body make per second?",answer:24e5,source:"Texas Heart Institute",hint:"Your bone marrow is always busy"},{id:13,question:"How many bacteria live in the human gut?",answer:38e12,source:"Sender et al., PLoS Biology, 2016",hint:"More than the number of human cells"},{id:14,question:"How many synapses (neural connections) are in the human brain?",answer:1e14,source:"Harvard Medical School",hint:"Each neuron can connect to thousands of others"},{id:15,question:"How many emails are sent worldwide per day?",answer:36e10,source:"Radicati Group / Statista, 2024",hint:"Including spam, it's a lot"},{id:16,question:"How many internet users are there worldwide?",answer:552e7,source:"Statista, October 2024",hint:"About two-thirds of the global population"},{id:17,question:"How many social media users are there worldwide?",answer:522e7,source:"DataReportal / Statista, October 2024",hint:"Nearly as many as internet users"},{id:18,question:"How many YouTube videos are watched per day?",answer:5e9,source:"YouTube statistics, 2023",hint:"It's the second largest search engine"},{id:19,question:"How many iPhone apps are on the App Store?",answer:18e5,source:"Apple App Store statistics, 2024",hint:"There's an app for almost everything"},{id:20,question:"How many grains of sand are on Earth's beaches?",answer:75e17,source:"University of Hawaii researchers / NPR",hint:"Think quintillions, not billions"},{id:21,question:"How many ants are on Earth?",answer:2e16,source:"PNAS study, 2022",hint:"About 2.5 million ants for every human"},{id:22,question:"How many species have been identified on Earth?",answer:21e5,source:"IUCN / Catalogue of Life, 2024",hint:"And millions more remain undiscovered"},{id:23,question:"What is Earth's circumference in kilometres?",answer:40075,source:"NASA",hint:"Eratosthenes estimated this in 240 BCE"},{id:24,question:"How many earthquakes occur worldwide per year?",answer:5e5,source:"USGS",hint:"Most are too small to feel"},{id:25,question:"How many galaxies are in the observable universe?",answer:2e11,source:"NASA / Hubble observations",hint:"Each with billions of stars"},{id:26,question:"How far is the Moon from Earth in kilometres?",answer:384400,source:"NASA",hint:"You could fit all the planets in between"},{id:27,question:"How far is the Sun from Earth in kilometres?",answer:15e7,source:"NASA (1 AU)",hint:"Light takes about 8 minutes to travel this"},{id:28,question:"How many humans have ever walked on the Moon?",answer:12,source:"NASA Apollo program records",hint:"All between 1969 and 1972"},{id:29,question:"What is the current world population?",answer:82e8,source:"UN World Population Prospects, 2024",hint:"Passed 8 billion in late 2022"},{id:30,question:"How many babies are born worldwide each day?",answer:385e3,source:"UN Population Division / Worldometer",hint:"About 4-5 per second"},{id:31,question:"How many people are forcibly displaced worldwide?",answer:123e6,source:"UNHCR Global Trends, 2024",hint:"Due to conflict, persecution, and violence"},{id:32,question:"How many cars are produced worldwide per year?",answer:85e6,source:"OICA (International Organization of Motor Vehicle Manufacturers), 2023",hint:"China produces about a third of them"},{id:33,question:"How many books have been published in all of human history?",answer:13e7,source:"Google Books estimate",hint:"Google tried to count them all"},{id:34,question:"How many songs are on Spotify?",answer:1e8,source:"Spotify statistics, 2024",hint:"We do love spotify"},{id:35,question:"How many chickens are on Earth?",answer:34e9,source:"FAO (UN Food and Agriculture Organization)",hint:"About 4 chickens per human"},{id:36,question:"How many cups of coffee are consumed worldwide per day?",answer:225e7,source:"International Coffee Organization",hint:"That's a lot of caffeine"},{id:37,question:"How many atoms are in a grain of sand?",answer:5e19,source:"Physics calculations (assuming SiO2, ~1mm grain)",hint:"It's a lot of atoms"},{id:38,question:"What is the speed of light in metres per second?",answer:299792458,source:"NIST / SI definition",hint:"It's the speed of light"}],YE=()=>{};var bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,d=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,C=h&63;c||(C=64,a||(y=64)),r.push(n[d],n[m],n[y],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new JE;const y=s<<2|l>>4;if(r.push(y),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const x=h<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZE=function(t){const e=u_(t);return c_.encodeByteArray(e,!0)},Wa=function(t){return ZE(t).replace(/\./g,"")},e1=function(t){try{return c_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=()=>t1().__FIREBASE_DEFAULTS__,r1=()=>{if(typeof process>"u"||typeof bp>"u")return;const t=bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&e1(t[1]);return e&&JSON.parse(e)},Jh=()=>{try{return YE()||n1()||r1()||i1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s1=t=>{var e,n;return(n=(e=Jh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},o1=t=>{const e=s1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},h_=()=>{var t;return(t=Jh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Wa(JSON.stringify(n)),Wa(JSON.stringify(a)),""].join(".")}const Ps={};function c1(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ps))Ps[e]?t.emulator.push(e):t.prod.push(e);return t}function h1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fp=!1;function f1(t,e){if(typeof window>"u"||typeof document>"u"||!Zh(window.location.host)||Ps[t]===e||Ps[t]||Fp)return;Ps[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=c1().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,C){y.setAttribute("width","24"),y.setAttribute("id",C),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Fp=!0,a()},y}function d(y,C){y.setAttribute("id",C),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=h1(r),C=n("text"),x=document.getElementById(C)||document.createElement("span"),V=n("learnmore"),b=document.getElementById(V)||document.createElement("a"),I=n("preprendIcon"),w=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const A=y.element;l(A),d(b,V);const M=h();c(w,I),A.append(w,x,b,M),document.body.appendChild(A)}s?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p1(){var e;const t=(e=Jh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m1(){return!p1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function g1(){try{return typeof indexedDB=="object"}catch{return!1}}function y1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="FirebaseError";class Di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_1,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f_.prototype.create)}}class f_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?v1(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Di(i,l,r)}}function v1(t,e){return t.replace(w1,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w1=/\{\$([^}]+)}/g;function Qa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(jp(s)&&jp(a)){if(!Qa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return t&&t._delegate?t._delegate:t}class Js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new a1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S1(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T1(t){return t===_r?void 0:t}function S1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new E1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const A1={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},C1=oe.INFO,R1={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},k1=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=R1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d_{constructor(e){this.name=e,this._logLevel=C1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const x1=(t,e)=>e.some(n=>t instanceof n);let Up,zp;function P1(){return Up||(Up=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V1(){return zp||(zp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p_=new WeakMap,bc=new WeakMap,m_=new WeakMap,Vu=new WeakMap,ef=new WeakMap;function N1(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Qn(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&p_.set(n,t)}).catch(()=>{}),ef.set(e,t),e}function D1(t){if(bc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});bc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M1(t){Fc=t(Fc)}function O1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nu(this),e,...n);return m_.set(r,e.sort?e.sort():[e]),Qn(r)}:V1().includes(t)?function(...e){return t.apply(Nu(this),e),Qn(p_.get(this))}:function(...e){return Qn(t.apply(Nu(this),e))}}function L1(t){return typeof t=="function"?O1(t):(t instanceof IDBTransaction&&D1(t),x1(t,P1())?new Proxy(t,Fc):t)}function Qn(t){if(t instanceof IDBRequest)return N1(t);if(Vu.has(t))return Vu.get(t);const e=L1(t);return e!==t&&(Vu.set(t,e),ef.set(e,t)),e}const Nu=t=>ef.get(t);function b1(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Qn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Qn(a.result),c.oldVersion,c.newVersion,Qn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const F1=["get","getKey","getAll","getAllKeys","count"],j1=["put","add","delete","clear"],Du=new Map;function Bp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Du.get(e))return Du.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=j1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||F1.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return Du.set(e,s),s}M1(t=>({...t,get:(e,n,r)=>Bp(e,n)||t.get(e,n,r),has:(e,n)=>!!Bp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function z1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jc="@firebase/app",$p="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new d_("@firebase/app"),B1="@firebase/app-compat",$1="@firebase/analytics-compat",q1="@firebase/analytics",H1="@firebase/app-check-compat",W1="@firebase/app-check",Q1="@firebase/auth",G1="@firebase/auth-compat",K1="@firebase/database",Y1="@firebase/data-connect",X1="@firebase/database-compat",J1="@firebase/functions",Z1="@firebase/functions-compat",eT="@firebase/installations",tT="@firebase/installations-compat",nT="@firebase/messaging",rT="@firebase/messaging-compat",iT="@firebase/performance",sT="@firebase/performance-compat",oT="@firebase/remote-config",aT="@firebase/remote-config-compat",lT="@firebase/storage",uT="@firebase/storage-compat",cT="@firebase/firestore",hT="@firebase/ai",fT="@firebase/firestore-compat",dT="firebase",pT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="[DEFAULT]",mT={[jc]:"fire-core",[B1]:"fire-core-compat",[q1]:"fire-analytics",[$1]:"fire-analytics-compat",[W1]:"fire-app-check",[H1]:"fire-app-check-compat",[Q1]:"fire-auth",[G1]:"fire-auth-compat",[K1]:"fire-rtdb",[Y1]:"fire-data-connect",[X1]:"fire-rtdb-compat",[J1]:"fire-fn",[Z1]:"fire-fn-compat",[eT]:"fire-iid",[tT]:"fire-iid-compat",[nT]:"fire-fcm",[rT]:"fire-fcm-compat",[iT]:"fire-perf",[sT]:"fire-perf-compat",[oT]:"fire-rc",[aT]:"fire-rc-compat",[lT]:"fire-gcs",[uT]:"fire-gcs-compat",[cT]:"fire-fst",[fT]:"fire-fst-compat",[hT]:"fire-vertex","fire-js":"fire-js",[dT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=new Map,gT=new Map,zc=new Map;function qp(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ka(t){const e=t.name;if(zc.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;zc.set(e,t);for(const n of Ga.values())qp(n,t);for(const n of gT.values())qp(n,t);return!0}function yT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _T(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new f_("app","Firebase",vT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=pT;function g_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Uc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(n||(n=h_()),!n)throw Gn.create("no-options");const s=Ga.get(i);if(s){if(Qa(n,s.options)&&Qa(r,s.config))return s;throw Gn.create("duplicate-app",{appName:i})}const a=new I1(i);for(const c of zc.values())a.addComponent(c);const l=new wT(n,r,a);return Ga.set(i,l),l}function TT(t=Uc){const e=Ga.get(t);if(!e&&t===Uc&&h_())return g_();if(!e)throw Gn.create("no-app",{appName:t});return e}function fi(t,e,n){let r=mT[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(a.join(" "));return}Ka(new Js(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebase-heartbeat-database",IT=1,Zs="firebase-heartbeat-store";let Mu=null;function y_(){return Mu||(Mu=b1(ST,IT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),Mu}async function AT(t){try{const n=(await y_()).transaction(Zs),r=await n.objectStore(Zs).get(__(t));return await n.done,r}catch(e){if(e instanceof Di)wn.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function Hp(t,e){try{const r=(await y_()).transaction(Zs,"readwrite");await r.objectStore(Zs).put(e,__(t)),await r.done}catch(n){if(n instanceof Di)wn.warn(n.message);else{const r=Gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function __(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=1024,RT=30;class kT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>RT){const a=VT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wp(),{heartbeatsToSend:r,unsentEntries:i}=xT(this._heartbeatsCache.heartbeats),s=Wa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wn.warn(n),""}}}function Wp(){return new Date().toISOString().substring(0,10)}function xT(t,e=CT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Qp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g1()?y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qp(t){return Wa(JSON.stringify({version:2,heartbeats:t})).length}function VT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t){Ka(new Js("platform-logger",e=>new U1(e),"PRIVATE")),Ka(new Js("heartbeat",e=>new kT(e),"PRIVATE")),fi(jc,$p,t),fi(jc,$p,"esm2020"),fi("fire-js","")}NT("");var DT="firebase",MT="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(DT,MT,"app");var Gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kn,v_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,g){function v(){}v.prototype=g.prototype,_.F=g.prototype,_.prototype=new v,_.prototype.constructor=_,_.D=function(E,S,R){for(var T=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)T[Ve-2]=arguments[Ve];return g.prototype[S].apply(E,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,g,v){v||(v=0);const E=Array(16);if(typeof g=="string")for(var S=0;S<16;++S)E[S]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(S=0;S<16;++S)E[S]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=_.g[0],v=_.g[1],S=_.g[2];let R=_.g[3],T;T=g+(R^v&(S^R))+E[0]+3614090360&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(S^g&(v^S))+E[1]+3905402710&4294967295,R=g+(T<<12&4294967295|T>>>20),T=S+(v^R&(g^v))+E[2]+606105819&4294967295,S=R+(T<<17&4294967295|T>>>15),T=v+(g^S&(R^g))+E[3]+3250441966&4294967295,v=S+(T<<22&4294967295|T>>>10),T=g+(R^v&(S^R))+E[4]+4118548399&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(S^g&(v^S))+E[5]+1200080426&4294967295,R=g+(T<<12&4294967295|T>>>20),T=S+(v^R&(g^v))+E[6]+2821735955&4294967295,S=R+(T<<17&4294967295|T>>>15),T=v+(g^S&(R^g))+E[7]+4249261313&4294967295,v=S+(T<<22&4294967295|T>>>10),T=g+(R^v&(S^R))+E[8]+1770035416&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(S^g&(v^S))+E[9]+2336552879&4294967295,R=g+(T<<12&4294967295|T>>>20),T=S+(v^R&(g^v))+E[10]+4294925233&4294967295,S=R+(T<<17&4294967295|T>>>15),T=v+(g^S&(R^g))+E[11]+2304563134&4294967295,v=S+(T<<22&4294967295|T>>>10),T=g+(R^v&(S^R))+E[12]+1804603682&4294967295,g=v+(T<<7&4294967295|T>>>25),T=R+(S^g&(v^S))+E[13]+4254626195&4294967295,R=g+(T<<12&4294967295|T>>>20),T=S+(v^R&(g^v))+E[14]+2792965006&4294967295,S=R+(T<<17&4294967295|T>>>15),T=v+(g^S&(R^g))+E[15]+1236535329&4294967295,v=S+(T<<22&4294967295|T>>>10),T=g+(S^R&(v^S))+E[1]+4129170786&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^S&(g^v))+E[6]+3225465664&4294967295,R=g+(T<<9&4294967295|T>>>23),T=S+(g^v&(R^g))+E[11]+643717713&4294967295,S=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(S^R))+E[0]+3921069994&4294967295,v=S+(T<<20&4294967295|T>>>12),T=g+(S^R&(v^S))+E[5]+3593408605&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^S&(g^v))+E[10]+38016083&4294967295,R=g+(T<<9&4294967295|T>>>23),T=S+(g^v&(R^g))+E[15]+3634488961&4294967295,S=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(S^R))+E[4]+3889429448&4294967295,v=S+(T<<20&4294967295|T>>>12),T=g+(S^R&(v^S))+E[9]+568446438&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^S&(g^v))+E[14]+3275163606&4294967295,R=g+(T<<9&4294967295|T>>>23),T=S+(g^v&(R^g))+E[3]+4107603335&4294967295,S=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(S^R))+E[8]+1163531501&4294967295,v=S+(T<<20&4294967295|T>>>12),T=g+(S^R&(v^S))+E[13]+2850285829&4294967295,g=v+(T<<5&4294967295|T>>>27),T=R+(v^S&(g^v))+E[2]+4243563512&4294967295,R=g+(T<<9&4294967295|T>>>23),T=S+(g^v&(R^g))+E[7]+1735328473&4294967295,S=R+(T<<14&4294967295|T>>>18),T=v+(R^g&(S^R))+E[12]+2368359562&4294967295,v=S+(T<<20&4294967295|T>>>12),T=g+(v^S^R)+E[5]+4294588738&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^S)+E[8]+2272392833&4294967295,R=g+(T<<11&4294967295|T>>>21),T=S+(R^g^v)+E[11]+1839030562&4294967295,S=R+(T<<16&4294967295|T>>>16),T=v+(S^R^g)+E[14]+4259657740&4294967295,v=S+(T<<23&4294967295|T>>>9),T=g+(v^S^R)+E[1]+2763975236&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^S)+E[4]+1272893353&4294967295,R=g+(T<<11&4294967295|T>>>21),T=S+(R^g^v)+E[7]+4139469664&4294967295,S=R+(T<<16&4294967295|T>>>16),T=v+(S^R^g)+E[10]+3200236656&4294967295,v=S+(T<<23&4294967295|T>>>9),T=g+(v^S^R)+E[13]+681279174&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^S)+E[0]+3936430074&4294967295,R=g+(T<<11&4294967295|T>>>21),T=S+(R^g^v)+E[3]+3572445317&4294967295,S=R+(T<<16&4294967295|T>>>16),T=v+(S^R^g)+E[6]+76029189&4294967295,v=S+(T<<23&4294967295|T>>>9),T=g+(v^S^R)+E[9]+3654602809&4294967295,g=v+(T<<4&4294967295|T>>>28),T=R+(g^v^S)+E[12]+3873151461&4294967295,R=g+(T<<11&4294967295|T>>>21),T=S+(R^g^v)+E[15]+530742520&4294967295,S=R+(T<<16&4294967295|T>>>16),T=v+(S^R^g)+E[2]+3299628645&4294967295,v=S+(T<<23&4294967295|T>>>9),T=g+(S^(v|~R))+E[0]+4096336452&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~S))+E[7]+1126891415&4294967295,R=g+(T<<10&4294967295|T>>>22),T=S+(g^(R|~v))+E[14]+2878612391&4294967295,S=R+(T<<15&4294967295|T>>>17),T=v+(R^(S|~g))+E[5]+4237533241&4294967295,v=S+(T<<21&4294967295|T>>>11),T=g+(S^(v|~R))+E[12]+1700485571&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~S))+E[3]+2399980690&4294967295,R=g+(T<<10&4294967295|T>>>22),T=S+(g^(R|~v))+E[10]+4293915773&4294967295,S=R+(T<<15&4294967295|T>>>17),T=v+(R^(S|~g))+E[1]+2240044497&4294967295,v=S+(T<<21&4294967295|T>>>11),T=g+(S^(v|~R))+E[8]+1873313359&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~S))+E[15]+4264355552&4294967295,R=g+(T<<10&4294967295|T>>>22),T=S+(g^(R|~v))+E[6]+2734768916&4294967295,S=R+(T<<15&4294967295|T>>>17),T=v+(R^(S|~g))+E[13]+1309151649&4294967295,v=S+(T<<21&4294967295|T>>>11),T=g+(S^(v|~R))+E[4]+4149444226&4294967295,g=v+(T<<6&4294967295|T>>>26),T=R+(v^(g|~S))+E[11]+3174756917&4294967295,R=g+(T<<10&4294967295|T>>>22),T=S+(g^(R|~v))+E[2]+718787259&4294967295,S=R+(T<<15&4294967295|T>>>17),T=v+(R^(S|~g))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+g&4294967295,_.g[1]=_.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,_.g[2]=_.g[2]+S&4294967295,_.g[3]=_.g[3]+R&4294967295}r.prototype.v=function(_,g){g===void 0&&(g=_.length);const v=g-this.blockSize,E=this.C;let S=this.h,R=0;for(;R<g;){if(S==0)for(;R<=v;)i(this,_,R),R+=this.blockSize;if(typeof _=="string"){for(;R<g;)if(E[S++]=_.charCodeAt(R++),S==this.blockSize){i(this,E),S=0;break}}else for(;R<g;)if(E[S++]=_[R++],S==this.blockSize){i(this,E),S=0;break}}this.h=S,this.o+=g},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var g=1;g<_.length-8;++g)_[g]=0;g=this.o*8;for(var v=_.length-8;v<_.length;++v)_[v]=g&255,g/=256;for(this.v(_),_=Array(16),g=0,v=0;v<4;++v)for(let E=0;E<32;E+=8)_[g++]=this.g[v]>>>E&255;return _};function s(_,g){var v=l;return Object.prototype.hasOwnProperty.call(v,_)?v[_]:v[_]=g(_)}function a(_,g){this.h=g;const v=[];let E=!0;for(let S=_.length-1;S>=0;S--){const R=_[S]|0;E&&R==g||(v[S]=R,E=!1)}this.g=v}var l={};function c(_){return-128<=_&&_<128?s(_,function(g){return new a([g|0],g<0?-1:0)}):new a([_|0],_<0?-1:0)}function h(_){if(isNaN(_)||!isFinite(_))return m;if(_<0)return b(h(-_));const g=[];let v=1;for(let E=0;_>=v;E++)g[E]=_/v|0,v*=4294967296;return new a(g,0)}function d(_,g){if(_.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(_.charAt(0)=="-")return b(d(_.substring(1),g));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=h(Math.pow(g,8));let E=m;for(let R=0;R<_.length;R+=8){var S=Math.min(8,_.length-R);const T=parseInt(_.substring(R,R+S),g);S<8?(S=h(Math.pow(g,S)),E=E.j(S).add(h(T))):(E=E.j(v),E=E.add(h(T)))}return E}var m=c(0),y=c(1),C=c(16777216);t=a.prototype,t.m=function(){if(V(this))return-b(this).m();let _=0,g=1;for(let v=0;v<this.g.length;v++){const E=this.i(v);_+=(E>=0?E:4294967296+E)*g,g*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(x(this))return"0";if(V(this))return"-"+b(this).toString(_);const g=h(Math.pow(_,6));var v=this;let E="";for(;;){const S=M(v,g).g;v=I(v,S.j(g));let R=((v.g.length>0?v.g[0]:v.h)>>>0).toString(_);if(v=S,x(v))return R+E;for(;R.length<6;)R="0"+R;E=R+E}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function x(_){if(_.h!=0)return!1;for(let g=0;g<_.g.length;g++)if(_.g[g]!=0)return!1;return!0}function V(_){return _.h==-1}t.l=function(_){return _=I(this,_),V(_)?-1:x(_)?0:1};function b(_){const g=_.g.length,v=[];for(let E=0;E<g;E++)v[E]=~_.g[E];return new a(v,~_.h).add(y)}t.abs=function(){return V(this)?b(this):this},t.add=function(_){const g=Math.max(this.g.length,_.g.length),v=[];let E=0;for(let S=0;S<=g;S++){let R=E+(this.i(S)&65535)+(_.i(S)&65535),T=(R>>>16)+(this.i(S)>>>16)+(_.i(S)>>>16);E=T>>>16,R&=65535,T&=65535,v[S]=T<<16|R}return new a(v,v[v.length-1]&-2147483648?-1:0)};function I(_,g){return _.add(b(g))}t.j=function(_){if(x(this)||x(_))return m;if(V(this))return V(_)?b(this).j(b(_)):b(b(this).j(_));if(V(_))return b(this.j(b(_)));if(this.l(C)<0&&_.l(C)<0)return h(this.m()*_.m());const g=this.g.length+_.g.length,v=[];for(var E=0;E<2*g;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(let S=0;S<_.g.length;S++){const R=this.i(E)>>>16,T=this.i(E)&65535,Ve=_.i(S)>>>16,Mt=_.i(S)&65535;v[2*E+2*S]+=T*Mt,w(v,2*E+2*S),v[2*E+2*S+1]+=R*Mt,w(v,2*E+2*S+1),v[2*E+2*S+1]+=T*Ve,w(v,2*E+2*S+1),v[2*E+2*S+2]+=R*Ve,w(v,2*E+2*S+2)}for(_=0;_<g;_++)v[_]=v[2*_+1]<<16|v[2*_];for(_=g;_<2*g;_++)v[_]=0;return new a(v,0)};function w(_,g){for(;(_[g]&65535)!=_[g];)_[g+1]+=_[g]>>>16,_[g]&=65535,g++}function A(_,g){this.g=_,this.h=g}function M(_,g){if(x(g))throw Error("division by zero");if(x(_))return new A(m,m);if(V(_))return g=M(b(_),g),new A(b(g.g),b(g.h));if(V(g))return g=M(_,b(g)),new A(b(g.g),g.h);if(_.g.length>30){if(V(_)||V(g))throw Error("slowDivide_ only works with positive integers.");for(var v=y,E=g;E.l(_)<=0;)v=U(v),E=U(E);var S=z(v,1),R=z(E,1);for(E=z(E,2),v=z(v,2);!x(E);){var T=R.add(E);T.l(_)<=0&&(S=S.add(v),R=T),E=z(E,1),v=z(v,1)}return g=I(_,S.j(g)),new A(S,g)}for(S=m;_.l(g)>=0;){for(v=Math.max(1,Math.floor(_.m()/g.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),R=h(v),T=R.j(g);V(T)||T.l(_)>0;)v-=E,R=h(v),T=R.j(g);x(R)&&(R=y),S=S.add(R),_=I(_,T)}return new A(S,_)}t.B=function(_){return M(this,_).h},t.and=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let E=0;E<g;E++)v[E]=this.i(E)&_.i(E);return new a(v,this.h&_.h)},t.or=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let E=0;E<g;E++)v[E]=this.i(E)|_.i(E);return new a(v,this.h|_.h)},t.xor=function(_){const g=Math.max(this.g.length,_.g.length),v=[];for(let E=0;E<g;E++)v[E]=this.i(E)^_.i(E);return new a(v,this.h^_.h)};function U(_){const g=_.g.length+1,v=[];for(let E=0;E<g;E++)v[E]=_.i(E)<<1|_.i(E-1)>>>31;return new a(v,_.h)}function z(_,g){const v=g>>5;g%=32;const E=_.g.length-v,S=[];for(let R=0;R<E;R++)S[R]=g>0?_.i(R+v)>>>g|_.i(R+v+1)<<32-g:_.i(R+v);return new a(S,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,v_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Kn=a}).apply(typeof Gp<"u"?Gp:typeof self<"u"?self:typeof window<"u"?window:{});var Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w_,_s,E_,ga,Bc,T_,S_,I_;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yo=="object"&&Yo];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(o,u){if(u)e:{var f=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var k=o[p];if(!(k in f))break e;f=f[k]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&e(f,o,{configurable:!0,writable:!0,value:u})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(u){var f=[],p;for(p in u)Object.prototype.hasOwnProperty.call(u,p)&&f.push([p,u[p]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,f){return o.call.apply(o.bind,arguments)}function h(o,u,f){return h=c,h.apply(null,arguments)}function d(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,u){function f(){}f.prototype=u.prototype,o.Z=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(p,k,P){for(var j=Array(arguments.length-2),te=2;te<arguments.length;te++)j[te-2]=arguments[te];return u.prototype[k].apply(p,j)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function C(o){const u=o.length;if(u>0){const f=Array(u);for(let p=0;p<u;p++)f[p]=o[p];return f}return[]}function x(o,u){for(let p=1;p<arguments.length;p++){const k=arguments[p];var f=typeof k;if(f=f!="object"?f:k?Array.isArray(k)?"array":f:"null",f=="array"||f=="object"&&typeof k.length=="number"){f=o.length||0;const P=k.length||0;o.length=f+P;for(let j=0;j<P;j++)o[f+j]=k[j]}else o.push(k)}}class V{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function b(o){a.setTimeout(()=>{throw o},0)}function I(){var o=_;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class w{constructor(){this.h=this.g=null}add(u,f){const p=A.get();p.set(u,f),this.h?this.h.next=p:this.g=p,this.h=p}}var A=new V(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let U,z=!1,_=new w,g=()=>{const o=Promise.resolve(void 0);U=()=>{o.then(v)}};function v(){for(var o;o=I();){try{o.h.call(o.g)}catch(f){b(f)}var u=A;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}z=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,u),a.removeEventListener("test",f,u)}catch{}return o}();function T(o){return/^[\s\xa0]*$/.test(o)}function Ve(o,u){S.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}m(Ve,S),Ve.prototype.init=function(o,u){const f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Mt="closure_listenable_"+(Math.random()*1e6|0),cr=0;function an(o,u,f,p,k){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.ha=k,this.key=++cr,this.da=this.fa=!1}function B(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Y(o,u,f){for(const p in o)u.call(f,o[p],p,o)}function J(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function fe(o){const u={};for(const f in o)u[f]=o[f];return u}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(o,u){let f,p;for(let k=1;k<arguments.length;k++){p=arguments[k];for(f in p)o[f]=p[f];for(let P=0;P<de.length;P++)f=de[P],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function it(o){this.src=o,this.g={},this.h=0}it.prototype.add=function(o,u,f,p,k){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const j=st(o,u,p,k);return j>-1?(u=o[j],f||(u.fa=!1)):(u=new an(u,this.src,P,!!p,k),u.fa=f,o.push(u)),u};function Ot(o,u){const f=u.type;if(f in o.g){var p=o.g[f],k=Array.prototype.indexOf.call(p,u,void 0),P;(P=k>=0)&&Array.prototype.splice.call(p,k,1),P&&(B(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function st(o,u,f,p){for(let k=0;k<o.length;++k){const P=o[k];if(!P.da&&P.listener==u&&P.capture==!!f&&P.ha==p)return k}return-1}var Ht="closure_lm_"+(Math.random()*1e6|0),ji={};function _o(o,u,f,p,k){if(Array.isArray(u)){for(let P=0;P<u.length;P++)_o(o,u[P],f,p,k);return null}return f=pe(f),o&&o[Mt]?o.J(u,f,l(p)?!!p.capture:!1,k):vo(o,u,f,!1,p,k)}function vo(o,u,f,p,k,P){if(!u)throw Error("Invalid event type");const j=l(k)?!!k.capture:!!k;let te=q(o);if(te||(o[Ht]=te=new it(o)),f=te.add(u,f,p,j,P),f.proxy)return f;if(p=Ul(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)R||(k=j),k===void 0&&(k=!1),o.addEventListener(u.toString(),p,k);else if(o.attachEvent)o.attachEvent(Eo(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ul(){function o(f){return u.call(o.src,o.listener,f)}const u=Wt;return o}function wo(o,u,f,p,k){if(Array.isArray(u))for(var P=0;P<u.length;P++)wo(o,u[P],f,p,k);else p=l(p)?!!p.capture:!!p,f=pe(f),o&&o[Mt]?(o=o.i,P=String(u).toString(),P in o.g&&(u=o.g[P],f=st(u,f,p,k),f>-1&&(B(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete o.g[P],o.h--)))):o&&(o=q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=st(u,f,p,k)),(f=o>-1?u[o]:null)&&Fr(f))}function Fr(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Mt])Ot(u.i,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(Eo(f),p):u.addListener&&u.removeListener&&u.removeListener(p),(f=q(u))?(Ot(f,o),f.h==0&&(f.src=null,u[Ht]=null)):B(o)}}}function Eo(o){return o in ji?ji[o]:ji[o]="on"+o}function Wt(o,u){if(o.da)o=!0;else{u=new Ve(u,this);const f=o.listener,p=o.ha||o.src;o.fa&&Fr(o),o=f.call(p,u)}return o}function q(o){return o=o[Ht],o instanceof it?o:null}var G="__closure_events_fn_"+(Math.random()*1e9>>>0);function pe(o){return typeof o=="function"?o:(o[G]||(o[G]=function(u){return o.handleEvent(u)}),o[G])}function ae(){E.call(this),this.i=new it(this),this.M=this,this.G=null}m(ae,E),ae.prototype[Mt]=!0,ae.prototype.removeEventListener=function(o,u,f,p){wo(this,o,u,f,p)};function ee(o,u){var f,p=o.G;if(p)for(f=[];p;p=p.G)f.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new S(u,o);else if(u instanceof S)u.target=u.target||o;else{var k=u;u=new S(p,o),yt(u,k)}k=!0;let P,j;if(f)for(j=f.length-1;j>=0;j--)P=u.g=f[j],k=ln(P,p,!0,u)&&k;if(P=u.g=o,k=ln(P,p,!0,u)&&k,k=ln(P,p,!1,u)&&k,f)for(j=0;j<f.length;j++)P=u.g=f[j],k=ln(P,p,!1,u)&&k}ae.prototype.N=function(){if(ae.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const f=o.g[u];for(let p=0;p<f.length;p++)B(f[p]);delete o.g[u],o.h--}}this.G=null},ae.prototype.J=function(o,u,f,p){return this.i.add(String(o),u,!1,f,p)},ae.prototype.K=function(o,u,f,p){return this.i.add(String(o),u,!0,f,p)};function ln(o,u,f,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let k=!0;for(let P=0;P<u.length;++P){const j=u[P];if(j&&!j.da&&j.capture==f){const te=j.listener,Le=j.ha||j.src;j.fa&&Ot(o.i,j),k=te.call(Le,p)!==!1&&k}}return k&&!p.defaultPrevented}function In(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Ui(o){o.g=In(()=>{o.g=null,o.i&&(o.i=!1,Ui(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class _t extends E{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zi(o){E.call(this),this.h=o,this.g={}}m(zi,E);var Of=[];function Lf(o){Y(o.g,function(u,f){this.g.hasOwnProperty(f)&&Fr(u)},o),o.g={}}zi.prototype.N=function(){zi.Z.N.call(this),Lf(this)},zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zl=a.JSON.stringify,Zv=a.JSON.parse,e0=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function bf(){}function Ff(){}var Bi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bl(){S.call(this,"d")}m(Bl,S);function $l(){S.call(this,"c")}m($l,S);var hr={},jf=null;function To(){return jf=jf||new ae}hr.Ia="serverreachability";function Uf(o){S.call(this,hr.Ia,o)}m(Uf,S);function $i(o){const u=To();ee(u,new Uf(u))}hr.STAT_EVENT="statevent";function zf(o,u){S.call(this,hr.STAT_EVENT,o),this.stat=u}m(zf,S);function ot(o){const u=To();ee(u,new zf(u,o))}hr.Ja="timingevent";function Bf(o,u){S.call(this,hr.Ja,o),this.size=u}m(Bf,S);function qi(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function t0(o,u,f,p,k,P){o.info(function(){if(o.g)if(P){var j="",te=P.split("&");for(let he=0;he<te.length;he++){var Le=te[he].split("=");if(Le.length>1){const Ue=Le[0];Le=Le[1];const Gt=Ue.split("_");j=Gt.length>=2&&Gt[1]=="type"?j+(Ue+"="+Le+"&"):j+(Ue+"=redacted&")}}}else j=null;else j=P;return"XMLHTTP REQ ("+p+") [attempt "+k+"]: "+u+`
`+f+`
`+j})}function n0(o,u,f,p,k,P,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+k+"]: "+u+`
`+f+`
`+P+" "+j})}function jr(o,u,f,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+i0(o,f)+(p?" "+p:"")})}function r0(o,u){o.info(function(){return"TIMEOUT: "+u})}Hi.prototype.info=function(){};function i0(o,u){if(!o.g)return u;if(!u)return null;try{const P=JSON.parse(u);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var f=P[o];if(!(f.length<2)){var p=f[1];if(Array.isArray(p)&&!(p.length<1)){var k=p[0];if(k!="noop"&&k!="stop"&&k!="close")for(let j=1;j<p.length;j++)p[j]=""}}}}return zl(P)}catch{return u}}var So={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$f={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qf;function ql(){}m(ql,bf),ql.prototype.g=function(){return new XMLHttpRequest},qf=new ql;function Wi(o){return encodeURIComponent(String(o))}function s0(o){var u=1;o=o.split(":");const f=[];for(;u>0&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function An(o,u,f,p){this.j=o,this.i=u,this.l=f,this.S=p||1,this.V=new zi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hf}function Hf(){this.i=null,this.g="",this.h=!1}var Wf={},Hl={};function Wl(o,u,f){o.M=1,o.A=Ao(Qt(u)),o.u=f,o.R=!0,Qf(o,null)}function Qf(o,u){o.F=Date.now(),Io(o),o.B=Qt(o.A);var f=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),od(f.i,"t",p),o.C=0,f=o.j.L,o.h=new Hf,o.g=Id(o.j,f?u:null,!o.u),o.P>0&&(o.O=new _t(h(o.Y,o,o.g),o.P)),u=o.V,f=o.g,p=o.ba;var k="readystatechange";Array.isArray(k)||(k&&(Of[0]=k.toString()),k=Of);for(let P=0;P<k.length;P++){const j=_o(f,k[P],p||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=o.J?fe(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),$i(),t0(o.i,o.v,o.B,o.l,o.S,o.u)}An.prototype.ba=function(o){o=o.target;const u=this.O;u&&kn(o)==3?u.j():this.Y(o)},An.prototype.Y=function(o){try{if(o==this.g)e:{const te=kn(this.g),Le=this.g.ya(),he=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||dd(this.g)))){this.K||te!=4||Le==7||(Le==8||he<=0?$i(3):$i(2)),Ql(this);var u=this.g.ca();this.X=u;var f=o0(this);if(this.o=u==200,n0(this.i,this.v,this.B,this.l,this.S,te,u),this.o){if(this.U&&!this.L){t:{if(this.g){var p,k=this.g;if((p=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(p)){var P=p;break t}}P=null}if(o=P)jr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gl(this,o);else{this.o=!1,this.m=3,ot(12),fr(this),Qi(this);break e}}if(this.R){o=!0;let Ue;for(;!this.K&&this.C<f.length;)if(Ue=a0(this,f),Ue==Hl){te==4&&(this.m=4,ot(14),o=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Wf){this.m=4,ot(15),jr(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else jr(this.i,this.l,Ue,null),Gl(this,Ue);if(Gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||f.length!=0||this.h.h||(this.m=1,ot(16),o=!1),this.o=this.o&&o,!o)jr(this.i,this.l,f,"[Invalid Chunked Response]"),fr(this),Qi(this);else if(f.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),nu(j),j.P=!0,ot(11))}}else jr(this.i,this.l,f,null),Gl(this,f);te==4&&fr(this),this.o&&!this.K&&(te==4?wd(this.j,this):(this.o=!1,Io(this)))}else E0(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),fr(this),Qi(this)}}}catch{}finally{}};function o0(o){if(!Gf(o))return o.g.la();const u=dd(o.g);if(u==="")return"";let f="";const p=u.length,k=kn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return fr(o),Qi(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<p;P++)o.h.h=!0,f+=o.h.i.decode(u[P],{stream:!(k&&P==p-1)});return u.length=0,o.h.g+=f,o.C=0,o.h.g}function Gf(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function a0(o,u){var f=o.C,p=u.indexOf(`
`,f);return p==-1?Hl:(f=Number(u.substring(f,p)),isNaN(f)?Wf:(p+=1,p+f>u.length?Hl:(u=u.slice(p,p+f),o.C=p+f,u)))}An.prototype.cancel=function(){this.K=!0,fr(this)};function Io(o){o.T=Date.now()+o.H,Kf(o,o.H)}function Kf(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=qi(h(o.aa,o),u)}function Ql(o){o.D&&(a.clearTimeout(o.D),o.D=null)}An.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(r0(this.i,this.B),this.M!=2&&($i(),ot(17)),fr(this),this.m=2,Qi(this)):Kf(this,this.T-o)};function Qi(o){o.j.I==0||o.K||wd(o.j,o)}function fr(o){Ql(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Lf(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function Gl(o,u){try{var f=o.j;if(f.I!=0&&(f.g==o||Kl(f.h,o))){if(!o.L&&Kl(f.h,o)&&f.I==3){try{var p=f.Ba.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var k=p;if(k[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Po(f),ko(f);else break e;tu(f),ot(18)}}else f.xa=k[1],0<f.xa-f.K&&k[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=qi(h(f.Va,f),6e3));Jf(f.h)<=1&&f.ta&&(f.ta=void 0)}else pr(f,11)}else if((o.L||f.g==o)&&Po(f),!T(u))for(k=f.Ba.g.parse(u),u=0;u<k.length;u++){let he=k[u];const Ue=he[0];if(!(Ue<=f.K))if(f.K=Ue,he=he[1],f.I==2)if(he[0]=="c"){f.M=he[1],f.ba=he[2];const Gt=he[3];Gt!=null&&(f.ka=Gt,f.j.info("VER="+f.ka));const mr=he[4];mr!=null&&(f.za=mr,f.j.info("SVER="+f.za));const xn=he[5];xn!=null&&typeof xn=="number"&&xn>0&&(p=1.5*xn,f.O=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const Pn=o.g;if(Pn){const No=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(No){var P=p.h;P.g||No.indexOf("spdy")==-1&&No.indexOf("quic")==-1&&No.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Yl(P,P.h),P.h=null))}if(p.G){const ru=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;ru&&(p.wa=ru,ye(p.J,p.G,ru))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),p=f;var j=o;if(p.na=Sd(p,p.L?p.ba:null,p.W),j.L){Zf(p.h,j);var te=j,Le=p.O;Le&&(te.H=Le),te.D&&(Ql(te),Io(te)),p.g=j}else _d(p);f.i.length>0&&xo(f)}else he[0]!="stop"&&he[0]!="close"||pr(f,7);else f.I==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?pr(f,7):eu(f):he[0]!="noop"&&f.l&&f.l.qa(he),f.A=0)}}$i(4)}catch{}}var l0=class{constructor(o,u){this.g=o,this.map=u}};function Yf(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Jf(o){return o.h?1:o.g?o.g.size:0}function Kl(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Yl(o,u){o.g?o.g.add(u):o.h=u}function Zf(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Yf.prototype.cancel=function(){if(this.i=ed(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ed(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.G);return u}return C(o.i)}var td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u0(o,u){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const p=o[f].indexOf("=");let k,P=null;p>=0?(k=o[f].substring(0,p),P=o[f].substring(p+1)):k=o[f],u(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Cn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof Cn?(this.l=o.l,Gi(this,o.j),this.o=o.o,this.g=o.g,Ki(this,o.u),this.h=o.h,Xl(this,ad(o.i)),this.m=o.m):o&&(u=String(o).match(td))?(this.l=!1,Gi(this,u[1]||"",!0),this.o=Yi(u[2]||""),this.g=Yi(u[3]||"",!0),Ki(this,u[4]),this.h=Yi(u[5]||"",!0),Xl(this,u[6]||"",!0),this.m=Yi(u[7]||"")):(this.l=!1,this.i=new Ji(null,this.l))}Cn.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(Xi(u,nd,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Xi(u,nd,!0),"@"),o.push(Wi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Xi(f,f.charAt(0)=="/"?f0:h0,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Xi(f,p0)),o.join("")},Cn.prototype.resolve=function(o){const u=Qt(this);let f=!!o.j;f?Gi(u,o.j):f=!!o.o,f?u.o=o.o:f=!!o.g,f?u.g=o.g:f=o.u!=null;var p=o.h;if(f)Ki(u,o.u);else if(f=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var k=u.h.lastIndexOf("/");k!=-1&&(p=u.h.slice(0,k+1)+p)}if(k=p,k==".."||k==".")p="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){p=k.lastIndexOf("/",0)==0,k=k.split("/");const P=[];for(let j=0;j<k.length;){const te=k[j++];te=="."?p&&j==k.length&&P.push(""):te==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),p&&j==k.length&&P.push("")):(P.push(te),p=!0)}p=P.join("/")}else p=k}return f?u.h=p:f=o.i.toString()!=="",f?Xl(u,ad(o.i)):f=!!o.m,f&&(u.m=o.m),u};function Qt(o){return new Cn(o)}function Gi(o,u,f){o.j=f?Yi(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ki(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function Xl(o,u,f){u instanceof Ji?(o.i=u,m0(o.i,o.l)):(f||(u=Xi(u,d0)),o.i=new Ji(u,o.l))}function ye(o,u,f){o.i.set(u,f)}function Ao(o){return ye(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Yi(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xi(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,c0),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function c0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var nd=/[#\/\?@]/g,h0=/[#\?:]/g,f0=/[#\?]/g,d0=/[#\?@]/g,p0=/#/g;function Ji(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function dr(o){o.g||(o.g=new Map,o.h=0,o.i&&u0(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=Ji.prototype,t.add=function(o,u){dr(this),this.i=null,o=Ur(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function rd(o,u){dr(o),u=Ur(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function id(o,u){return dr(o),u=Ur(o,u),o.g.has(u)}t.forEach=function(o,u){dr(this),this.g.forEach(function(f,p){f.forEach(function(k){o.call(u,k,p,this)},this)},this)};function sd(o,u){dr(o);let f=[];if(typeof u=="string")id(o,u)&&(f=f.concat(o.g.get(Ur(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)f=f.concat(o[u]);return f}t.set=function(o,u){return dr(this),this.i=null,o=Ur(this,o),id(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=sd(this,o),o.length>0?String(o[0]):u):u};function od(o,u,f){rd(o,u),f.length>0&&(o.i=null,o.g.set(Ur(o,u),C(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let p=0;p<u.length;p++){var f=u[p];const k=Wi(f);f=sd(this,f);for(let P=0;P<f.length;P++){let j=k;f[P]!==""&&(j+="="+Wi(f[P])),o.push(j)}}return this.i=o.join("&")};function ad(o){const u=new Ji;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Ur(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function m0(o,u){u&&!o.j&&(dr(o),o.i=null,o.g.forEach(function(f,p){const k=p.toLowerCase();p!=k&&(rd(this,p),od(this,k,f))},o)),o.j=u}function g0(o,u){const f=new Hi;if(a.Image){const p=new Image;p.onload=d(Rn,f,"TestLoadImage: loaded",!0,u,p),p.onerror=d(Rn,f,"TestLoadImage: error",!1,u,p),p.onabort=d(Rn,f,"TestLoadImage: abort",!1,u,p),p.ontimeout=d(Rn,f,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function y0(o,u){const f=new Hi,p=new AbortController,k=setTimeout(()=>{p.abort(),Rn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(P=>{clearTimeout(k),P.ok?Rn(f,"TestPingServer: ok",!0,u):Rn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(k),Rn(f,"TestPingServer: error",!1,u)})}function Rn(o,u,f,p,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),p(f)}catch{}}function _0(){this.g=new e0}function Jl(o){this.i=o.Sb||null,this.h=o.ab||!1}m(Jl,bf),Jl.prototype.g=function(){return new Co(this.i,this.h)};function Co(o,u){ae.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Co,ae),t=Co.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,es(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zi(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ld(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function ld(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Zi(this):es(this),this.readyState==3&&ld(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,Zi(this))},t.Na=function(o){this.g&&(this.response=o,Zi(this))},t.ga=function(){this.g&&Zi(this)};function Zi(o){o.readyState=4,o.l=null,o.j=null,o.B=null,es(o)}t.setRequestHeader=function(o,u){this.A.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function es(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ud(o){let u="";return Y(o,function(f,p){u+=p,u+=":",u+=f,u+=`\r
`}),u}function Zl(o,u,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=ud(f),typeof o=="string"?f!=null&&Wi(f):ye(o,u,f))}function Re(o){ae.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Re,ae);var v0=/^https?$/i,w0=["POST","PUT"];t=Re.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,u,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qf.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){cd(this,P);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var k in p)f.set(k,p[k]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const P of p.keys())f.set(P,p.get(P));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),k=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(w0,u,void 0)>=0)||p||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,j]of f)this.g.setRequestHeader(P,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){cd(this,P)}};function cd(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,hd(o),Ro(o)}function hd(o){o.A||(o.A=!0,ee(o,"complete"),ee(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,ee(this,"complete"),ee(this,"abort"),Ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ro(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fd(this):this.Xa())},t.Xa=function(){fd(this)};function fd(o){if(o.h&&typeof s<"u"){if(o.v&&kn(o)==4)setTimeout(o.Ca.bind(o),0);else if(ee(o,"readystatechange"),kn(o)==4){o.h=!1;try{const P=o.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var p;if(p=P===0){let j=String(o.D).match(td)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),p=!v0.test(j?j.toLowerCase():"")}f=p}if(f)ee(o,"complete"),ee(o,"success");else{o.o=6;try{var k=kn(o)>2?o.g.statusText:""}catch{k=""}o.l=k+" ["+o.ca()+"]",hd(o)}}finally{Ro(o)}}}}function Ro(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,u||ee(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function kn(o){return o.g?o.g.readyState:0}t.ca=function(){try{return kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Zv(u)}};function dd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function E0(o){const u={};o=(o.g&&kn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var f=s0(o[p]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=u[k]||[];u[k]=P,P.push(f)}J(u,function(p){return p.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function pd(o){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,o),this.Za=ts("retryDelaySeedMs",1e4,o),this.Ta=ts("forwardChannelMaxRetries",2,o),this.va=ts("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Yf(o&&o.concurrentRequestLimit),this.Ba=new _0,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pd.prototype,t.ka=8,t.I=1,t.connect=function(o,u,f,p){ot(0),this.W=o,this.H=u||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.J=Sd(this,null,this.W),xo(this)};function eu(o){if(md(o),o.I==3){var u=o.V++,f=Qt(o.J);if(ye(f,"SID",o.M),ye(f,"RID",u),ye(f,"TYPE","terminate"),ns(o,f),u=new An(o,o.j,u),u.M=2,u.A=Ao(Qt(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=u.A,f=!0),f||(u.g=Id(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Io(u)}Td(o)}function ko(o){o.g&&(nu(o),o.g.cancel(),o.g=null)}function md(o){ko(o),o.v&&(a.clearTimeout(o.v),o.v=null),Po(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function xo(o){if(!Xf(o.h)&&!o.m){o.m=!0;var u=o.Ea;U||g(),z||(U(),z=!0),_.add(u,o),o.D=0}}function T0(o,u){return Jf(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=qi(h(o.Ea,o,u),Ed(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const k=new An(this,this.j,o);let P=this.o;if(this.U&&(P?(P=fe(P),yt(P,this.U)):P=this.U),this.u!==null||this.R||(k.J=P,P=null),this.S)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,u>4096){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=yd(this,k,u),f=Qt(this.J),ye(f,"RID",o),ye(f,"CVER",22),this.G&&ye(f,"X-HTTP-Session-Id",this.G),ns(this,f),P&&(this.R?u="headers="+Wi(ud(P))+"&"+u:this.u&&Zl(f,this.u,P)),Yl(this.h,k),this.Ra&&ye(f,"TYPE","init"),this.S?(ye(f,"$req",u),ye(f,"SID","null"),k.U=!0,Wl(k,f,null)):Wl(k,f,u),this.I=2}}else this.I==3&&(o?gd(this,o):this.i.length==0||Xf(this.h)||gd(this))};function gd(o,u){var f;u?f=u.l:f=o.V++;const p=Qt(o.J);ye(p,"SID",o.M),ye(p,"RID",f),ye(p,"AID",o.K),ns(o,p),o.u&&o.o&&Zl(p,o.u,o.o),f=new An(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),u&&(o.i=u.G.concat(o.i)),u=yd(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Yl(o.h,f),Wl(f,p,u)}function ns(o,u){o.H&&Y(o.H,function(f,p){ye(u,p,f)}),o.l&&Y({},function(f,p){ye(u,p,f)})}function yd(o,u,f){f=Math.min(o.i.length,f);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var k=o.i;let te=-1;for(;;){const Le=["count="+f];te==-1?f>0?(te=k[0].g,Le.push("ofs="+te)):te=0:Le.push("ofs="+te);let he=!0;for(let Ue=0;Ue<f;Ue++){var P=k[Ue].g;const Gt=k[Ue].map;if(P-=te,P<0)te=Math.max(0,k[Ue].g-100),he=!1;else try{P="req"+P+"_"||"";try{var j=Gt instanceof Map?Gt:Object.entries(Gt);for(const[mr,xn]of j){let Pn=xn;l(xn)&&(Pn=zl(xn)),Le.push(P+mr+"="+encodeURIComponent(Pn))}}catch(mr){throw Le.push(P+"type="+encodeURIComponent("_badmap")),mr}}catch{p&&p(Gt)}}if(he){j=Le.join("&");break e}}j=void 0}return o=o.i.splice(0,f),u.G=o,j}function _d(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;U||g(),z||(U(),z=!0),_.add(u,o),o.A=0}}function tu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=qi(h(o.Da,o),Ed(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=qi(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),ko(this),vd(this))};function nu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function vd(o){o.g=new An(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=Qt(o.na);ye(u,"RID","rpc"),ye(u,"SID",o.M),ye(u,"AID",o.K),ye(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&ye(u,"TO",o.ia),ye(u,"TYPE","xmlhttp"),ns(o,u),o.u&&o.o&&Zl(u,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=Ao(Qt(u)),f.u=null,f.R=!0,Qf(f,o)}t.Va=function(){this.C!=null&&(this.C=null,ko(this),tu(this),ot(19))};function Po(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function wd(o,u){var f=null;if(o.g==u){Po(o),nu(o),o.g=null;var p=2}else if(Kl(o.h,u))f=u.G,Zf(o.h,u),p=1;else return;if(o.I!=0){if(u.o)if(p==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var k=o.D;p=To(),ee(p,new Bf(p,f)),xo(o)}else _d(o);else if(k=u.m,k==3||k==0&&u.X>0||!(p==1&&T0(o,u)||p==2&&tu(o)))switch(f&&f.length>0&&(u=o.h,u.i=u.i.concat(f)),k){case 1:pr(o,5);break;case 4:pr(o,10);break;case 3:pr(o,6);break;default:pr(o,2)}}}function Ed(o,u){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*u}function pr(o,u){if(o.j.info("Error code "+u),u==2){var f=h(o.bb,o),p=o.Ua;const k=!p;p=new Cn(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gi(p,"https"),Ao(p),k?g0(p.toString(),f):y0(p.toString(),f)}else ot(2);o.I=0,o.l&&o.l.pa(u),Td(o),md(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Td(o){if(o.I=0,o.ja=[],o.l){const u=ed(o.h);(u.length!=0||o.i.length!=0)&&(x(o.ja,u),x(o.ja,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.oa()}}function Sd(o,u,f){var p=f instanceof Cn?Qt(f):new Cn(f);if(p.g!="")u&&(p.g=u+"."+p.g),Ki(p,p.u);else{var k=a.location;p=k.protocol,u=u?u+"."+k.hostname:k.hostname,k=+k.port;const P=new Cn(null);p&&Gi(P,p),u&&(P.g=u),k&&Ki(P,k),f&&(P.h=f),p=P}return f=o.G,u=o.wa,f&&u&&ye(p,f,u),ye(p,"VER",o.ka),ns(o,p),p}function Id(o,u,f){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Re(new Jl({ab:f})):new Re(o.ma),u.Fa(o.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ad(){}t=Ad.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Vo(){}Vo.prototype.g=function(o,u){return new vt(o,u)};function vt(o,u){ae.call(this),this.g=new pd(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!T(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new zr(this)}m(vt,ae),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){eu(this.g)},vt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=zl(o),o=f);u.i.push(new l0(u.Ya++,o)),u.I==3&&xo(u)},vt.prototype.N=function(){this.g.l=null,delete this.j,eu(this.g),delete this.g,vt.Z.N.call(this)};function Cd(o){Bl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const f in u){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}m(Cd,Bl);function Rd(){$l.call(this),this.status=1}m(Rd,$l);function zr(o){this.g=o}m(zr,Ad),zr.prototype.ra=function(){ee(this.g,"a")},zr.prototype.qa=function(o){ee(this.g,new Cd(o))},zr.prototype.pa=function(o){ee(this.g,new Rd)},zr.prototype.oa=function(){ee(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,I_=function(){return new Vo},S_=function(){return To()},T_=hr,Bc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,ga=So,$f.COMPLETE="complete",E_=$f,Ff.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",ae.prototype.listen=ae.prototype.J,_s=Ff,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,w_=Re}).apply(typeof Yo<"u"?Yo:typeof self<"u"?self:typeof window<"u"?window:{});const Kp="@firebase/firestore",Yp="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new d_("@firebase/firestore");function qr(){return Pr.logLevel}function H(t,...e){if(Pr.logLevel<=oe.DEBUG){const n=e.map(tf);Pr.debug(`Firestore (${Mi}): ${t}`,...n)}}function En(t,...e){if(Pr.logLevel<=oe.ERROR){const n=e.map(tf);Pr.error(`Firestore (${Mi}): ${t}`,...n)}}function Ii(t,...e){if(Pr.logLevel<=oe.WARN){const n=e.map(tf);Pr.warn(`Firestore (${Mi}): ${t}`,...n)}}function tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,A_(t,r,n)}function A_(t,e,n){let r=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw En(r),new Error(r)}function ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||A_(e,i,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(et.UNAUTHENTICATED))}shutdown(){}}class LT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bT{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string",31837,{l:r}),new C_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string",2055,{h:e}),new et(e)}}class FT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new FT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_T(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ue(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function $c(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ou(i)===Ou(s)?re(i,s):Ou(i)?1:-1}return re(t.length,e.length)}const BT=55296,$T=57343;function Ou(t){const e=t.charCodeAt(0);return e>=BT&&e<=$T}function Ai(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="__name__";class Xt{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Xt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return re(e.length,n.length)}static compareSegments(e,n){const r=Xt.isNumericId(e),i=Xt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xt.extractNumericId(e).compare(Xt.extractNumericId(n)):$c(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class me extends Xt{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const qT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Xt{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return qT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jp}static keyField(){return new Qe([Jp])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new $(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new $(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(me.fromString(e))}static fromName(e){return new Q(me.fromString(e).popFirst(5))}static empty(){return new Q(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(t,e,n){if(!n)throw new $(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HT(t,e,n,r){if(e===!0&&r===!0)throw new $(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zp(t){if(!Q.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function em(t){if(Q.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function k_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Al(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function Ya(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Al(t);throw new $(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WT(t,e){if(e<=0)throw new $(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e){const n={typeString:t};return e&&(n.value=e),n}function fo(t,e){if(!k_(t))throw new $(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new $(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=-62135596800,nm=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nm);return new we(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tm)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nm}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:we._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,we._jsonSchema))return new we(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:Oe("string",we._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new we(0,0))}static max(){return new X(new we(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=-1;function QT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new we(n+1,0):new we(n,r));return new er(i,Q.empty(),e)}function GT(t){return new er(t.readTime,t.key,eo)}class er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new er(X.min(),Q.empty(),eo)}static max(){return new er(X.max(),Q.empty(),eo)}}function KT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==YT)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(d=>{a[h]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function JT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Li(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=-1;function Rl(t){return t==null}function Xa(t){return t===0&&1/t==-1/0}function ZT(t){return typeof t=="number"&&Number.isInteger(t)&&!Xa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="";function eS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rm(e)),e=tS(t.get(n),e);return rm(e)}function tS(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case x_:n+="";break;default:n+=s}}return n}function rm(t){return t+x_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xo(this.root,e,this.comparator,!0)}}class Xo{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??We.EMPTY,this.right=s??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new We(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return We.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sm(this.data.getIterator())}getIteratorFrom(e){return new sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new je(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new V_("Invalid base64 string: "+s):s}}(e);return new Ye(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Ye(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const nS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(ue(!!t,39018),typeof t=="string"){let e=0;const n=nS.exec(t);if(ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nr(t){return typeof t=="string"?Ye.fromBase64String(t):Ye.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="server_timestamp",D_="__type__",M_="__previous_value__",O_="__local_write_time__";function sf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[D_])==null?void 0:r.stringValue)===N_}function kl(t){const e=t.mapValue.fields[M_];return sf(e)?kl(e):e}function to(t){const e=tr(t.mapValue.fields[O_].timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,i,s,a,l,c,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const Ja="(default)";class no{constructor(e,n){this.projectId=e,this.database=n||Ja}static empty(){return new no("","")}get isDefaultDatabase(){return this.database===Ja}isEqual(e){return e instanceof no&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="__type__",iS="__max__",Jo={mapValue:{}},b_="__vector__",Za="value";function rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sf(t)?4:oS(t)?9007199254740991:sS(t)?10:11:K(28295,{value:t})}function on(t,e){if(t===e)return!0;const n=rr(t);if(n!==rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return to(t).isEqual(to(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=tr(i.timestampValue),l=tr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return nr(i.bytesValue).isEqual(nr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xe(i.geoPointValue.latitude)===xe(s.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xe(i.integerValue)===xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xe(i.doubleValue),l=xe(s.doubleValue);return a===l?Xa(a)===Xa(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(im(a)!==im(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!on(a[c],l[c])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function ro(t,e){return(t.values||[]).find(n=>on(n,e))!==void 0}function Ci(t,e){if(t===e)return 0;const n=rr(t),r=rr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=xe(s.integerValue||s.doubleValue),c=xe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return om(t.timestampValue,e.timestampValue);case 4:return om(to(t),to(e));case 5:return $c(t.stringValue,e.stringValue);case 6:return function(s,a){const l=nr(s),c=nr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=re(l[h],c[h]);if(d!==0)return d}return re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=re(xe(s.latitude),xe(a.latitude));return l!==0?l:re(xe(s.longitude),xe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return am(t.arrayValue,e.arrayValue);case 10:return function(s,a){var y,C,x,V;const l=s.fields||{},c=a.fields||{},h=(y=l[Za])==null?void 0:y.arrayValue,d=(C=c[Za])==null?void 0:C.arrayValue,m=re(((x=h==null?void 0:h.values)==null?void 0:x.length)||0,((V=d==null?void 0:d.values)==null?void 0:V.length)||0);return m!==0?m:am(h,d)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Jo.mapValue&&a===Jo.mapValue)return 0;if(s===Jo.mapValue)return 1;if(a===Jo.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const y=$c(c[m],d[m]);if(y!==0)return y;const C=Ci(l[c[m]],h[d[m]]);if(C!==0)return C}return re(c.length,d.length)}(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function om(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=tr(t),r=tr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function am(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ci(n[i],r[i]);if(s)return s}return re(n.length,r.length)}function Ri(t){return qc(t)}function qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return nr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${qc(n.fields[a])}`;return i+"}"}(t.mapValue):K(61005,{value:t})}function ya(t){switch(rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kl(t);return e?16+ya(e):16;case 5:return 2*t.stringValue.length;case 6:return nr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ya(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Mr(r.fields,(s,a)=>{i+=s.length+ya(a)}),i}(t.mapValue);default:throw K(13486,{value:t})}}function lm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hc(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function um(t){return!!t&&"nullValue"in t}function cm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _a(t){return!!t&&"mapValue"in t}function sS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[L_])==null?void 0:r.stringValue)===b_}function Vs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vs(t.arrayValue.values[n]);return e}return{...t}}function oS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_a(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vs(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Vs(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_a(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_a(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new kt(Vs(this.value))}}function F_(t){const e=[];return Mr(t.fields,(n,r)=>{const i=new Qe([n]);if(_a(r)){const s=F_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new nt(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.position=e,this.inclusive=n}}function hm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(a.referenceValue),n.key):r=Ci(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!on(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n="asc"){this.field=e,this.dir=n}}function aS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{}class Me extends j_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uS(e,n,r):n==="array-contains"?new fS(e,r):n==="in"?new dS(e,r):n==="not-in"?new pS(e,r):n==="array-contains-any"?new mS(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cS(e,r):new hS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ci(n,this.value)):n!==null&&rr(this.value)===rr(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends j_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qt(e,n)}matches(e){return U_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function U_(t){return t.op==="and"}function z_(t){return lS(t)&&U_(t)}function lS(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function Wc(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Ri(t.value);if(z_(t))return t.filters.map(e=>Wc(e)).join(",");{const e=t.filters.map(n=>Wc(n)).join(",");return`${t.op}(${e})`}}function B_(t,e){return t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&on(r.value,i.value)}(t,e):t instanceof qt?function(r,i){return i instanceof qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&B_(a,i.filters[l]),!0):!1}(t,e):void K(19439)}function $_(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Ri(n.value)}`}(t):t instanceof qt?function(n){return n.op.toString()+" {"+n.getFilters().map($_).join(" ,")+"}"}(t):"Filter"}class uS extends Me{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class cS extends Me{constructor(e,n){super(e,"in",n),this.keys=q_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hS extends Me{constructor(e,n){super(e,"not-in",n),this.keys=q_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function q_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class fS extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&ro(n.arrayValue,this.value)}}class dS extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ro(this.value.arrayValue,n)}}class pS extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ro(this.value.arrayValue,n)}}class mS extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function dm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new gS(t,e,n,r,i,s,a)}function af(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Rl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ri(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ri(r)).join(",")),e.Te=n}return e.Te}function lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!B_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fm(t.startAt,e.startAt)&&fm(t.endAt,e.endAt)}function Qc(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yS(t,e,n,r,i,s,a,l){return new bi(t,e,n,r,i,s,a,l)}function H_(t){return new bi(t)}function pm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function W_(t){return t.collectionGroup!==null}function Ns(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new je(Qe.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new io(s,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new io(Qe.keyField(),r))}return e.Ie}function tn(t){const e=Z(t);return e.Ee||(e.Ee=_S(e,Ns(t))),e.Ee}function _S(t,e){if(t.limitType==="F")return dm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new io(i.field,s)});const n=t.endAt?new el(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new el(t.startAt.position,t.startAt.inclusive):null;return dm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gc(t,e){const n=t.filters.concat([e]);return new bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tl(t,e,n){return new bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xl(t,e){return lf(tn(t),tn(e))&&t.limitType===e.limitType}function Q_(t){return`${af(tn(t))}|lt:${t.limitType}`}function Hr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$_(i)).join(", ")}]`),Rl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ri(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ri(i)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function Pl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ns(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const h=hm(a,l,c);return a.inclusive?h<=0:h<0}(r.startAt,Ns(r),i)||r.endAt&&!function(a,l,c){const h=hm(a,l,c);return a.inclusive?h>=0:h>0}(r.endAt,Ns(r),i))}(t,e)}function vS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G_(t){return(e,n)=>{let r=!1;for(const i of Ns(t)){const s=wS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wS(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),h=l.data.field(s);return c!==null&&h!==null?Ci(c,h):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return P_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Ce(Q.comparator);function Tn(){return ES}const K_=new Ce(Q.comparator);function vs(...t){let e=K_;for(const n of t)e=e.insert(n.key,n);return e}function Y_(t){let e=K_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tr(){return Ds()}function X_(){return Ds()}function Ds(){return new Or(t=>t.toString(),(t,e)=>t.isEqual(e))}const TS=new Ce(Q.comparator),SS=new je(Q.comparator);function ie(...t){let e=SS;for(const n of t)e=e.add(n);return e}const IS=new je(re);function AS(){return IS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xa(e)?"-0":e}}function J_(t){return{integerValue:""+t}}function CS(t,e){return ZT(e)?J_(e):uf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this._=void 0}}function RS(t,e,n){return t instanceof nl?function(i,s){const a={fields:{[D_]:{stringValue:N_},[O_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sf(s)&&(s=kl(s)),s&&(a.fields[M_]=s),{mapValue:a}}(n,e):t instanceof so?ev(t,e):t instanceof oo?tv(t,e):function(i,s){const a=Z_(i,s),l=mm(a)+mm(i.Ae);return Hc(a)&&Hc(i.Ae)?J_(l):uf(i.serializer,l)}(t,e)}function kS(t,e,n){return t instanceof so?ev(t,e):t instanceof oo?tv(t,e):n}function Z_(t,e){return t instanceof rl?function(r){return Hc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nl extends Vl{}class so extends Vl{constructor(e){super(),this.elements=e}}function ev(t,e){const n=nv(e);for(const r of t.elements)n.some(i=>on(i,r))||n.push(r);return{arrayValue:{values:n}}}class oo extends Vl{constructor(e){super(),this.elements=e}}function tv(t,e){let n=nv(e);for(const r of t.elements)n=n.filter(i=>!on(i,r));return{arrayValue:{values:n}}}class rl extends Vl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mm(t){return xe(t.integerValue||t.doubleValue)}function nv(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof so&&i instanceof so||r instanceof oo&&i instanceof oo?Ai(r.elements,i.elements,on):r instanceof rl&&i instanceof rl?on(r.Ae,i.Ae):r instanceof nl&&i instanceof nl}(t.transform,e.transform)}class PS{constructor(e,n){this.version=e,this.transformResults=n}}class mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nl{}function rv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sv(t.key,mn.none()):new po(t.key,t.data,mn.none());{const n=t.data,r=kt.empty();let i=new je(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Lr(t.key,r,new Ut(i.toArray()),mn.none())}}function VS(t,e,n){t instanceof po?function(i,s,a){const l=i.value.clone(),c=ym(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,s,a){if(!va(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=ym(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(iv(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ms(t,e,n,r){return t instanceof po?function(s,a,l,c){if(!va(s.precondition,a))return l;const h=s.value.clone(),d=_m(s.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(s,a,l,c){if(!va(s.precondition,a))return l;const h=_m(s.fieldTransforms,c,a),d=a.data;return d.setAll(iv(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,l){return va(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function NS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Z_(r.transform,i||null);s!=null&&(n===null&&(n=kt.empty()),n.set(r.field,s))}return n||null}function gm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ai(r,i,(s,a)=>xS(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class po extends Nl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lr extends Nl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ym(t,e,n){const r=new Map;ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,kS(a,l,n[i]))}return r}function _m(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,RS(s,a,e))}return r}class sv extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DS extends Nl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&VS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=X_();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=rv(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(n,r)=>gm(n,r))&&Ai(this.baseMutations,e.baseMutations,(n,r)=>gm(n,r))}}class cf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return TS}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new cf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,se;function bS(t){switch(t){case O.OK:return K(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function ov(t){if(t===void 0)return En("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ne.OK:return O.OK;case Ne.CANCELLED:return O.CANCELLED;case Ne.UNKNOWN:return O.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return O.INTERNAL;case Ne.UNAVAILABLE:return O.UNAVAILABLE;case Ne.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ne.NOT_FOUND:return O.NOT_FOUND;case Ne.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ne.ABORTED:return O.ABORTED;case Ne.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ne.DATA_LOSS:return O.DATA_LOSS;default:return K(39323,{code:t})}}(se=Ne||(Ne={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Kn([4294967295,4294967295],0);function vm(t){const e=FS().encode(t),n=new v_;return n.update(e),new Uint8Array(n.digest())}function wm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kn([n,r],0),new Kn([i,s],0)]}class hf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ws(`Invalid padding: ${n}`);if(r<0)throw new ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ws(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Kn.fromNumber(r)));return i.compare(jS)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vm(e),[r,i]=wm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new hf(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=vm(e),[r,i]=wm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dl(X.min(),i,new Ce(re),Tn(),ie())}}class mo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mo(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class av{constructor(e,n){this.targetId=e,this.Ce=n}}class lv{constructor(e,n,r=Ye.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Em{constructor(){this.ve=0,this.Fe=Tm(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K(38017,{changeType:s})}}),new mo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Tm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class US{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tn(),this.Je=Zo(),this.He=Zo(),this.Ye=new Ce(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Qc(s))if(r===0){const a=new Q(s.path);this.et(n,a,nt.newNoDocument(a,X.min()))}else ue(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=nr(r).toUint8Array()}catch(c){if(c instanceof V_)return Ii("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hf(a,i,s)}catch(c){return Ii(c instanceof ws?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Qc(l.target)){const c=new Q(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,nt.newNoDocument(c,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=ie();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Dl(e,n,this.Ye,this.je,r);return this.je=Tn(),this.Je=Zo(),this.He=Zo(),this.Ye=new Ce(re),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Em,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new je(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new je(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Em),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zo(){return new Ce(Q.comparator)}function Tm(){return new Ce(Q.comparator)}const zS={asc:"ASCENDING",desc:"DESCENDING"},BS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"};class qS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kc(t,e){return t.useProto3Json||Rl(e)?e:{value:e}}function il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HS(t,e){return il(t,e.toTimestamp())}function nn(t){return ue(!!t,49232),X.fromTimestamp(function(n){const r=tr(n);return new we(r.seconds,r.nanos)}(t))}function ff(t,e){return Yc(t,e).canonicalString()}function Yc(t,e){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cv(t){const e=me.fromString(t);return ue(mv(e),10190,{key:e.toString()}),e}function Xc(t,e){return ff(t.databaseId,e.path)}function Lu(t,e){const n=cv(e);if(n.get(1)!==t.databaseId.projectId)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(fv(n))}function hv(t,e){return ff(t.databaseId,e)}function WS(t){const e=cv(t);return e.length===4?me.emptyPath():fv(e)}function Jc(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fv(t){return ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Sm(t,e,n){return{name:Xc(t,e),fields:n.value.mapValue.fields}}function QS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ue(d===void 0||typeof d=="string",58123),Ye.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ye.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?O.UNKNOWN:ov(h.code);return new $(d,h.message||"")}(a);n=new lv(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lu(t,r.document.name),s=nn(r.document.updateTime),a=r.document.createTime?nn(r.document.createTime):X.min(),l=new kt({mapValue:{fields:r.document.fields}}),c=nt.newFoundDocument(i,s,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new wa(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lu(t,r.document),s=r.readTime?nn(r.readTime):X.min(),a=nt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new wa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lu(t,r.document),s=r.removedTargetIds||[];n=new wa([],s,i,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new LS(i,s),l=r.targetId;n=new av(l,a)}}return n}function GS(t,e){let n;if(e instanceof po)n={update:Sm(t,e.key,e.value)};else if(e instanceof sv)n={delete:Xc(t,e.key)};else if(e instanceof Lr)n={update:Sm(t,e.key,e.data),updateMask:rI(e.fieldMask)};else{if(!(e instanceof DS))return K(16599,{Vt:e.type});n={verify:Xc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof nl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof so)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rl)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K(27497)}(t,e.precondition)),n}function KS(t,e){return t&&t.length>0?(ue(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?nn(i.updateTime):nn(s);return a.isEqual(X.min())&&(a=nn(s)),new PS(a,i.transformResults||[])}(n,e))):[]}function YS(t,e){return{documents:[hv(t,e.path)]}}function XS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hv(t,i);const s=function(h){if(h.length!==0)return pv(qt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(y){return{field:Wr(y.field),direction:eI(y.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Kc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function JS(t){let e=WS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ue(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(m){const y=dv(m);return y instanceof qt&&z_(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(x){return new io(Qr(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Rl(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,C=m.values||[];return new el(C,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,C=m.values||[];return new el(C,y)}(n.endAt)),yS(e,i,a,s,l,"F",c,h)}function ZS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qr(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qr(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qr(n.unaryFilter.field);return Me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qr(n.unaryFilter.field);return Me.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Qr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qt.create(n.compositeFilter.filters.map(r=>dv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function eI(t){return zS[t]}function tI(t){return BS[t]}function nI(t){return $S[t]}function Wr(t){return{fieldPath:t.canonicalString()}}function Qr(t){return Qe.fromServerFormat(t.fieldPath)}function pv(t){return t instanceof Me?function(n){if(n.op==="=="){if(cm(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NAN"}};if(um(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cm(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NAN"}};if(um(n.value))return{unaryFilter:{field:Wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(n.field),op:tI(n.op),value:n.value}}}(t):t instanceof qt?function(n){const r=n.getFilters().map(i=>pv(i));return r.length===1?r[0]:{compositeFilter:{op:nI(n.op),filters:r}}}(t):K(54877,{filter:t})}function rI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n,r,i,s=X.min(),a=X.min(),l=Ye.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Fn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.yt=e}}function sI(t){const e=JS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Cn=new aI}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(er.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(er.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class aI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gv=41943040;class ht{static withCacheSize(e){return new ht(e,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(gv,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ki(0)}static cr(){return new ki(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="LruGarbageCollector",lI=1048576;function Cm([t,e],[n,r]){const i=re(t,n);return i===0?re(e,r):i}class uI{constructor(e){this.Ir=e,this.buffer=new je(Cm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Cm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(Am,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Li(n)?H(Am,"Ignoring IndexedDB error during garbage collection: ",n):await Oi(n)}await this.Vr(3e5)})}}class hI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cl.ce);const r=new uI(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Im)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Im):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,l,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),qr()<=oe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function fI(t,e){return new hI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.changes=new Or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ms(r.mutation,i,Ut.empty(),we.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=Tr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=vs();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Tr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Tn();const a=Ds(),l=function(){return Ds()}();return n.forEach((c,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Lr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Ms(d.mutation,h,d.mutation.getFieldMask(),we.now())):a.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>l.set(h,new pI(d,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ds();let i=new Ce((a,l)=>a-l),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||Ut.empty();d=l.applyToLocalView(h,d),r.set(c,d);const m=(i.get(l.batchId)||ie()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,m=X_();d.forEach(y=>{if(!s.has(y)){const C=rv(n.get(y),r.get(y));C!==null&&m.set(y,C),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):W_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Tr());let l=eo,c=s;return a.next(h=>L.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(y=>{c=c.insert(d,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ie())).next(d=>({batchId:l,changes:Y_(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=vs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=vs();return this.indexManager.getCollectionParents(e,s).next(l=>L.forEach(l,c=>{const h=function(m,y){return new bi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,nt.newInvalidDocument(d)))});let l=vs();return a.forEach((c,h)=>{const d=s.get(c);d!==void 0&&Ms(d.mutation,h,Ut.empty(),we.now()),Pl(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:sI(i.bundledQuery),readTime:nn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.overlays=new Ce(Q.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Tr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Tr(),s=n.length+1,a=new Q(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ce((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Tr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Tr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return L.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new OS(n,r));let s=this.qr.get(n);s===void 0&&(s=ie(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this.Qr=new je(ze.$r),this.Ur=new je(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new me([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new me([])),r=new ze(n,e),i=new ze(n,e+1);let s=ie();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new je(ze.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new MS(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new ze(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?rf:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const l=this.Xr(a.Yr);s.push(l)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(re);return n.forEach(i=>{const s=new ze(i,0),a=new ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const a=new ze(new Q(s),0);let l=new je(re);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Yr)),!0)},a),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ze(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.ri=e,this.docs=function(){return new Ce(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Tn();const a=n.path,l=new Q(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||KT(GT(d),r)<=0||(i.has(d.key)||Pl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new EI(this)}getSize(e){return L.resolve(this.size)}}class EI extends dI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.persistence=e,this.si=new Or(n=>af(n),lf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new df,this.targetCount=0,this.ai=ki.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ki(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cl(0),this.li=!1,this.li=!0,this.hi=new _I,this.referenceDelegate=e(this),this.Pi=new TI(this),this.indexManager=new oI,this.remoteDocumentCache=function(i){return new wI(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new iI(n),this.Ii=new gI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new SI(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class SI extends XT{constructor(e){super(),this.currentSequenceNumber=e}}class pf{constructor(e){this.persistence=e,this.Ri=new df,this.Vi=null}static mi(e){return new pf(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sl{constructor(e,n){this.persistence=e,this.pi=new Or(r=>eS(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=fI(this,n)}static mi(e,n){return new sl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,s.removeEntry(a,X.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ya(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return m1()?8:JT(d1())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new II;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(qr()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(qr()<=oe.DEBUG&&H("QueryEngine","Query:",Hr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(qr()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):L.resolve())}ys(e,n){if(pm(n))return L.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tl(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ie(...s);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,l);return this.Cs(n,h,a,c.readTime)?this.ys(e,tl(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,i){return pm(n)||i.isEqual(X.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?L.resolve(null):(qr()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hr(n)),this.vs(e,a,n,QT(i,eo)).next(l=>l))})}Ds(e,n){let r=new je(G_(e));return n.forEach((i,s)=>{Pl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return qr()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Hr(n)),this.ps.getDocumentsMatchingQuery(e,n,er.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="LocalStore",CI=3e8;class RI{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ce(re),this.xs=new Or(s=>af(s),lf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kI(t,e,n,r){return new RI(t,e,n,r)}async function _v(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=ie();for(const h of i){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function xI(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const m=h.batch,y=m.keys();let C=L.resolve();return y.forEach(x=>{C=C.next(()=>d.getEntry(c,x)).next(V=>{const b=h.docVersions.get(x);ue(b!==null,48541),V.version.compareTo(b)<0&&(m.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vv(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function PI(t,e){const n=Z(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((d,m)=>{const y=i.get(m);if(!y)return;l.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,m)));let C=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(Ye.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(d.resumeToken,r)),i=i.insert(m,C),function(V,b,I){return V.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=CI?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,C,d)&&l.push(n.Pi.updateTargetData(s,C))});let c=Tn(),h=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(VI(s,a,e.documentUpdates).next(d=>{c=d.ks,h=d.qs})),!r.isEqual(X.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return L.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.Ms=i,s))}function VI(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Tn();return n.forEach((l,c)=>{const h=s.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):H(gf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{ks:a,qs:i}})}function NI(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DI(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Fn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Zc(t,e,n){const r=Z(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Li(a))throw a;H(gf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Rm(t,e,n){const r=Z(t);let i=X.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const m=Z(c),y=m.xs.get(d);return y!==void 0?L.resolve(m.Ms.get(y)):m.Pi.getTargetData(h,d)}(r,a,tn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:X.min(),n?s:ie())).next(l=>(MI(r,vS(e),l),{documents:l,Qs:s})))}function MI(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class km{constructor(){this.activeTargetIds=AS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OI{constructor(){this.Mo=new km,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new km,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="ConnectivityMonitor";class Pm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(xm,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(xm,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea=null;function eh(){return ea===null?ea=function(){return 268435456+Math.round(2147483648*Math.random())}():ea++,"0x"+ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu="RestConnection",bI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ja?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=eh(),l=this.zo(e,n.toUriEncodedString());H(bu,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:h}=new URL(l),d=Zh(h);return this.Jo(e,l,c,r,d).then(m=>(H(bu,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Ii(bu,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=bI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class UI extends FI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=eh();return new Promise((l,c)=>{const h=new w_;h.setWithCredentials(!0),h.listenOnce(E_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ga.NO_ERROR:const m=h.getResponseJson();H(Ze,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case ga.TIMEOUT:H(Ze,`RPC '${e}' ${a} timed out`),c(new $(O.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:const y=h.getStatus();if(H(Ze,`RPC '${e}' ${a} failed with status:`,y,"response text:",h.getResponseText()),y>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const x=C==null?void 0:C.error;if(x&&x.status&&x.message){const V=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(w)>=0?w:O.UNKNOWN}(x.status);c(new $(V,x.message))}else c(new $(O.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new $(O.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Ze,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);H(Ze,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",d,r,15)})}T_(e,n,r){const i=eh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=I_(),l=S_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");H(Ze,`Creating RPC '${e}' stream ${i}: ${d}`,c);const m=a.createWebChannel(d,c);this.I_(m);let y=!1,C=!1;const x=new jI({Yo:b=>{C?H(Ze,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(y||(H(Ze,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),H(Ze,`RPC '${e}' stream ${i} sending:`,b),m.send(b))},Zo:()=>m.close()}),V=(b,I,w)=>{b.listen(I,A=>{try{w(A)}catch(M){setTimeout(()=>{throw M},0)}})};return V(m,_s.EventType.OPEN,()=>{C||(H(Ze,`RPC '${e}' stream ${i} transport opened.`),x.o_())}),V(m,_s.EventType.CLOSE,()=>{C||(C=!0,H(Ze,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(m))}),V(m,_s.EventType.ERROR,b=>{C||(C=!0,Ii(Ze,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),x.a_(new $(O.UNAVAILABLE,"The operation could not be completed")))}),V(m,_s.EventType.MESSAGE,b=>{var I;if(!C){const w=b.data[0];ue(!!w,16349);const A=w,M=(A==null?void 0:A.error)||((I=A[0])==null?void 0:I.error);if(M){H(Ze,`RPC '${e}' stream ${i} received error:`,M);const U=M.status;let z=function(v){const E=Ne[v];if(E!==void 0)return ov(E)}(U),_=M.message;z===void 0&&(z=O.INTERNAL,_="Unknown error status: "+U+" with message "+M.message),C=!0,x.a_(new $(z,_)),m.close()}else H(Ze,`RPC '${e}' stream ${i} received:`,w),x.u_(w)}}),V(l,T_.STAT_EVENT,b=>{b.stat===Bc.PROXY?H(Ze,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Bc.NOPROXY&&H(Ze,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Fu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return new qS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="PersistentStream";class Ev{constructor(e,n,r,i,s,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new $(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Vm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(Vm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zI extends Ev{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=QS(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?nn(a.readTime):X.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Jc(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Qc(c)?{documents:YS(s,c)}:{query:XS(s,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=uv(s,a.resumeToken);const h=Kc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=il(s,a.snapshotVersion.toTimestamp());const h=Kc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=ZS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Jc(this.serializer),n.removeTarget=e,this.q_(n)}}class BI extends Ev{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KS(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Jc(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GS(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{}class qI extends $I{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Yc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Yc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(O.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class HI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="RemoteStore";class WI{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{br(this)&&(H(Vr,"Restarting streams for network reachability change."),await async function(c){const h=Z(c);h.Ea.add(4),await go(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ol(h)}(this))})}),this.Ra=new HI(r,i)}}async function Ol(t){if(br(t))for(const e of t.da)await e(!0)}async function go(t){for(const e of t.da)await e(!1)}function Tv(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wf(n)?vf(n):Fi(n).O_()&&_f(n,e))}function yf(t,e){const n=Z(t),r=Fi(n);n.Ia.delete(e),r.O_()&&Sv(n,e),n.Ia.size===0&&(r.O_()?r.L_():br(n)&&n.Ra.set("Unknown"))}function _f(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fi(t).Y_(e)}function Sv(t,e){t.Va.Ue(e),Fi(t).Z_(e)}function vf(t){t.Va=new US({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Fi(t).start(),t.Ra.ua()}function wf(t){return br(t)&&!Fi(t).x_()&&t.Ia.size>0}function br(t){return Z(t).Ea.size===0}function Iv(t){t.Va=void 0}async function QI(t){t.Ra.set("Online")}async function GI(t){t.Ia.forEach((e,n)=>{_f(t,e)})}async function KI(t,e){Iv(t),wf(t)?(t.Ra.ha(e),vf(t)):t.Ra.set("Unknown")}async function YI(t,e,n){if(t.Ra.set("Online"),e instanceof lv&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){H(Vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ol(t,r)}else if(e instanceof wa?t.Va.Ze(e):e instanceof av?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{const r=await vv(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(h);d&&s.Ia.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Ye.EMPTY_BYTE_STRING,d.snapshotVersion)),Sv(s,c);const m=new Fn(d.target,c,h,d.sequenceNumber);_f(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Vr,"Failed to raise snapshot:",r),await ol(t,r)}}async function ol(t,e,n){if(!Li(e))throw e;t.Ea.add(1),await go(t),t.Ra.set("Offline"),n||(n=()=>vv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Vr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ol(t)})}function Av(t,e){return e().catch(n=>ol(t,n,e))}async function Ll(t){const e=Z(t),n=ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rf;for(;XI(e);)try{const i=await NI(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,JI(e,i)}catch(i){await ol(e,i)}Cv(e)&&Rv(e)}function XI(t){return br(t)&&t.Ta.length<10}function JI(t,e){t.Ta.push(e);const n=ir(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Cv(t){return br(t)&&!ir(t).x_()&&t.Ta.length>0}function Rv(t){ir(t).start()}async function ZI(t){ir(t).ra()}async function eA(t){const e=ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function tA(t,e,n){const r=t.Ta.shift(),i=cf.from(r,e,n);await Av(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ll(t)}async function nA(t,e){e&&ir(t).X_&&await async function(r,i){if(function(a){return bS(a)&&a!==O.ABORTED}(i.code)){const s=r.Ta.shift();ir(r).B_(),await Av(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ll(r)}}(t,e),Cv(t)&&Rv(t)}async function Nm(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Vr,"RemoteStore received new credentials");const r=br(n);n.Ea.add(3),await go(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ol(n)}async function rA(t,e){const n=Z(t);e?(n.Ea.delete(2),await Ol(n)):e||(n.Ea.add(2),await go(n),n.Ra.set("Unknown"))}function Fi(t){return t.ma||(t.ma=function(n,r,i){const s=Z(n);return s.sa(),new zI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:QI.bind(null,t),t_:GI.bind(null,t),r_:KI.bind(null,t),H_:YI.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),wf(t)?vf(t):t.Ra.set("Unknown")):(await t.ma.stop(),Iv(t))})),t.ma}function ir(t){return t.fa||(t.fa=function(n,r,i){const s=Z(n);return s.sa(),new BI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZI.bind(null,t),r_:nA.bind(null,t),ta:eA.bind(null,t),na:tA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ll(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Vr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new Ef(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(t,e){if(En("AsyncQueue",`${e}: ${t}`),Li(t))return new $(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{static emptySet(e){return new di(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=vs(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.ga=new Ce(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class xi{constructor(e,n,r,i,s,a,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new xi(e,n,di.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class sA{constructor(){this.queries=Mm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Z(n),s=i.queries;i.queries=Mm(),s.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new $(O.ABORTED,"Firestore shutting down"))}}function Mm(){return new Or(t=>Q_(t),xl)}async function oA(t,e){const n=Z(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new iA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Tf(a,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Sf(n)}async function aA(t,e){const n=Z(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lA(t,e){const n=Z(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&Sf(n)}function uA(t,e,n){const r=Z(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Sf(t){t.Ca.forEach(e=>{e.next()})}var th,Om;(Om=th||(th={})).Ma="default",Om.Cache="cache";class cA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==th.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.key=e}}class xv{constructor(e){this.key=e}}class hA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=G_(e),this.tu=new di(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Dm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const y=i.get(d),C=Pl(this.query,m)?m:null,x=!!y&&this.mutatedKeys.has(y.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let b=!1;y&&C?y.data.isEqual(C.data)?x!==V&&(r.track({type:3,doc:C}),b=!0):this.su(y,C)||(r.track({type:2,doc:C}),b=!0,(c&&this.eu(C,c)>0||h&&this.eu(C,h)<0)&&(l=!0)):!y&&C?(r.track({type:0,doc:C}),b=!0):y&&!C&&(r.track({type:1,doc:y}),b=!0,(c||h)&&(l=!0)),b&&(C?(a=a.add(C),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,m)=>function(C,x){const V=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:b})}};return V(C)-V(x)}(d.type,m.type)||this.eu(d.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new xi(this.query,e.tu,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new xv(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new kv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const If="SyncEngine";class fA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dA{constructor(e){this.key=e,this.hu=!1}}class pA{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Or(l=>Q_(l),xl),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(Q.comparator),this.Au=new Map,this.Ru=new df,this.Vu={},this.mu=new Map,this.fu=ki.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mA(t,e,n=!0){const r=Ov(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Pv(r,e,n,!0),i}async function gA(t,e){const n=Ov(t);await Pv(n,e,!0,!1)}async function Pv(t,e,n,r){const i=await DI(t.localStore,tn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await yA(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Tv(t.remoteStore,i),l}async function yA(t,e,n,r,i){t.pu=(m,y,C)=>async function(V,b,I,w){let A=b.view.ru(I);A.Cs&&(A=await Rm(V.localStore,b.query,!1).then(({documents:_})=>b.view.ru(_,A)));const M=w&&w.targetChanges.get(b.targetId),U=w&&w.targetMismatches.get(b.targetId)!=null,z=b.view.applyChanges(A,V.isPrimaryClient,M,U);return bm(V,b.targetId,z.au),z.snapshot}(t,m,y,C);const s=await Rm(t.localStore,e,!0),a=new hA(e,s.Qs),l=a.ru(s.documents),c=mo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,c);bm(t,n,h.au);const d=new fA(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function _A(t,e,n){const r=Z(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!xl(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yf(r.remoteStore,i.targetId),nh(r,i.targetId)}).catch(Oi)):(nh(r,i.targetId),await Zc(r.localStore,i.targetId,!0))}async function vA(t,e){const n=Z(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))}async function wA(t,e,n){const r=RA(t);try{const i=await function(a,l){const c=Z(a),h=we.now(),d=l.reduce((C,x)=>C.add(x.key),ie());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let x=Tn(),V=ie();return c.Ns.getEntries(C,d).next(b=>{x=b,x.forEach((I,w)=>{w.isValidDocument()||(V=V.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,x)).next(b=>{m=b;const I=[];for(const w of l){const A=NS(w,m.get(w.key).overlayedDocument);A!=null&&I.push(new Lr(w.key,A,F_(A.value.mapValue),mn.exists(!0)))}return c.mutationQueue.addMutationBatch(C,h,I,l)}).next(b=>{y=b;const I=b.applyToLocalDocumentSet(m,V);return c.documentOverlayCache.saveOverlays(C,b.batchId,I)})}).then(()=>({batchId:y.batchId,changes:Y_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ce(re)),h=h.insert(l,c),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,n),await yo(r,i.changes),await Ll(r.remoteStore)}catch(i){const s=Tf(i,"Failed to persist write");n.reject(s)}}async function Vv(t,e){const n=Z(t);try{const r=await PI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ue(a.hu,14607):i.removedDocuments.size>0&&(ue(a.hu,42227),a.hu=!1))}),await yo(n,r,e)}catch(r){await Oi(r)}}function Lm(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Z(a);c.onlineState=l;let h=!1;c.queries.forEach((d,m)=>{for(const y of m.Sa)y.va(l)&&(h=!0)}),h&&Sf(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EA(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ce(Q.comparator);a=a.insert(s,nt.newNoDocument(s,X.min()));const l=ie().add(s),c=new Dl(X.min(),new Map,new Ce(re),a,l);await Vv(r,c),r.du=r.du.remove(s),r.Au.delete(e),Af(r)}else await Zc(r.localStore,e,!1).then(()=>nh(r,e,n)).catch(Oi)}async function TA(t,e){const n=Z(t),r=e.batch.batchId;try{const i=await xI(n.localStore,e);Dv(n,r,null),Nv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yo(n,i)}catch(i){await Oi(i)}}async function SA(t,e,n){const r=Z(t);try{const i=await function(a,l){const c=Z(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(ue(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(r.localStore,e);Dv(r,e,n),Nv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yo(r,i)}catch(i){await Oi(i)}}function Nv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Dv(t,e,n){const r=Z(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Mv(t,r)})}function Mv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Af(t))}function bm(t,e,n){for(const r of n)r instanceof kv?(t.Ru.addReference(r.key,e),IA(t,r)):r instanceof xv?(H(If,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Mv(t,r.key)):K(19791,{wu:r})}function IA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(If,"New document in limbo: "+n),t.Eu.add(r),Af(t))}function Af(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(me.fromString(e)),r=t.fu.next();t.Au.set(r,new dA(n)),t.du=t.du.insert(n,r),Tv(t.remoteStore,new Fn(tn(H_(n.path)),r,"TargetPurposeLimboResolution",Cl.ce))}}async function yo(t,e,n){const r=Z(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=mf.As(c.targetId,h);s.push(m)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,h){const d=Z(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(h,y=>L.forEach(y.Es,C=>d.persistence.referenceDelegate.addReference(m,y.targetId,C)).next(()=>L.forEach(y.ds,C=>d.persistence.referenceDelegate.removeReference(m,y.targetId,C)))))}catch(m){if(!Li(m))throw m;H(gf,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const C=d.Ms.get(y),x=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(x);d.Ms=d.Ms.insert(y,V)}}}(r.localStore,s))}async function AA(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(If,"User change. New user:",e.toKey());const r=await _v(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new $(O.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yo(n,r.Ls)}}function CA(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let i=ie();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function Ov(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EA.bind(null,e),e.Pu.H_=lA.bind(null,e.eventManager),e.Pu.yu=uA.bind(null,e.eventManager),e}function RA(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kI(this.persistence,new AI,e.initialUser,this.serializer)}Cu(e){return new yv(pf.mi,this.serializer)}Du(e){return new OI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}al.provider={build:()=>new al};class kA extends al{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ue(this.persistence.referenceDelegate instanceof sl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new yv(r=>sl.mi(r,n),this.serializer)}}class rh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AA.bind(null,this.syncEngine),await rA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sA}()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),r=function(s){return new UI(s)}(e.databaseInfo);return function(s,a,l,c){return new qI(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new WI(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lm(this.syncEngine,n,0),function(){return Pm.v()?new Pm:new LI}())}createSyncEngine(e,n){return function(i,s,a,l,c,h,d){const m=new pA(i,s,a,l,c,h);return d&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Z(i);H(Vr,"RemoteStore shutting down."),s.Ea.add(5),await go(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}rh.provider={build:()=>new rh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="FirestoreClient";class PA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{H(sr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(sr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ju(t,e){t.asyncQueue.verifyOperationInProgress(),H(sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _v(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VA(t);H(sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Nm(e.remoteStore,i)),t._onlineComponents=e}async function VA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(sr,"Using user provided OfflineComponentProvider");try{await ju(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await ju(t,new al)}}else H(sr,"Using default OfflineComponentProvider"),await ju(t,new kA(void 0));return t._offlineComponents}async function Lv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(sr,"Using user provided OnlineComponentProvider"),await Fm(t,t._uninitializedComponentsProvider._online)):(H(sr,"Using default OnlineComponentProvider"),await Fm(t,new rh))),t._onlineComponents}function NA(t){return Lv(t).then(e=>e.syncEngine)}async function DA(t){const e=await Lv(t),n=e.eventManager;return n.onListen=mA.bind(null,e.syncEngine),n.onUnlisten=_A.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vA.bind(null,e.syncEngine),n}function MA(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,h){const d=new xA({next:y=>{d.Nu(),a.enqueueAndForget(()=>aA(s,m)),y.fromCache&&c.source==="server"?h.reject(new $(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new cA(l,d,{includeMetadataChanges:!0,qa:!0});return oA(s,m)}(await DA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firestore.googleapis.com",Um=!0;class zm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fv,this.ssl=Um}else this.host=e.host,this.ssl=e.ssl??Um;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lI)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bv(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OT;switch(r.type){case"firstParty":return new jT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jm.get(n);r&&(H("ComponentProvider","Removing Datastore"),jm.delete(n),r.terminate())}(this),Promise.resolve()}}function OA(t,e,n,r={}){var h;t=Ya(t,bl);const i=Zh(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(l1(`https://${l}`),f1("Firestore",!0)),s.host!==Fv&&s.host!==l&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!Qa(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=et.MOCK_USER;else{d=u1(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new $(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new et(y)}t._authCredentials=new LT(new C_(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(fo(n,$e._jsonSchema))return new $e(e,r||null,new Q(me.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Oe("string",$e._jsonSchemaVersion),referencePath:Oe("string")};class Xn extends ur{constructor(e,n,r){super(e,n,H_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Q(e))}withConverter(e){return new Xn(this.firestore,e,this._path)}}function hs(t,e,...n){if(t=Si(t),R_("collection","path",e),t instanceof bl){const r=me.fromString(e,...n);return em(r),new Xn(t,null,r)}{if(!(t instanceof $e||t instanceof Xn))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return em(r),new Xn(t.firestore,null,r)}}function LA(t,e,...n){if(t=Si(t),arguments.length===1&&(e=nf.newId()),R_("doc","path",e),t instanceof bl){const r=me.fromString(e,...n);return Zp(r),new $e(t,null,new Q(r))}{if(!(t instanceof $e||t instanceof Xn))throw new $(O.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return Zp(r),new $e(t.firestore,t instanceof Xn?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="AsyncQueue";class $m{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wv(this,"async_queue_retry"),this._c=()=>{const r=Fu();r&&H(Bm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Li(e))throw e;H(Bm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",qm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Ef.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&K(47125,{Pc:qm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cf extends bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,await e}}}function bA(t,e){const n=typeof t=="object"?t:TT(),r=typeof t=="string"?t:Ja,i=yT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=o1("firestore");s&&OA(i,...s)}return i}function jv(t){if(t._terminated)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FA(t),t._firestoreClient}function FA(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,h,d){return new rS(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bv(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xt(Ye.fromBase64String(e))}catch(n){throw new $(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xt(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,xt._jsonSchema))return xt.fromBase64String(e.bytes)}}xt._jsonSchemaVersion="firestore/bytes/1.0",xt._jsonSchema={type:Oe("string",xt._jsonSchemaVersion),bytes:Oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rn._jsonSchemaVersion}}static fromJSON(e){if(fo(e,rn._jsonSchema))return new rn(e.latitude,e.longitude)}}rn._jsonSchemaVersion="firestore/geoPoint/1.0",rn._jsonSchema={type:Oe("string",rn._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,sn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new sn(e.vectorValues);throw new $(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sn._jsonSchemaVersion="firestore/vectorValue/1.0",sn._jsonSchema={type:Oe("string",sn._jsonSchemaVersion),vectorValues:Oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^__.*__$/;class UA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new po(e,this.data,n,this.fieldTransforms)}}function zv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class kf{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ll(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zv(this.Ac)&&jA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ml(e)}Cc(e,n,r,i=!1){return new kf({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bv(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new zA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BA(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Hv("Data must be an object, but it was:",a,r);const l=$v(r,a);let c,h;if(s.merge)c=new Ut(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const y=qA(e,m,n);if(!a.contains(y))throw new $(O.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);WA(d,y)||d.push(y)}c=new Ut(d),h=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=a.fieldTransforms;return new UA(new kt(l),c,h)}function $A(t,e,n,r=!1){return xf(n,t.Cc(r?4:3,e))}function xf(t,e){if(qv(t=Si(t)))return Hv("Unsupported field value:",e,t),$v(t,e);if(t instanceof Uv)return function(r,i){if(!zv(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=xf(l,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Si(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=we.fromDate(r);return{timestampValue:il(i.serializer,s)}}if(r instanceof we){const s=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:il(i.serializer,s)}}if(r instanceof rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xt)return{bytesValue:uv(i.serializer,r._byteString)};if(r instanceof $e){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ff(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sn)return function(a,l){return{mapValue:{fields:{[L_]:{stringValue:b_},[Za]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return uf(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Al(r)}`)}(t,e)}function $v(t,e){const n={};return P_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(t,(r,i)=>{const s=xf(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof rn||t instanceof xt||t instanceof $e||t instanceof Uv||t instanceof sn)}function Hv(t,e,n){if(!qv(n)||!k_(n)){const r=Al(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function qA(t,e,n){if((e=Si(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return Wv(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const HA=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n){if(e.search(HA)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rf(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new $(O.INVALID_ARGUMENT,l+t+c)}function WA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QA extends Qv{data(){return super.data()}}function Fl(t,e){return typeof e=="string"?Wv(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pf{}class Vf extends Pf{}function Uu(t,e,...n){let r=[];e instanceof Pf&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof Nf).length,l=s.filter(c=>c instanceof jl).length;if(a>1||a>0&&l>0)throw new $(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jl extends Vf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jl(e,n,r)}_apply(e){const n=this._parse(e);return Gv(e._query,n),new ur(e.firestore,e.converter,Gc(e._query,n))}_parse(e){const n=Bv(e.firestore);return function(s,a,l,c,h,d,m){let y;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Wm(m,d);const x=[];for(const V of m)x.push(Hm(c,s,V));y={arrayValue:{values:x}}}else y=Hm(c,s,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Wm(m,d),y=$A(l,a,m,d==="in"||d==="not-in");return Me.create(h,d,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fs(t,e,n){const r=e,i=Fl("where",t);return jl._create(i,r,n)}class Nf extends Pf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)Gv(a,c),a=Gc(a,c)}(e._query,n),new ur(e.firestore,e.converter,Gc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Df extends Vf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Df(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new io(s,a)}(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new bi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function KA(t,e="asc"){const n=e,r=Fl("orderBy",t);return Df._create(r,n)}class Mf extends Vf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mf(e,n,r)}_apply(e){return new ur(e.firestore,e.converter,tl(e._query,this._limit,this._limitType))}}function zu(t){return WT("limit",t),Mf._create("limit",t,"F")}function Hm(t,e,n){if(typeof(n=Si(n))=="string"){if(n==="")throw new $(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W_(e)&&n.indexOf("/")!==-1)throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!Q.isDocumentKey(r))throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lm(t,new Q(r))}if(n instanceof $e)return lm(t,n._key);throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Al(n)}.`)}function Wm(t,e){if(!Array.isArray(t)||t.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gv(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YA{convertValue(e,n="none"){switch(rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Za].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>xe(a.doubleValue));return new sn(n)}convertGeoPoint(e){return new rn(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(to(e));default:return null}}convertTimestamp(e){const n=tr(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);ue(mv(r),9688,{name:e});const i=new no(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||En(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends Qv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ea(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",pi._jsonSchema={type:Oe("string",pi._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class Ea extends pi{data(e={}){return super.data(e)}}class mi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ea(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Ea(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Ea(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:JA(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}mi._jsonSchemaVersion="firestore/querySnapshot/1.0",mi._jsonSchema={type:Oe("string",mi._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class ZA extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function Bu(t){t=Ya(t,ur);const e=Ya(t.firestore,Cf),n=jv(e),r=new ZA(e);return GA(t._query),MA(n,t._query).then(i=>new mi(e,r,t,i))}function Qm(t,e){const n=Ya(t.firestore,Cf),r=LA(t),i=XA(t.converter,e);return e2(n,[BA(Bv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,mn.exists(!1))]).then(()=>r)}function e2(t,e){return function(r,i){const s=new Yn;return r.asyncQueue.enqueueAndForget(async()=>wA(await NA(r),i,s)),s.promise}(jv(t),e)}(function(e,n=!0){(function(i){Mi=i})(ET),Ka(new Js("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Cf(new bT(r.getProvider("auth-internal")),new UT(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new $(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new no(h.options.projectId,d)}(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),fi(Kp,Yp,e),fi(Kp,Yp,"esm2020")})();const t2={apiKey:"AIzaSyAXfGpWZj7Ax_wJLPS4QGmxa2g_nKeQyfY",authDomain:"fermle.firebaseapp.com",projectId:"fermle",storageBucket:"fermle.firebasestorage.app",messagingSenderId:"48139745724",appId:"1:48139745724:web:9ae1838d077482ea6113b9"},n2=g_(t2),ds=bA(n2),Kv=t=>{const r=Math.floor((new Date-new Date("2025-01-01"))/(1e3*60*60*24)),i=t==="market"?Math.floor(Pu.length/2):0;return Pu[(r+i)%Pu.length]},un=t=>{if(!t||t.trim()==="")return null;let e=t.trim().toLowerCase().replace(/,/g,"").replace(/\s/g,"");if(/^[\d.]+e[\d+]+$/i.test(e)){const i=parseFloat(e);return isNaN(i)?null:i}const n={k:1e3,m:1e6,b:1e9,bn:1e9,t:1e12,tn:1e12};for(const[i,s]of Object.entries(n))if(e.endsWith(i)){const a=e.slice(0,-i.length),l=parseFloat(a);return isNaN(l)?null:l*s}const r=parseFloat(e);return isNaN(r)?null:r},$r=t=>t>=1e12?`${(t/1e12).toFixed(1)}T`:t>=1e9?`${(t/1e9).toFixed(1)}B`:t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}K`:t.toLocaleString(),Gm=t=>Math.floor(Math.log10(Math.abs(t))),r2=(t,e)=>{const n=Gm(t),r=Gm(e);return n===r},i2=(t,e)=>{const n=Math.min(t,e)/Math.max(t,e);return Math.round(n*100)},s2=(t,e,n,r)=>{if(!r)return 0;const i=Math.log10(e/t);return Math.round(Math.max(0,1e3/i))},Km=(t,e)=>Math.log10(e/t).toFixed(1),Yv="fermle_state_",Xv="fermle_stats",Jv="fermle_nickname",na=t=>{try{const e=localStorage.getItem(Yv+t);if(e){const n=JSON.parse(e),r=Kv(t);if(n.questionId===r.id)return n}}catch(e){console.error("Failed to load game state:",e)}return null},o2=t=>{try{localStorage.setItem(Yv+t.mode,JSON.stringify(t))}catch(e){console.error("Failed to save game state:",e)}},a2=()=>{try{const t=localStorage.getItem(Xv);if(t)return JSON.parse(t)}catch(t){console.error("Failed to load stats:",t)}return{classic:{played:0,won:0,streak:0,maxStreak:0},market:{played:0,won:0,totalScore:0,bestScore:0}}},ra=t=>{try{localStorage.setItem(Xv,JSON.stringify(t))}catch(e){console.error("Failed to save stats:",e)}},l2=()=>{try{return localStorage.getItem(Jv)||""}catch{return""}},u2=t=>{try{localStorage.setItem(Jv,t)}catch(e){console.error("Failed to save nickname:",e)}},$u=()=>new Date().toISOString().split("T")[0];function c2(){const[t,e]=ve.useState(()=>{const q=na("classic"),G=na("market"),pe=(q==null?void 0:q.gameState)==="won"||(q==null?void 0:q.gameState)==="lost",ae=(G==null?void 0:G.gameState)==="won"||(G==null?void 0:G.gameState)==="lost";return pe&&!ae?"market":"classic"}),n=Kv(t),r=na(t),[i,s]=ve.useState((r==null?void 0:r.guesses)||[]),[a,l]=ve.useState(""),[c,h]=ve.useState((r==null?void 0:r.gameState)||"playing"),[d,m]=ve.useState(""),[y,C]=ve.useState(""),[x,V]=ve.useState((r==null?void 0:r.marketResult)||null),[b,I]=ve.useState((r==null?void 0:r.marketAttempt)||1),[w,A]=ve.useState(!1),[M,U]=ve.useState(!1),[z,_]=ve.useState(!1),[g,v]=ve.useState(""),[E,S]=ve.useState(a2),[R,T]=ve.useState(l2),[Ve,Mt]=ve.useState(""),[cr,an]=ve.useState(!1),[B,Y]=ve.useState([]),[J,fe]=ve.useState(!1),[de,yt]=ve.useState((r==null?void 0:r.scoreSubmitted)||!1),it=og.useRef(t),Ot=5;ve.useEffect(()=>{it.current===t&&o2({mode:t,questionId:n.id,guesses:i,gameState:c,marketResult:x,marketAttempt:b,scoreSubmitted:de})},[n.id,i,c,x,b,de]),ve.useEffect(()=>{const q=na(t);s((q==null?void 0:q.guesses)||[]),h((q==null?void 0:q.gameState)||"playing"),V((q==null?void 0:q.marketResult)||null),I((q==null?void 0:q.marketAttempt)||1),yt((q==null?void 0:q.scoreSubmitted)||!1),l(""),m(""),C(""),A(!1),v(""),it.current=t},[t]),ve.useEffect(()=>{t==="market"&&st()},[t]);const st=async()=>{try{const q=$u(),G=Uu(hs(ds,"leaderboard"),fs("date","==",q),KA("score","desc"),zu(10)),ae=(await Bu(G)).docs.map(ee=>ee.data());Y(ae)}catch(q){console.error("Failed to fetch leaderboard:",q)}},Ht=async q=>{if(!(!R||de))try{const G=$u(),pe=Uu(hs(ds,"leaderboard"),fs("date","==",G),fs("nickname","==",R),zu(1));if(!(await Bu(pe)).empty){console.log("Score already submitted today for this nickname"),yt(!0);return}await Qm(hs(ds,"leaderboard"),{nickname:R,score:q,date:G,questionId:n.id,timestamp:new Date().toISOString()}),yt(!0),st()}catch(G){console.error("Failed to submit score:",G)}},ji=q=>{q.preventDefault();const G=Ve.trim();if(G.length<2||G.length>15){v("Nickname must be 2-15 characters");return}u2(G),T(G),an(!1),v(""),x&&x.isHit&&!de&&_o(G,x.score)},_o=async(q,G)=>{try{const pe=$u(),ae=Uu(hs(ds,"leaderboard"),fs("date","==",pe),fs("nickname","==",q),zu(1));if(!(await Bu(ae)).empty){console.log("Score already submitted today for this nickname"),yt(!0);return}await Qm(hs(ds,"leaderboard"),{nickname:q,score:G,date:pe,questionId:n.id,timestamp:new Date().toISOString()}),yt(!0),st()}catch(pe){console.error("Failed to submit score:",pe)}},vo=q=>{q!==t&&e(q)},Ul=q=>{q.preventDefault();const G=un(a);if(G===null||G<=0){v("Enter a positive number (e.g., 1000, 1K, 1e3)");return}v("");const pe={value:G,isCorrect:r2(G,n.answer),direction:G<n.answer?"higher":G>n.answer?"lower":"exact",accuracy:i2(G,n.answer)},ae=[...i,pe];if(s(ae),l(""),pe.isCorrect){h("won");const ee={...E};ee.classic.played+=1,ee.classic.won+=1,ee.classic.streak+=1,ee.classic.maxStreak=Math.max(ee.classic.maxStreak,ee.classic.streak),S(ee),ra(ee)}else if(ae.length>=Ot){h("lost");const ee={...E};ee.classic.played+=1,ee.classic.streak=0,S(ee),ra(ee)}},wo=q=>{q.preventDefault();const G=un(d),pe=un(y);if(G===null||G<=0){v("Enter a valid bid price");return}if(pe===null||pe<=0){v("Enter a valid ask price");return}if(G>=pe){v("Bid must be lower than ask");return}v("");const ae=n.answer>=G&&n.answer<=pe,ee=n.answer>pe;n.answer<G;const ln=s2(G,pe,n.answer,ae),In=b===1?ln:Math.round(ln/2);if(V({bid:G,ask:pe,isHit:ae,score:In,attempt:b,feedback:ae?null:ee?"lifted":"hit"}),ae){h("won");const _t={...E};_t.market.played+=1,_t.market.won+=1,_t.market.totalScore+=In,_t.market.bestScore=Math.max(_t.market.bestScore,In),S(_t),ra(_t),R?Ht(In):an(!0)}else if(b>=2){h("lost");const _t={...E};_t.market.played+=1,S(_t),ra(_t)}else I(2),m(""),C("")},Fr=()=>{if(t==="market"&&x){const ee=Km(x.bid,x.ask),ln=x.isHit?"":"",In=x.isHit?`+${x.score}pts`:"0pts",Ui=x.attempt===2?" (2nd attempt)":"";return`Fermle #${n.id} ${ln} Market Maker${Ui}

Spread: ${ee} OoM | ${In}

Play at: https://fermle.io`}const q=i.map(ee=>ee.isCorrect?"":ee.direction==="higher"?"":"").join(""),G=c==="won"?`${i.length}/${Ot}`:"X/5",pe=i.find(ee=>ee.isCorrect),ae=pe?` (${pe.accuracy}% accuracy)`:"";return`Fermle #${n.id} ${G}${ae}

${q}

Play at: https://fermle.io`},Eo=()=>{const q=Fr();navigator.clipboard.writeText(q),_(!0),setTimeout(()=>_(!1),2e3)},Wt=c!=="playing";return N.jsx("div",{style:D.container,children:N.jsxs("div",{style:D.game,children:[N.jsxs("header",{style:D.header,children:[N.jsx("h1",{style:D.title,children:"FERMLE"}),N.jsx("p",{style:D.subtitle,children:t==="classic"?N.jsxs(N.Fragment,{children:["Get within the right power of 10"," ",N.jsx("span",{style:D.helpIcon,onClick:()=>U(!M),children:"?"})]}):"The Daily Quant Trainer - Make a Market"}),M&&t==="classic"&&N.jsx("div",{style:D.helpBox,children:'Fermi estimation is about getting the right order of magnitude. If the answer is 85 million, any guess from 10M99M wins  you got the right "ballpark". Named after physicist Enrico Fermi.'}),N.jsxs("div",{style:D.modeToggle,children:[N.jsx("button",{style:{...D.modeButton,...t==="classic"?D.modeButtonActive:{}},onClick:()=>vo("classic"),children:"Classic"}),N.jsx("button",{style:{...D.modeButton,...t==="market"?D.modeButtonActive:{}},onClick:()=>vo("market"),children:"Advanced"})]})]}),N.jsxs("div",{style:D.questionCard,children:[N.jsxs("span",{style:D.questionNumber,children:["#",n.id]}),N.jsx("h2",{style:D.question,children:n.question}),!Wt&&N.jsx("button",{style:D.hintButton,onClick:()=>A(!w),children:w?"Hide hint":"Show hint"}),w&&!Wt&&N.jsx("p",{style:D.hint,children:n.hint})]}),t==="classic"&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{style:D.guessesContainer,children:[i.map((q,G)=>N.jsxs("div",{style:{...D.guessRow,...q.isCorrect?D.guessCorrect:D.guessIncorrect},children:[N.jsx("span",{style:D.guessNumber,children:$r(q.value)}),N.jsx("span",{style:D.guessIndicator,children:q.isCorrect?` ${q.accuracy}%`:`${q.direction==="higher"?" Higher":" Lower"} (${q.accuracy}%)`})]},G)),!Wt&&Array(Ot-i.length).fill(0).map((q,G)=>N.jsx("div",{style:D.guessRowEmpty,children:N.jsxs("span",{style:D.guessPlaceholder,children:["Guess ",i.length+G+1]})},`empty-${G}`))]}),!Wt&&N.jsxs("form",{onSubmit:Ul,style:D.inputForm,children:[N.jsxs("div",{style:D.inputWrapper,children:[N.jsx("input",{type:"text",value:a,onChange:q=>l(q.target.value),placeholder:"Enter a number (e.g., 500M, 2.5B, 1e9)",style:D.input,autoFocus:!0}),N.jsx("button",{type:"submit",style:D.submitButtonInline,children:"GUESS"})]}),g&&N.jsx("p",{style:D.error,children:g}),N.jsx("p",{style:D.inputHelp,children:"Supports: 1000, 1K, 1M, 1B, 1T, 1e6"})]})]}),t==="market"&&N.jsxs(N.Fragment,{children:[!Wt&&N.jsxs("div",{style:D.marketContainer,children:[b===2&&x&&!x.isHit&&N.jsxs("div",{style:D.feedbackBox,children:[x.feedback==="lifted"?N.jsxs(N.Fragment,{children:[N.jsx("span",{style:D.feedbackEmoji,children:""}),N.jsx("span",{style:D.feedbackText,children:"LIFTED  Answer is above your ask"})]}):N.jsxs(N.Fragment,{children:[N.jsx("span",{style:D.feedbackEmoji,children:""}),N.jsx("span",{style:D.feedbackText,children:"HIT  Answer is below your bid"})]}),N.jsxs("p",{style:D.feedbackSubtext,children:["Your market: ",$r(x.bid),"  ",$r(x.ask)]})]}),N.jsx("p",{style:D.marketInstructions,children:b===1?"Set your bid (low) and ask (high). If the true answer falls within your spread, you win! Tighter spreads = more points.":"Second chance! Adjust your spread based on the feedback. Half points available."}),N.jsxs("form",{onSubmit:wo,style:D.inputForm,children:[N.jsxs("div",{style:D.marketInputs,children:[N.jsxs("div",{style:D.marketInputGroup,children:[N.jsx("label",{style:D.marketLabel,children:"BID (low)"}),N.jsx("input",{type:"text",value:d,onChange:q=>m(q.target.value),placeholder:"e.g., 100M",style:D.marketInput,autoFocus:!0})]}),N.jsx("div",{style:D.marketDivider,children:""}),N.jsxs("div",{style:D.marketInputGroup,children:[N.jsx("label",{style:D.marketLabel,children:"ASK (high)"}),N.jsx("input",{type:"text",value:y,onChange:q=>C(q.target.value),placeholder:"e.g., 500B",style:D.marketInput})]})]}),d&&y&&un(d)&&un(y)&&un(d)<un(y)&&N.jsxs("p",{style:D.spreadPreview,children:["Spread width: ",Km(un(d),un(y))," orders of magnitude"]}),N.jsx("button",{type:"submit",style:D.submitButton,children:b===1?"MAKE MARKET":"REQUOTE"}),g&&N.jsx("p",{style:D.error,children:g}),N.jsx("p",{style:D.inputHelp,children:"Supports: 1000, 1K, 1M, 1B, 1T, 1e6"})]})]}),x&&Wt&&N.jsxs("div",{style:D.marketResultContainer,children:[N.jsxs("div",{style:{...D.guessRow,...x.isHit?D.guessCorrect:D.guessIncorrect},children:[N.jsxs("span",{style:D.guessNumber,children:[$r(x.bid),"  ",$r(x.ask)]}),N.jsx("span",{style:D.guessIndicator,children:x.isHit?" FILLED!":" MISS"})]}),x.isHit&&N.jsxs("div",{style:D.scoreDisplay,children:[N.jsxs("span",{style:D.scoreLabel,children:["Score",x.attempt===2?" (2nd attempt)":""]}),N.jsxs("span",{style:D.scoreValue,children:["+",x.score]})]})]})]}),t==="market"&&N.jsxs("div",{style:D.leaderboardSection,children:[N.jsx("button",{onClick:()=>fe(!J),style:D.leaderboardToggle,children:J?"Hide Leaderboard":" Today's Leaderboard"}),J&&N.jsx("div",{style:D.leaderboard,children:B.length===0?N.jsx("p",{style:D.leaderboardEmpty,children:"No scores yet today. Be the first!"}):B.map((q,G)=>N.jsxs("div",{style:{...D.leaderboardRow,...q.nickname===R?D.leaderboardRowHighlight:{}},children:[N.jsxs("span",{style:D.leaderboardRank,children:["#",G+1]}),N.jsx("span",{style:D.leaderboardName,children:q.nickname}),N.jsxs("span",{style:D.leaderboardScore,children:[q.score,"pts"]})]},G))})]}),Wt&&N.jsxs("div",{style:D.gameOver,children:[N.jsx("div",{style:c==="won"?D.resultWin:D.resultLose,children:t==="market"?c==="won"?" Filled!":" Missed!":c==="won"?" Right OOM!":" Not quite"}),N.jsxs("div",{style:D.answerReveal,children:[N.jsx("span",{style:D.answerLabel,children:"The answer:"}),N.jsx("span",{style:D.answerValue,children:$r(n.answer)}),N.jsxs("span",{style:D.answerExact,children:["(",n.answer.toLocaleString(),")"]})]}),N.jsxs("p",{style:D.source,children:["Source: ",n.source]}),N.jsx("div",{style:D.statsContainer,children:t==="classic"?N.jsxs("div",{style:D.statsRow,children:[N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.classic.played}),N.jsx("span",{style:D.statLabel,children:"Played"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsxs("span",{style:D.statValue,children:[E.classic.played>0?Math.round(E.classic.won/E.classic.played*100):0,"%"]}),N.jsx("span",{style:D.statLabel,children:"Win %"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.classic.streak}),N.jsx("span",{style:D.statLabel,children:"Streak"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.classic.maxStreak}),N.jsx("span",{style:D.statLabel,children:"Best"})]})]}):N.jsxs("div",{style:D.statsRow,children:[N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.market.played}),N.jsx("span",{style:D.statLabel,children:"Played"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsxs("span",{style:D.statValue,children:[E.market.played>0?Math.round(E.market.won/E.market.played*100):0,"%"]}),N.jsx("span",{style:D.statLabel,children:"Hit %"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.market.totalScore}),N.jsx("span",{style:D.statLabel,children:"Total Pts"})]}),N.jsxs("div",{style:D.statItem,children:[N.jsx("span",{style:D.statValue,children:E.market.bestScore}),N.jsx("span",{style:D.statLabel,children:"Best"})]})]})}),t==="market"&&cr&&N.jsxs("div",{style:D.nicknamePrompt,children:[N.jsx("p",{style:D.nicknameTitle,children:"Enter nickname for leaderboard"}),N.jsxs("form",{onSubmit:ji,style:D.nicknameForm,children:[N.jsx("input",{type:"text",value:Ve,onChange:q=>Mt(q.target.value),placeholder:"Your nickname",style:D.nicknameInput,maxLength:15,autoFocus:!0}),N.jsx("button",{type:"submit",style:D.nicknameButton,children:"Submit"})]}),g&&N.jsx("p",{style:D.error,children:g}),N.jsx("button",{onClick:()=>an(!1),style:D.skipButton,children:"Skip"})]}),N.jsx("button",{onClick:Eo,style:D.shareButton,children:z?" Copied!":"Share result"}),N.jsx("div",{style:D.sharePreview,children:N.jsx("pre",{style:D.shareText,children:Fr()})})]}),N.jsxs("footer",{style:D.footer,children:[N.jsx("p",{children:Wt?"Come back tomorrow for a new puzzle!":"New puzzle every day"}),N.jsx("a",{href:"https://buymeacoffee.com/arvhug",target:"_blank",rel:"noopener noreferrer",style:D.coffeeLink,children:" Beer donations"})]})]})})}const D={container:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"20px",fontFamily:"'JetBrains Mono', 'Fira Code', 'SF Mono', monospace"},game:{width:"100%",maxWidth:"480px",paddingTop:"20px"},header:{textAlign:"center",marginBottom:"32px"},title:{fontSize:"48px",fontWeight:"800",color:"#e94560",margin:"0",letterSpacing:"8px",textShadow:"0 0 40px rgba(233, 69, 96, 0.5)"},subtitle:{color:"#a0a0a0",fontSize:"14px",marginTop:"8px",letterSpacing:"2px",textTransform:"uppercase"},helpIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"18px",height:"18px",borderRadius:"50%",border:"1px solid #a0a0a0",fontSize:"11px",cursor:"pointer",marginLeft:"6px",verticalAlign:"middle"},helpBox:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",padding:"12px 16px",marginTop:"12px",fontSize:"12px",color:"#c0c0c0",textTransform:"none",letterSpacing:"normal",lineHeight:"1.5",maxWidth:"320px",marginLeft:"auto",marginRight:"auto"},modeToggle:{display:"flex",justifyContent:"center",gap:"8px",marginTop:"16px"},modeButton:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#a0a0a0",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"12px",transition:"all 0.2s"},modeButtonActive:{background:"#e94560",borderColor:"#e94560",color:"#ffffff"},questionCard:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"24px",marginBottom:"24px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative"},questionNumber:{position:"absolute",top:"12px",right:"16px",color:"#e94560",fontSize:"12px",fontWeight:"600"},question:{color:"#ffffff",fontSize:"20px",fontWeight:"500",margin:"0",lineHeight:"1.5",fontFamily:"'Space Grotesk', 'Inter', sans-serif"},hintButton:{marginTop:"16px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#a0a0a0",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",fontSize:"12px",transition:"all 0.2s"},hint:{color:"#e9a560",fontSize:"14px",marginTop:"12px",marginBottom:"0",fontStyle:"italic"},guessesContainer:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"24px"},guessRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderRadius:"12px",transition:"all 0.3s"},guessCorrect:{background:"linear-gradient(135deg, rgba(46, 213, 115, 0.2) 0%, rgba(46, 213, 115, 0.1) 100%)",border:"1px solid rgba(46, 213, 115, 0.4)"},guessIncorrect:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},guessRowEmpty:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px 20px",borderRadius:"12px",border:"1px dashed rgba(255, 255, 255, 0.1)"},guessNumber:{color:"#ffffff",fontSize:"18px",fontWeight:"600"},guessIndicator:{color:"#a0a0a0",fontSize:"14px"},guessPlaceholder:{color:"rgba(255, 255, 255, 0.2)",fontSize:"14px"},inputForm:{marginBottom:"24px"},inputWrapper:{display:"flex",gap:"8px"},input:{flex:"1",background:"rgba(255, 255, 255, 0.08)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"16px 20px",color:"#ffffff",fontSize:"16px",fontFamily:"'JetBrains Mono', monospace",outline:"none",transition:"border-color 0.2s"},submitButtonInline:{background:"#e94560",border:"none",borderRadius:"12px",padding:"16px 24px",color:"#ffffff",fontSize:"14px",fontWeight:"700",cursor:"pointer",letterSpacing:"1px",transition:"all 0.2s"},submitButton:{background:"#e94560",border:"none",borderRadius:"12px",padding:"16px 24px",color:"#ffffff",fontSize:"14px",fontWeight:"700",cursor:"pointer",letterSpacing:"1px",transition:"all 0.2s",width:"100%",marginTop:"12px"},error:{color:"#e94560",fontSize:"12px",marginTop:"8px",marginBottom:"0"},inputHelp:{color:"rgba(255, 255, 255, 0.3)",fontSize:"11px",marginTop:"8px",textAlign:"center"},marketContainer:{marginBottom:"24px"},feedbackBox:{background:"rgba(233, 165, 96, 0.15)",border:"1px solid rgba(233, 165, 96, 0.4)",borderRadius:"12px",padding:"16px",marginBottom:"20px",textAlign:"center"},feedbackEmoji:{fontSize:"24px",display:"block",marginBottom:"8px"},feedbackText:{color:"#e9a560",fontSize:"16px",fontWeight:"600"},feedbackSubtext:{color:"#a0a0a0",fontSize:"12px",marginTop:"8px",marginBottom:"0"},marketInstructions:{color:"#a0a0a0",fontSize:"13px",lineHeight:"1.5",marginBottom:"20px",textAlign:"center"},marketInputs:{display:"flex",alignItems:"center",gap:"12px"},marketInputGroup:{flex:1},marketLabel:{display:"block",color:"#a0a0a0",fontSize:"11px",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px",textAlign:"center"},marketInput:{width:"100%",background:"rgba(255, 255, 255, 0.08)",border:"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"16px 12px",color:"#ffffff",fontSize:"16px",fontFamily:"'JetBrains Mono', monospace",outline:"none",textAlign:"center",boxSizing:"border-box"},marketDivider:{color:"#a0a0a0",fontSize:"20px",marginTop:"20px"},spreadPreview:{color:"#e9a560",fontSize:"13px",textAlign:"center",marginTop:"12px",marginBottom:"0"},marketResultContainer:{marginBottom:"24px"},scoreDisplay:{textAlign:"center",marginTop:"16px"},scoreLabel:{display:"block",color:"#a0a0a0",fontSize:"11px",textTransform:"uppercase",letterSpacing:"1px"},scoreValue:{display:"block",color:"#2ed573",fontSize:"32px",fontWeight:"700",marginTop:"4px"},gameOver:{textAlign:"center"},resultWin:{fontSize:"32px",fontWeight:"700",color:"#2ed573",marginBottom:"24px"},resultLose:{fontSize:"32px",fontWeight:"700",color:"#e94560",marginBottom:"24px"},answerReveal:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"20px",marginBottom:"12px"},answerLabel:{display:"block",color:"#a0a0a0",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},answerValue:{display:"block",color:"#ffffff",fontSize:"36px",fontWeight:"700"},answerExact:{display:"block",color:"#a0a0a0",fontSize:"12px",marginTop:"4px"},source:{color:"rgba(255, 255, 255, 0.3)",fontSize:"11px",marginBottom:"24px"},statsContainer:{marginBottom:"24px"},statsRow:{display:"flex",justifyContent:"center",gap:"16px"},statItem:{textAlign:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",minWidth:"60px"},statValue:{display:"block",color:"#ffffff",fontSize:"20px",fontWeight:"700"},statLabel:{display:"block",color:"#a0a0a0",fontSize:"10px",textTransform:"uppercase",letterSpacing:"0.5px",marginTop:"4px"},shareButton:{background:"#e94560",border:"none",borderRadius:"12px",padding:"16px 32px",color:"#ffffff",fontSize:"14px",fontWeight:"700",cursor:"pointer",letterSpacing:"1px",marginBottom:"16px",transition:"all 0.2s"},sharePreview:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"16px"},shareText:{color:"#a0a0a0",fontSize:"12px",margin:"0",whiteSpace:"pre-wrap",fontFamily:"'JetBrains Mono', monospace"},footer:{textAlign:"center",marginTop:"32px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)",fontSize:"12px"},coffeeLink:{display:"inline-block",marginTop:"12px",color:"#e9a560",textDecoration:"none",fontSize:"12px",padding:"8px 16px",border:"1px solid #e9a560",borderRadius:"8px",transition:"all 0.2s"},nicknamePrompt:{background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",padding:"20px",marginBottom:"20px",textAlign:"center"},nicknameTitle:{color:"#ffffff",fontSize:"14px",marginBottom:"12px"},nicknameForm:{display:"flex",gap:"8px",justifyContent:"center"},nicknameInput:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"10px 14px",color:"#ffffff",fontSize:"14px",width:"150px",outline:"none"},nicknameButton:{background:"#e94560",border:"none",borderRadius:"8px",padding:"10px 16px",color:"#ffffff",fontSize:"14px",fontWeight:"600",cursor:"pointer"},skipButton:{background:"transparent",border:"none",color:"#a0a0a0",fontSize:"12px",marginTop:"10px",cursor:"pointer",textDecoration:"underline"},leaderboardSection:{marginBottom:"20px"},leaderboardToggle:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"10px 20px",color:"#ffffff",fontSize:"14px",cursor:"pointer",width:"100%",transition:"all 0.2s"},leaderboard:{marginTop:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"12px"},leaderboardEmpty:{color:"#a0a0a0",fontSize:"13px",textAlign:"center",padding:"20px",margin:0},leaderboardRow:{display:"flex",alignItems:"center",padding:"10px 12px",borderRadius:"8px",marginBottom:"4px"},leaderboardRowHighlight:{background:"rgba(233, 69, 96, 0.2)",border:"1px solid rgba(233, 69, 96, 0.4)"},leaderboardRank:{color:"#e9a560",fontSize:"14px",fontWeight:"600",width:"40px"},leaderboardName:{color:"#ffffff",fontSize:"14px",flex:1},leaderboardScore:{color:"#2ed573",fontSize:"14px",fontWeight:"600"}};qu.createRoot(document.getElementById("root")).render(N.jsx(og.StrictMode,{children:N.jsx(c2,{})}));
